(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["erpManagement3"],{"12ae":function(t,e){t.exports="data:image/gif;base64,R0lGODlhJQAlAJECAL3L2AYrTv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgACACwAAAAAJQAlAAACi5SPqcvtDyGYIFpF690i8xUw3qJBwUlSadmcLqYmGQu6KDIeM13beGzYWWy3DlB4IYaMk+Dso2RWkFCfLPcRvFbZxFLUDTt21BW56TyjRep1e20+i+eYMR145W2eefj+6VFmgTQi+ECVY8iGxcg35phGo/iDFwlTyXWphwlm1imGRdcnuqhHeop6UAAAIfkEBQoAAgAsEAACAAQACwAAAgWMj6nLXAAh+QQFCgACACwVAAUACgALAAACFZQvgRi92dyJcVJlLobUdi8x4bIhBQAh+QQFCgACACwXABEADAADAAACBYyPqcsFACH5BAUKAAIALBUAFQAKAAsAAAITlGKZwWoMHYxqtmplxlNT7ixGAQAh+QQFCgACACwQABgABAALAAACBYyPqctcACH5BAUKAAIALAUAFQAKAAsAAAIVlC+BGL3Z3IlxUmUuhtR2LzHhsiEFACH5BAUKAAIALAEAEQAMAAMAAAIFjI+pywUAIfkEBQoAAgAsBQAFAAoACwAAAhOUYJnAagwdjGq2amXGU1PuLEYBACH5BAUKAAIALBAAAgAEAAsAAAIFhI+py1wAIfkEBQoAAgAsFQAFAAoACwAAAhWUL4AIvdnciXFSZS6G1HYvMeGyIQUAIfkEBQoAAgAsFwARAAwAAwAAAgWEj6nLBQAh+QQFCgACACwVABUACgALAAACE5RgmcBqDB2MarZqZcZTU+4sRgEAIfkEBQoAAgAsEAAYAAQACwAAAgWEj6nLXAAh+QQFCgACACwFABUACgALAAACFZQvgAi92dyJcVJlLobUdi8x4bIhBQAh+QQFCgACACwBABEADAADAAACBYSPqcsFADs="},"138e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",{staticClass:"sx"},[a("Form",{ref:"formData",attrs:{model:t.formData,inline:""}},[a("Row",[a("Col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("FormItem",{attrs:{label:"产品名称","label-position":"top","label-width":80}},[a("Input",{attrs:{placeholder:"请输入产品名称"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1),a("Col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("FormItem",{attrs:{label:"类型：","label-position":"top","label-width":80}},[a("RadioGroup",{model:{value:t.formData.isFinished,callback:function(e){t.$set(t.formData,"isFinished",e)},expression:"formData.isFinished"}},[a("Radio",{attrs:{label:0}},[t._v("全部")]),a("Radio",{attrs:{label:2}},[t._v("半成品")]),a("Radio",{attrs:{label:1}},[t._v("成品")])],1)],1)],1)],1),a("Row",[a("FormItem",{attrs:{label:"","label-position":"top","label-width":80}},[a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),a("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"default"},on:{click:function(e){return t.clear("formData")}}},[t._v("重置")])],1)],1)],1)],1),a("Card",[a("div",{staticStyle:{display:"flex","margin-bottom":"10px"}},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.show({},"add")}}},[t._v("新增")]),a("Button",{staticStyle:{"margin-left":"5px"},on:{click:t.delBetch}},[t._v("批量删除")])],1),a("Table",{attrs:{loading:t.loading,stripe:"",columns:t.tableColumns,data:t.tableData},on:{"on-selection-change":t.selectItem}}),a("div",{staticStyle:{margin:"10px 0",overflow:"hidden","line-height":"32px"}},[a("div",{staticStyle:{float:"left"}},[a("span",[t._v("共 "+t._s(t.pageination.count)+" 条记录")]),a("span",{staticStyle:{"margin-left":"5px"}},[t._v("第"+t._s(t.pageination.page)+"页")])]),a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:Number(t.pageination.count),"page-size":Number(t.pageination.pageSize),current:Number(t.pageination.page)},on:{"on-change":t.changePage}})],1)])],1),a("addProduct",{ref:"Drawer",on:{getData:t.getData}}),a("productMateriel",{ref:"productMateriel"})],1)},n=[],o=(a("8e6e"),a("456d"),a("bd86")),r=(a("ac6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,title:(t.formData.id?"编辑":"新增")+(1==t.formData.type?"产品":"物料"),width:1e3},on:{"on-cancel":function(e){return t.handleReset("formData")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.loading?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),a("Form",{ref:"formData",attrs:{"label-width":130,model:t.formData,rules:t.ruleInline}},[a("Row",[a("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v(t._s(1==t.formData.type?"产品":"物料")+"信息")]),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:(1==t.formData.type?"产品":"物料")+"名称","label-position":"top",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入"+(1==t.formData.type?"产品":"物料")+"名称"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"编号","label-position":"top",prop:"number"}},[a("Input",{attrs:{placeholder:"请输入编号"},model:{value:t.formData.number,callback:function(e){t.$set(t.formData,"number",e)},expression:"formData.number"}})],1)],1),1==t.formData.type?a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"产品类型","label-position":"top",prop:"isFinished"}},[a("RadioGroup",{on:{"on-change":function(){t.formData.materialList=[]}},model:{value:t.formData.isFinished,callback:function(e){t.$set(t.formData,"isFinished",e)},expression:"formData.isFinished"}},[a("Radio",{attrs:{label:1}},[t._v("成品")]),a("Radio",{attrs:{label:2}},[t._v("半成品")])],1)],1)],1):t._e(),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"单位","label-position":"top",prop:"unit"}},[a("Input",{attrs:{placeholder:"请输入单位",maxlength:11},model:{value:t.formData.unit,callback:function(e){t.$set(t.formData,"unit",e)},expression:"formData.unit"}})],1)],1),2==t.formData.type?a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"参数","label-position":"top",prop:"unit"}},[a("Input",{attrs:{placeholder:"请输入参数",maxlength:11},model:{value:t.formData.parameter,callback:function(e){t.$set(t.formData,"parameter",e)},expression:"formData.parameter"}})],1)],1):t._e(),2==t.formData.type?a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"体积","label-position":"top",prop:"unit"}},[a("Input",{attrs:{placeholder:"请输入体积",maxlength:11},model:{value:t.formData.volume,callback:function(e){t.$set(t.formData,"volume",e)},expression:"formData.volume"}})],1)],1):t._e(),2==t.formData.type?a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"重量","label-position":"top",prop:"unit"}},[a("Input",{attrs:{placeholder:"请输入重量",maxlength:11},model:{value:t.formData.weight,callback:function(e){t.$set(t.formData,"weight",e)},expression:"formData.weight"}})],1)],1):t._e(),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"备注","label-position":"top"}},[a("Input",{attrs:{maxlength:"300",type:"textarea",rows:4},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],1)],1),2==t.formData.type?a("Row",[a("Col",[a("FormItem",{attrs:{label:"图片","label-position":"top"}},[a("uploadImg",{attrs:{picArr:{pic:t.formData.pic||"",picName:t.formData.pic||""}},on:{uploadSuccess:t.handleSuccess}}),a("div",{staticStyle:{color:"#bbb"}},[t._v("建议尺寸：200*200px")])],1)],1)],1):t._e(),1==t.formData.type?a("Row",[a("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("关联"+t._s(1==t.formData.isFinished?"半成品":"物料")+"\n        "),a("div",{staticClass:"choose",on:{click:function(e){return t.$refs.chooseMateriel.loadData(1==t.formData.isFinished?2:"",1==t.formData.isFinished?1:2)}}},[a("a",[t._v("选择"+t._s(1==t.formData.isFinished?"半成品":"物料")+"···")])])]),a("Col",[a("Table",{staticStyle:{margin:"10px 0"},attrs:{columns:t.columns,data:t.formData.materialList,border:"","show-summary":"","min-height":"200"}})],1)],1):t._e()],1),a("template",{slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formData")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.isSubmit},on:{click:function(e){return t.handleSubmit("formData")}}},[t._v("确定")])],1),a("chooseMateriel",{ref:"chooseMateriel",on:{handleChoose:t.handleChoose}})],2)}),s=[],l=(a("7f7f"),a("c5f6"),a("d9e1")),c=a("c4c8"),d=a("40cb");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={components:{chooseMateriel:l["a"],uploadImg:d["a"]},props:{},data:function(){var t=this;this.$createElement;return{loading:!1,showModal:!1,formData:{id:"",name:"",number:"",unit:"",isFinished:1,describe:"",materialList:[],type:"",weight:"",volume:"",parameter:"",pic:""},ruleInline:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}],number:[{required:!0,message:"编号不能为空",trigger:"blur"}]},isSubmit:!1,columns:[{title:"名称",key:"name",minWidth:100},{title:"单位",key:"unit",minWidth:50},{title:"所需数量",minWidth:100,align:"center",key:"num",render:function(e,a){return e("Input",{props:{size:"small",value:a.row.num,type:"number",min:0},on:{"on-blur":function(e){var i=Number(e.target.value);e.target.value=i,a.row.num=i,t.formData.materialList[a.index]=a.row}}})}},{title:"操作",key:"action",minWidth:80,align:"center",render:function(e,a){return e("Icon",{attrs:{type:"md-close-circle",size:"19",title:"删除"},on:{click:function(){t.delMateriel(a.index)}}})}}]}},computed:{},watch:{},methods:{handleReset:function(t){for(var e in this.showModal=!1,this.isSubmit=!1,this.formData)switch(e){case"isFinished":this.formData[e]=1;break;case"materialList":this.formData[e]=[];break;default:this.formData[e]="";break}this.$refs[t].resetFields()},handleSubmit:function(t){var e=this;this.isSubmit||this.$refs[t].validate((function(a){a?(e.isSubmit=!0,Object(c["d"])(m({},e.formData)).then((function(a){0===a.ret?(e.$Message.success("保存成功！"),e.$emit("getData"),e.handleReset(t)):e.$Message.error(a.msg||"接口错误")})).catch((function(t){e.isSubmit=!1,console.log(t)}))):e.$Message.error("表单验证失败!")}))},getInfo:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(console.log(a,"---------"),console.log(t),this.showModal=!0,!t)return this.formData.isFinished=1,void(this.formData.type=a);this.loading=!0,Object(c["b"])({id:t}).then((function(t){0===t.ret&&(e.formData=t.data.info,e.loading=!1)}))},handleChoose:function(t){var e=this,a=this.formData.materialList||[],i=[];console.log(11111),a.forEach((function(t){i.push(t.materialId+"")})),console.log(2222),t.forEach((function(t){var n={};-1===i.indexOf(t.id+"")&&(n.num=1,n.materialId=t.id,n.name=t.name,n.unit=t.unit,n.id="",n.goodsId=e.formData.id,a.push(n))})),console.log(this.formData),this.formData.materialList=a},delMateriel:function(t){this.formData.materialList.splice(t,1)},handleSuccess:function(t){this.formData.pic=t.pic}},mounted:function(){},beforeDestroy:function(){},created:function(){}},f=p,h=(a("ade6"),a("2877")),g=Object(h["a"])(f,r,s,!1,null,"46cc7c24",null),A=g.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,title:"关联"+(1==t.formData.isFinished?"半成品":"物料"),width:1e3},on:{"on-cancel":function(e){return t.handleReset("formData")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.loading?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),a("Row",[a("Col",[a("Table",{staticStyle:{margin:"10px 0"},attrs:{columns:t.columns,data:t.formData.materialList,border:"","show-summary":"","min-height":"200"}})],1)],1),a("template",{slot:"footer"},[a("Button",{on:{click:function(e){return t.handleReset("formData")}}},[t._v("关闭")])],1)],2)},v=[],y={components:{},props:{},data:function(){return{loading:!1,showModal:!1,formData:{materialList:[]},columns:[{title:"名称",key:"name",minWidth:100},{title:"单位",key:"unit",minWidth:50},{title:"所需数量",minWidth:100,key:"num"}]}},computed:{},watch:{},methods:{handleReset:function(t){this.showModal=!1,this.formData.materialList=[]},getInfo:function(t){var e=this;console.log(t),this.showModal=!0,this.loading=!0,Object(c["b"])({id:t}).then((function(t){0===t.ret&&(e.formData=t.data.info,e.loading=!1)}))}},mounted:function(){},beforeDestroy:function(){},created:function(){}},w=y,D=(a("cc90"),Object(h["a"])(w,b,v,!1,null,"0b297a72",null)),I=D.exports;function x(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function C(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?x(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):x(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var k={components:{addProduct:A,productMateriel:I},data:function(){var t=this;return{loading:!0,tableColumns:[{type:"selection",width:60,align:"center"},{title:"产品编号",key:"name",minWidth:100,render:function(e,a){return e("div",[e("a",{props:{type:"primary",size:"small"},style:{marginRight:"5px",width:"100px",height:"20px",display:"block"},on:{click:function(){t.show(a.row,"edit")}}},a.row.number)])}},{title:"产品名称",minWidth:100,key:"name"},{title:"产品类型",key:"isFinished",minWidth:100,render:function(t,e){return t("div",1==e.row.isFinished?"成品":"半成品")}},{title:"单位",minWidth:60,key:"unit"},{title:"数量（库存）",minWidth:100,key:"stock"},{title:"操作",key:"action",minWidth:100,render:function(e,a){return e("div",[e("Button",{props:{size:"small",type:"primary"},style:{marginRight:"5px"},on:{click:function(){t.$refs.productMateriel.getInfo(a.row.id)}}},"物料详情"),e("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.del(a.row.id)}}},"删除")])}}],tableData:[],pageination:{page:1,pageSize:2,count:1},page:1,staffData:[],formData:{name:"",isFinished:0},selectIds:[]}},created:function(){this.getData()},methods:{selectItem:function(t){var e=this;this.selectIds=[],t.forEach((function(t){e.selectIds.push(t.id)}))},delBetch:function(){this.selectIds.length<1?this.$Message.error("请选择要操作的数据"):this.del(this.selectIds)},del:function(t){var e=this;console.log(1111),this.$Modal.confirm({title:"删除",content:"<p>确定删除该产品？</p>",onOk:function(){Object(c["a"])({id:t}).then((function(t){0===t.ret?(e.$Message.success("删除成功"),e.getData()):e.$Message.error(t.msg)}))},onCancel:function(){}})},search:function(){this.page=1,this.getData()},clear:function(t){this.page=1,this.formData.name="",this.formData.isFinished=0,this.getData()},getData:function(){var t=this;this.loading=!0,this.selectIds=[],Object(c["c"])(C({page:this.page},this.formData,{type:1})).then((function(e){t.loading=!1,0===e.ret?(console.log("成功"),t.tableData=e.data.list,t.pageination=e.data.pageInfo):t.$Message.error(e.msg||"接口错误")}))},changePage:function(t){this.page=t,this.getData()},show:function(t,e){"add"===e?this.$refs.Drawer.getInfo(""):"edit"===e&&this.$refs.Drawer.getInfo(t.id)}}},F=k,S=(a("991d"),Object(h["a"])(F,i,n,!1,null,"2a62fcdc",null));e["default"]=S.exports},1589:function(t,e,a){},"386d":function(t,e,a){"use strict";var i=a("cb7c"),n=a("83a1"),o=a("5f1b");a("214f")("search",1,(function(t,e,a,r){return[function(a){var i=t(this),n=void 0==a?void 0:a[e];return void 0!==n?n.call(a,i):new RegExp(a)[e](String(i))},function(t){var e=r(a,t,this);if(e.done)return e.value;var s=i(t),l=String(this),c=s.lastIndex;n(c,0)||(s.lastIndex=0);var d=o(s,l);return n(s.lastIndex,c)||(s.lastIndex=c),null===d?-1:d.index}]}))},"40cb":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[""!=t.picArr.picName?i("div",{staticClass:"demo-upload-list"},[[i("img",{attrs:{src:t.demainUrl+t.picArr.pic}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(e){return t.handleView(t.picArr.pic)}}}),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(e){return t.handleRemove(e)}}})],1)]],2):t._e(),i("Upload",{directives:[{name:"show",rawName:"v-show",value:"view"!=t.status&&""==t.picArr.picName,expression:"status!='view' && picArr.picName == ''"}],ref:"upload",staticStyle:{display:"inline-block",width:"100px",height:"100px"},attrs:{name:"img","show-upload-list":!1,"on-success":t.handleSuccess,format:["jpg","jpeg","png","gif"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,type:"drag",action:t.uploadImg}},[i("Modal",{attrs:{title:"图片预览"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.visible?i("img",{staticStyle:{width:"100%"},attrs:{src:t.imgName}}):t._e()]),i("div",{staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[t.loadingImg?t._e():i("Icon",{attrs:{type:"ios-camera",size:"30"}}),t.loadingImg?i("img",{staticStyle:{display:"inline-block",width:"50px",height:"50px","margin-top":"25px"},attrs:{src:a("12ae")}}):t._e()],1)],1)],1)},n=[],o=(a("7f7f"),a("7e1e")),r=a("c276"),s={data:function(){return{loadingImg:!1,picName:"",uploadImg:o["a"],demainUrl:r["a"].cookies.get("domainUrl"),headers:{"Access-Control-Allow-Origin":"*"},visible:!1,imgName:""}},props:{status:{type:String},picArr:{type:Object}},computed:{},methods:{handleSuccess:function(t,e){this.loadingImg=!1,0==t.ret?(this.picArr.picName=t.data.imgUrl,this.picArr.pic=t.data.url,this.$emit("uploadSuccess",this.picArr)):this.$Notice.warning({title:"上传失败",desc:t.msg})},handleBeforeUpload:function(t){this.loadingImg=!0},handleFormatError:function(t){this.loadingImg=!1,this.loadingSmall=!1,this.$Notice.warning({title:"图片格式上传错误",desc:"文件 "+t.name+" 格式错误, 请选择图片格式例jpg,png,gif"})},handleMaxSize:function(t){this.loadingImg=!1,this.loadingSmall=!1,this.$Notice.warning({title:"超出文件大小限制",desc:"文件  "+t.name+"太大, 不能大于2M"})},handleRemove:function(){this.loadingImg=!0,this.$set(this.picArr,"picName",""),this.$set(this.picArr,"pic",""),this.loadingImg=!1,this.$emit("uploadSuccess",this.picArr)},handleView:function(t){this.imgName=this.demainUrl+t,this.visible=!0}},created:function(){},mounted:function(){}},l=s,c=(a("add2"),a("2877")),d=Object(c["a"])(l,i,n,!1,null,"718b7e3e",null);e["a"]=d.exports},5671:function(t,e,a){},"5dbc":function(t,e,a){var i=a("d3f4"),n=a("8b97").set;t.exports=function(t,e,a){var o,r=e.constructor;return r!==a&&"function"==typeof r&&(o=r.prototype)!==a.prototype&&i(o)&&n&&n(t,o),t}},"7e1e":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var i=a("c276"),n=i["a"].cookies.get("token"),o="/upload/images?token="+n},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"8b97":function(t,e,a){var i=a("d3f4"),n=a("cb7c"),o=function(t,e){if(n(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(n){e=!0}return function(t,a){return o(t,a),e?t.__proto__=a:i(t,a),t}}({},!1):void 0),check:o}},"8f7d":function(t,e,a){"use strict";var i=a("5671"),n=a.n(i);n.a},"991d":function(t,e,a){"use strict";var i=a("a990"),n=a.n(i);n.a},a990:function(t,e,a){},aa77:function(t,e,a){var i=a("5ca1"),n=a("be13"),o=a("79e5"),r=a("fdef"),s="["+r+"]",l="​",c=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),u=function(t,e,a){var n={},s=o((function(){return!!r[t]()||l[t]()!=l})),c=n[t]=s?e(m):r[t];a&&(n[a]=c),i(i.P+i.F*s,"String",n)},m=u.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(d,"")),t};t.exports=u},add2:function(t,e,a){"use strict";var i=a("d723"),n=a.n(i);n.a},ade6:function(t,e,a){"use strict";var i=a("bc94"),n=a.n(i);n.a},bc94:function(t,e,a){},c4c8:function(t,e,a){"use strict";a.d(e,"c",(function(){return s})),a.d(e,"b",(function(){return l})),a.d(e,"d",(function(){return c})),a.d(e,"a",(function(){return d}));var i=a("c276"),n=a("b6bd"),o=i["a"].cookies.get("token"),r=a("4328");function s(t){return Object(n["a"])({url:"/goods/manage/list?token="+o,method:"post",data:r.stringify(t)})}function l(t){return Object(n["a"])({url:"/goods/manage/info?token="+o,method:"post",data:t})}function c(t){return Object(n["a"])({url:"/goods/manage/save?token="+o,method:"post",data:t})}function d(t){return Object(n["a"])({url:"/goods/manage/del?token="+o,method:"post",data:t})}},c5f6:function(t,e,a){"use strict";var i=a("7726"),n=a("69a8"),o=a("2d95"),r=a("5dbc"),s=a("6a99"),l=a("79e5"),c=a("9093").f,d=a("11e9").f,u=a("86cc").f,m=a("aa77").trim,p="Number",f=i[p],h=f,g=f.prototype,A=o(a("2aeb")(g))==p,b="trim"in String.prototype,v=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():m(e,3);var a,i,n,o=e.charCodeAt(0);if(43===o||45===o){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+e}for(var r,l=e.slice(2),c=0,d=l.length;c<d;c++)if(r=l.charCodeAt(c),r<48||r>n)return NaN;return parseInt(l,i)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof f&&(A?l((function(){g.valueOf.call(a)})):o(a)!=p)?r(new h(v(e)),a,f):v(e)};for(var y,w=a("9e1e")?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),D=0;w.length>D;D++)n(h,y=w[D])&&!n(f,y)&&u(f,y,d(h,y));f.prototype=g,g.constructor=f,a("2aba")(i,p,f)}},cc90:function(t,e,a){"use strict";var i=a("1589"),n=a.n(i);n.a},d723:function(t,e,a){},d9e1:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,title:"选择"+(2==t.type?"物料":2==t.isFinished?"半成品":"产品"),width:1e3},on:{"on-cancel":function(e){return t.handleReset("formValidate")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"choose-class",class:t.isMobile?"":"wrapper"},[a("Card",{class:t.isMobile?"":"right-content"},[a("Form",{ref:"formCustom",attrs:{"label-width":100}},[a("Row",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{xs:24,md:12,lg:12}},[a("Input",{staticStyle:{width:"95%"},attrs:{type:"text",placeholder:"请输入"+(2==t.type?"物料":2==t.isFinished?"半成品":"产品")+"名称",clearabl:""},model:{value:t.searchValidate.name,callback:function(e){t.$set(t.searchValidate,"name",e)},expression:"searchValidate.name"}})],1),a("Col",{attrs:{xs:24,md:12,lg:12}},[a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),a("Button",{staticClass:"ivu-ml-8",on:{click:t.resetSearch}},[t._v("重置")]),t.showMore||1!=t.type||t.isFinished?t._e():a("a",{staticClass:"ivu-ml-8",attrs:{type:"text"},on:{click:function(e){t.showMore=!t.showMore}}},[t._v("\n              展开\n              "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),t.showMore?a("a",{staticClass:"ivu-ml-8",attrs:{type:"text"},on:{click:function(e){t.showMore=!t.showMore}}},[t._v("\n              收起\n              "),a("Icon",{attrs:{type:"ios-arrow-up"}})],1):t._e()],1)],1),t.showMore?a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{xs:24,md:12,lg:12}},[a("FormItem",{attrs:{label:"产品类型：","label-position":"top","label-width":90}},[a("RadioGroup",{model:{value:t.searchValidate.isFinished,callback:function(e){t.$set(t.searchValidate,"isFinished",e)},expression:"searchValidate.isFinished"}},[a("Radio",{attrs:{label:0}},[t._v("全部")]),a("Radio",{attrs:{label:2}},[t._v("半成品")]),a("Radio",{attrs:{label:1}},[t._v("成品")])],1)],1)],1)],1):t._e()],1),a("div",[a("div",[a("Table",{ref:"tableData",attrs:{columns:t.columns,data:t.data,loading:t.loading},on:{"on-selection-change":t.changeSelect}})],1),a("div",{staticClass:"ivu-mt ivu-text-center"},[a("Page",{attrs:{"page-size":t.pageInfo.pageSize,total:Number(t.pageInfo.count),current:t.pageInfo.page},on:{"on-change":t.changePage}})],1)])],1),t.isMobile?t._e():a("Card",{staticClass:"left-content"},[a("div",{staticClass:"ivu-mt",attrs:{slot:"title"},slot:"title"},[a("Alert",[a("Icon",{staticClass:"ivu-mr-8",attrs:{color:"#2d8cf0",type:"ios-alert"}}),t._v("\n          已选择 "+t._s(t.selectedArr.length)+" 项\n          "),a("a",{staticClass:"ivu-ml-8",on:{click:t.clearSelectd}},[t._v("清空")])],1)],1),a("List",{attrs:{border:""}},[a("Scroll",{staticStyle:{flex:"1"},attrs:{height:415}},t._l(t.selectedArr,(function(e,i){return a("ListItem",{key:i},[a("ListItemMeta",{attrs:{avatar:"",title:e.name,description:""}}),a("template",{slot:"action"},[a("li",{on:{click:function(e){return t.delClass(i)}}},[a("Icon",{attrs:{type:"md-close-circle",size:"19"}})],1)])],2)})),1)],1)],1)],1),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)])},n=[],o=(a("8e6e"),a("456d"),a("386d"),a("ac6a"),a("bd86")),r=a("c4c8"),s=a("2f08"),l=a("2f62");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u={name:"chooseMateriel",components:{iCopyright:s["a"]},props:{modal:{type:Boolean,default:!1},selected:{type:Array,default:function(){return[]}}},data:function(){return{columns:[{type:"selection",minWidth:50},{title:"名称",minWidth:100,key:"name"},{title:"单位",key:"unit",minWidth:100},{title:"库存",key:"stock",minWidth:100}],data:[],searchValidate:{name:"",isFinished:0,type:""},showModal:!1,selectedArr:[],showMore:!1,pageInfo:{pageSize:10,page:1,pageSum:0,count:0},type:"",isFinished:"",loading:!0}},computed:d({},Object(l["e"])("admin/layout",["isMobile"])),watch:{},methods:{changeSelect:function(t){var e=this;this.selectedArr=[],t.forEach((function(t){e.selectedArr.push(t)}))},clearSelectd:function(){this.$refs.tableData.selectAll(!1),this.selectedArr=[]},handleReset:function(t){this.showModal=!1,this.$emit("hideModal")},handleSubmit:function(t){this.showModal=!1,this.$emit("handleChoose",this.selectedArr)},delClass:function(t){var e=this,a="";this.data.some((function(i,n){i.id===e.selectedArr[t].id&&(a=n)})),this.$refs.tableData.toggleSelect(a)},resetSearch:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.searchValidate={name:"",isFinished:this.isFinished,type:this.type},this.getData()},search:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},changePage:function(t){this.pageInfo.page=t,this.getData()},getData:function(){var t=this;this.loading=!0,this.data=[],Object(r["c"])(d({},this.pageInfo,{},this.searchValidate)).then((function(e){t.loading=!1,t.data=e.data.list,t.pageInfo=e.data.pageInfo}))},loadData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;console.log(111111111111),2==e?(this.isFinished="",this.type=2):(this.isFinished=t||0,this.type=1),this.searchValidate.isFinished=this.isFinished,this.searchValidate.type=this.type,this.searchValidate.name="",this.showModal=!0,this.selectedArr=[],this.search()}},mounted:function(){},beforeDestroy:function(){},created:function(){}},m=u,p=(a("8f7d"),a("2877")),f=Object(p["a"])(m,i,n,!1,null,"77a3ce5e",null);e["a"]=f.exports},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);