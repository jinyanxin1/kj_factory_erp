(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["personnelManagement"],{"0384":function(t,e,a){},"05d0":function(t,e,a){},"0617":function(t,e,a){"use strict";var n=a("1fd5"),i=a.n(n);i.a},"10b4":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Drawer",{attrs:{title:"修改权限",width:"820","mask-closable":!1,styles:t.styles},on:{"on-close":function(e){return t.cancel("formatData")}},model:{value:t.showAdd,callback:function(e){t.showAdd=e},expression:"showAdd"}},[t.loading?t._e():a("Tree",{ref:"listTree",attrs:{data:t.treeList,"show-checkbox":""},on:{"on-check-change":t.selectValue}}),t.loading?a("div",[a("Spin",{attrs:{size:"large"}})],1):t._e(),a("div",{staticClass:"demo-drawer-footer"},[a("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.cancel("formatData")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.btLoding},on:{click:function(e){return t.handleSubmit("formatData")}}},[t._v("确定")])],1)],1)],1)},i=[],o=a("580a"),r={name:"addContractor",data:function(){return{loading:!0,editData:{groupName:""},twoList:[],btLoding:!1,headers:{"Access-Control-Allow-Origin":"*"},showAdd:!1,styles:{height:"calc(100% - 55px)",overflow:"auto",paddingBottom:"53px",position:"static"},checkFormData:{groupName:[{required:!0,message:"角色名称不能为空",trigger:"blur"}]},groupId:"",treeList:[],type:2}},watch:{},props:{erTitle:{type:String}},methods:{selectValue:function(t){var e=[];e=this.$refs.listTree.getCheckedAndIndeterminateNodes();var a=function t(a){for(var n=0;n<a.length;n++){a[n].isChecked=!1;for(var i=0;i<e.length;i++)e[i].menuId==a[n].menuId&&(a[n].isChecked=!0);a[n].children&&a[n].children.length>0&&t(a[n].children)}};a(this.treeList)},DrawerToShow:function(t){this.type=t,this.showAdd=!0},handleSubmit:function(t){var e=this;Object(o["f"])({groupId:this.groupId,list:this.treeList,type:this.type}).then((function(t){e.$Message.success("保存成功"),e.showAdd=!1,e.$emit("callback")}))},cancel:function(t){this.showAdd=!1},loadData:function(t){console.log(t),this.groupId=t.value,this.editData.groupId=t.value||"",this.editData.groupName=t.groupName||"",this.getTreeList()},showHide:function(t){t.expand=!t.expand},changeCheck:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]},getTreeList:function(){var t=this;this.loading=!0,Object(o["e"])({groupId:this.groupId,type:this.type}).then((function(e){t.treeList=e.data.list,t.loading=!1}))}},created:function(){},mounted:function(){}},s=r,l=(a("e323"),a("2877")),c=Object(l["a"])(s,n,i,!1,null,null,null),d=c.exports;e["a"]=d},1102:function(t,e,a){"use strict";var n=a("0384"),i=a.n(n);i.a},"16e6":function(t,e,a){"use strict";var n=a("a7e5"),i=a.n(n);i.a},"181c":function(t,e,a){"use strict";var n=a("81c7"),i=a.n(n);i.a},"1c79":function(t,e,a){"use strict";var n=a("d9a3"),i=a.n(n);i.a},"1fd5":function(t,e,a){},"22bf":function(t,e,a){},"2c17c":function(t,e,a){"use strict";var n=a("b8b5"),i=a.n(n);i.a},"2f21":function(t,e,a){"use strict";var n=a("79e5");t.exports=function(t,e){return!!t&&n((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"31d7":function(t,e,a){},3298:function(t,e,a){},"3b2b":function(t,e,a){var n=a("7726"),i=a("5dbc"),o=a("86cc").f,r=a("9093").f,s=a("aae3"),l=a("0bfb"),c=n.RegExp,d=c,m=c.prototype,u=/a/g,f=/a/g,p=new c(u)!==u;if(a("9e1e")&&(!p||a("79e5")((function(){return f[a("2b4c")("match")]=!1,c(u)!=u||c(f)==f||"/a/i"!=c(u,"i")})))){c=function(t,e){var a=this instanceof c,n=s(t),o=void 0===e;return!a&&n&&t.constructor===c&&o?t:i(p?new d(n&&!o?t.source:t,e):d((n=t instanceof c)?t.source:t,n&&o?l.call(t):e),a?this:m,c)};for(var h=function(t){t in c||o(c,t,{configurable:!0,get:function(){return d[t]},set:function(e){d[t]=e}})},b=r(d),g=0;b.length>g;)h(b[g++]);m.constructor=c,c.prototype=m,a("2aba")(n,"RegExp",c)}a("7a56")("RegExp")},"3b37":function(t,e,a){},4156:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("div",{staticStyle:{display:"flex","margin-bottom":"10px"}},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.show({},"add")}}},[t._v("新增")])],1),a("tree-table",{staticStyle:{"font-size":"14px"},attrs:{loading:t.loading,"expand-key":"title","expand-type":!1,selectable:!1,columns:t.columns,data:t.tableData},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.row;return[a("Icon",{staticClass:"margin-right-20",attrs:{size:"20",type:"md-add"},on:{click:function(e){return t.show({},"add")}}}),a("Icon",{staticClass:"margin-right-20",attrs:{size:"20",type:"md-create"},on:{click:function(e){return t.show(n,"edit")}}}),a("Icon",{staticClass:"margin-right-20",attrs:{size:"20",type:"ios-trash"},on:{click:function(e){return t.onDelete(n,"")}}})]}}])})],1),a("addOrganization",{ref:"Drawer",attrs:{erTitle:t.erTitle,status:t.status},on:{getList:t.getList}})],1)},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,title:t.erTitle+"组织",width:600},on:{"on-cancel":function(e){return t.handleReset("formData")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{ref:"formData",attrs:{"label-width":130,model:t.formData,rules:t.ruleInline}},[a("FormItem",{attrs:{label:"组织名称","label-position":"top",prop:"name"}},[a("Input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("FormItem",{attrs:{label:"组织代码","label-position":"top",prop:"code"}},[a("Input",{model:{value:t.formData.code,callback:function(e){t.$set(t.formData,"code",e)},expression:"formData.code"}})],1),a("FormItem",{attrs:{label:"组织简称","label-position":"top",prop:"abbreviation"}},[a("Input",{model:{value:t.formData.abbreviation,callback:function(e){t.$set(t.formData,"abbreviation",e)},expression:"formData.abbreviation"}})],1),a("FormItem",{attrs:{label:"组织类型","label-position":"top",prop:"isCompany"}},[a("Select",{model:{value:t.formData.isCompany,callback:function(e){t.$set(t.formData,"isCompany",e)},expression:"formData.isCompany"}},[a("Option",{attrs:{value:"0"}},[t._v("部门")]),a("Option",{attrs:{value:"1"}},[t._v("公司")])],1)],1),a("FormItem",{attrs:{label:"上级组织","label-position":"top"}},[a("Cascader",{attrs:{data:t.organizationList,"change-on-select":""},on:{"on-change":t.change}})],1),a("FormItem",{attrs:{label:"组织负责人","label-position":"top",prop:"staffId"}},[a("Select",{attrs:{filterable:""},model:{value:t.formData.staffId,callback:function(e){t.$set(t.formData,"staffId",e)},expression:"formData.staffId"}},t._l(t.staffList,(function(e,n){return a("Option",{key:n,attrs:{value:n}},[t._v(t._s(e))])})),1)],1),a("FormItem",{attrs:{label:"启用日期","label-position":"top",prop:"startTime"}},[a("Date-picker",{attrs:{value:t.formData.startTime,type:"date",placeholder:"选择日期"},on:{"on-change":function(e){t.formData.startTime=e}}})],1)],1),a("template",{slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formData")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formData")}}},[t._v("确定")])],1)],2)},r=[],s=(a("7f7f"),a("580a")),l={components:{},props:{erTitle:String,status:String},data:function(){return{loading:!0,sectionList:[],showModal:!1,formData:{name:"",startTime:""},staffList:{},organizationList:[],ruleInline:{name:[{required:!0,message:"请填写组织名称",trigger:"blur"}]}}},computed:{},watch:{},methods:{getDetail:function(t){var e=this;console.log(t,"id"),Object(s["p"])({sectionId:t}).then((function(t){e.formData=t.data}))},getList:function(){var t=this;this.loading=!0,Object(s["q"])().then((function(e){if(t.loading=!1,0===e.ret){var a=e.data.list;t.organizationList=a.map((function(t,e){return{value:t.sectionId,label:t.title,children:t.children.map((function(t){return{value:t.sectionId,label:t.title}}))}}))}else t.$Message.error(e.msg||"接口错误")}))},getStaff:function(){var t=this;Object(s["A"])().then((function(e){t.staffList=e.data.select}))},DrawerToShow:function(t){this.getStaff(),this.getList(),this.showModal=!0,this.loading=!0},handleReset:function(t){this.showModal=!1,this.organizationList=[],this.formData.parentId="",this.$refs[t].resetFields()},handleSubmit:function(t){var e=this;"add"===this.status?this.$refs[t].validate((function(a){a?Object(s["c"])(e.formData).then((function(a){e.$Message.success("保存成功！"),e.showModal=!1,e.$emit("getList"),e.organizationList=[],e.formData.parentId="",e.$refs[t].resetFields()})):e.$Message.error("表单验证失败!")})):this.$refs[t].validate((function(a){a?Object(s["o"])(e.formData).then((function(a){e.$Message.success("修改成功！"),e.showModal=!1,e.$emit("getList"),e.organizationList=[],e.formData.parentId="",e.$refs[t].resetFields()})):e.$Message.error("表单验证失败!")}))},change:function(t){var e=t.length-1;this.formData.parentId=t[e],console.log(t,"9999999")}},mounted:function(){},beforeDestroy:function(){},created:function(){}},c=l,d=(a("1c79"),a("2877")),m=Object(d["a"])(c,o,r,!1,null,"4d2bf3e6",null),u=m.exports,f={components:{addOrganization:u},data:function(){return{loading:!0,erTitle:"",status:"",curRow:{},formItem:"",userTypeList:[],columns:[{title:"组织名称",key:"title",minWidth:"250px"},{title:"职工数",key:"num"},{title:"组织类型",key:"company"},{title:"负责人",key:"staff"},{title:"操作",minWidth:"200px",type:"template",template:"action"}],tableData:[],pageination:{page:1,pageSize:2,count:1},page:1,userStatusList:[]}},created:function(){this.getList()},methods:{search:function(){this.getList()},clear:function(){this.userName="",this.userType="",this.userTel="",this.getList()},getList:function(){var t=this;this.loading=!0,Object(s["q"])().then((function(e){t.loading=!1,0===e.ret?t.tableData=e.data.list:t.$Message.error(e.data.msg||"接口错误")}))},changePage:function(t){this.page=t,this.getList()},show:function(t,e){this.status=e,"add"===e?this.erTitle="新增":"edit"===e&&(this.erTitle="编辑",this.$refs.Drawer.getDetail(t.sectionId)),this.$refs.Drawer.DrawerToShow()},onDelete:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"<p>确认删除</p>",onOk:function(){Object(s["i"])({sectionId:t.sectionId}).then((function(t){0===t.ret?(e.$Message.success("删除成功"),e.getList()):e.$Message.error(t.msg)}))},onCancel:function(){}})}}},p=f,h=(a("716c"),Object(d["a"])(p,n,i,!1,null,"60bbf4d0",null));e["default"]=h.exports},4759:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Cascader",{attrs:{data:t.list,value:t.newArr,"change-on-select":""},on:{"update:value":function(e){t.newArr=e},"on-change":t.change}})],1)},i=[],o=a("9411"),r={components:{},props:{ids:Array},data:function(){return{showModal:!1,list:[],newArr:[]}},computed:{},watch:{ids:function(t){this.newArr=t}},methods:{change:function(t){this.$emit("change",t),console.log(t,"department")},getList:function(){var t=this;Object(o["E"])().then((function(e){var a=e.data.list;t.list=a.map((function(t,e){return{value:t.sectionId,label:t.title,children:t.children.map((function(t){return{value:t.sectionId,label:t.title,children:t.children.map((function(t){return{value:t.sectionId,label:t.title}}))}}))}})),sessionStorage.setItem("departMentList",JSON.stringify(t.list))}))}},mounted:function(){},beforeDestroy:function(){},created:function(){JSON.parse(sessionStorage.getItem("departMentList"))?this.list=JSON.parse(sessionStorage.getItem("departMentList")):this.getList()}},s=r,l=a("2877"),c=Object(l["a"])(s,n,i,!1,null,"689f859a",null);e["a"]=c.exports},"4b0e":function(t,e,a){},"4fdf":function(t,e,a){"use strict";var n=a("f264"),i=a.n(n);i.a},"55dd":function(t,e,a){"use strict";var n=a("5ca1"),i=a("d8e8"),o=a("4bf8"),r=a("79e5"),s=[].sort,l=[1,2,3];n(n.P+n.F*(r((function(){l.sort(void 0)}))||!r((function(){l.sort(null)}))||!a("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},"59a3":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,title:"选择成员",width:600},on:{"on-cancel":function(e){return t.handleReset()}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Card",[t.loading?t._e():a("Tree",{attrs:{data:t.treeDataList,"show-checkbox":"",render:t.renderContent},on:{"on-check-change":t.changeSelect}}),t.loading?a("div",[a("Spin",{attrs:{size:"large"}})],1):t._e()],1),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("Form",{attrs:{inline:""}},[a("FormItem",{attrs:{label:""}},[a("Icon",{attrs:{type:"ios-folder-outline"}}),t._v("校区\n            ")],1),a("FormItem",{attrs:{label:""}},[a("Icon",{attrs:{type:"ios-paper-outline"}}),t._v("部门\n            ")],1)],1),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit()}}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v("取消")])],1)],1)},i=[],o=(a("c5f6"),a("580a")),r={components:{},props:{},data:function(){return{loading:!0,treeDataList:[],showModal:!1,selectedArr:[],sectionList:[]}},computed:{},watch:{},methods:{DrawerToShow:function(){var t=this;this.showModal=!0,this.loading=!0,Object(o["listType"])({type:"campus",status:0}).then((function(e){t.treeDataList=e.data,t.loading=!1}))},resetSearch:function(){},search:function(){},changeSelect:function(t){console.log(t),this.selectedArr=t},handleReset:function(){this.showModal=!1},handleSubmit:function(){this.showModal=!1,this.$emit("handleChoose",this.selectedArr)},renderContent:function(t,e){var a,n=this,i=(e.root,e.node,e.data);return a=1===Number(i.isCampus)?t("span",{on:{click:function(){i.expand?n.$set(i,"expand",!1):n.$set(i,"expand",!0)}}},[t("Icon",{props:{type:"ios-folder-outline"},style:{marginRight:"8px",cursor:"pointer"}}),t("span",{style:{cursor:"pointer"}},i.title)]):0===Number(i.isCampus)?t("span",{on:{click:function(){i.expand?n.$set(i,"expand",!1):n.$set(i,"expand",!0)}}},[t("Icon",{props:{type:"ios-paper-outline"},style:{marginRight:"8px",cursor:"pointer"}}),t("span",{style:{cursor:"pointer"}},i.title)]):t("span",[t("span",{style:{},on:{click:function(){}}},i.title)]),a}},mounted:function(){},beforeDestroy:function(){},created:function(){}},s=r,l=(a("2c17c"),a("2877")),c=Object(l["a"])(s,n,i,!1,null,"64098e24",null),d=c.exports;e["a"]=d},"5dbc":function(t,e,a){var n=a("d3f4"),i=a("8b97").set;t.exports=function(t,e,a){var o,r=e.constructor;return r!==a&&"function"==typeof r&&(o=r.prototype)!==a.prototype&&n(o)&&i&&i(t,o),t}},"684d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{"class-name":"vertical-center-modal","mask-closable":!1,"footer-hide":!0,width:600,title:"add"===t.mode?"新增":"编辑权限组"},on:{"on-cancel":function(e){return t.cancel("formValidate")}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Form",{ref:"formValidate",staticClass:"ivu-mb-8",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"组名",prop:"groupName"}},[a("Input",{model:{value:t.formValidate.groupName,callback:function(e){t.$set(t.formValidate,"groupName","string"===typeof e?e.trim():e)},expression:"formValidate.groupName"}})],1),a("FormItem",{attrs:{label:"说明",prop:"describe"}},[a("Input",{model:{value:t.formValidate.describe,callback:function(e){t.$set(t.formValidate,"describe",e)},expression:"formValidate.describe"}})],1)],1),a("div",{staticClass:"ivu-mt ivu-text-right"},[a("Button",{on:{click:function(e){return t.cancel("formValidate")}}},[t._v("取消")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)],1)],1)},i=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=(a("7f7f"),a("4b0e"),a("580a"));function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var c={props:{},data:function(){return{formValidate:{groupName:"",describe:"",role:[]},ruleValidate:{groupName:[{required:!0,message:"请填写组名",trigger:"blur"},{type:"string",max:20,message:"组名最长20个字符",trigger:"blur"}],describe:[{type:"string",max:20,message:"说明最长20个字符",trigger:"blur"}]},modal:!1,mode:"add"}},computed:{},methods:{DrawerToShow:function(t,e,a){this.mode=t,this.formValidate=e?{groupId:e.groupId,groupName:e.groupName,describe:e.describe,role:e.role,type:a}:{groupName:"",describe:"",role:[],type:a},this.$refs["formValidate"].resetFields(),this.modal=!0},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t&&("add"===e.mode?Object(r["a"])(l({},e.formValidate)).then((function(t){e.modal=!1,e.$emit("onSubmit"),e.$Message.success("新增成功")})):Object(r["j"])(l({},e.formValidate)).then((function(t){e.modal=!1,e.$emit("onSubmit"),e.$Message.success("修改成功")})))}))},cancel:function(t){this.modal=!1,this.$refs[t].resetFields()},handleReset:function(t){this.$refs[t].resetFields()}},mounted:function(){},watch:{}},d=c,m=a("2877"),u=Object(m["a"])(d,n,i,!1,null,null,null),f=u.exports;e["a"]=f},"6db6":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",{staticClass:"sx"},[a("Form",{ref:"formData",attrs:{model:t.formData,inline:""}},[a("Row",[a("Col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"姓名：","label-position":"top","label-width":80}},[a("Input",{attrs:{placeholder:"请输入姓名"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1),a("Col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"手机号：","label-position":"top","label-width":80}},[a("Input",{attrs:{placeholder:"请输入手机号"},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}})],1)],1),a("Col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"岗位：","label-position":"top","label-width":80}},[a("choosePosition",{attrs:{ids:t.formData.positionId},on:{change:t.changeId}})],1)],1),a("Col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"性别：","label-position":"top","label-width":80}},[a("RadioGroup",{model:{value:t.formData.sex,callback:function(e){t.$set(t.formData,"sex",e)},expression:"formData.sex"}},[a("Radio",{attrs:{label:-1}},[t._v("所有")]),a("Radio",{attrs:{label:0}},[t._v("女")]),a("Radio",{attrs:{label:1}},[t._v("男")])],1)],1)],1),a("Col",{attrs:{xs:24,sm:12,md:12,lg:8}},[a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"状态：","label-position":"top","label-width":80}},[a("RadioGroup",{model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[a("Radio",{attrs:{label:-1}},[t._v("所有")]),a("Radio",{attrs:{label:0}},[t._v("在职")]),a("Radio",{attrs:{label:1}},[t._v("离职")])],1)],1)],1)],1),a("Row",[a("FormItem",{attrs:{label:"","label-position":"top","label-width":80}},[a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),a("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"default"},on:{click:function(e){return t.clear("formData")}}},[t._v("重置")])],1)],1)],1)],1),a("Card",[a("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-bottom":"10px"}},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.show({},"add")}}},[t._v("新增")])],1),a("Table",{attrs:{loading:t.loading,stripe:"",columns:t.tableColumns,data:t.tableData},on:{"on-selection-change":t.chooseStaff}}),a("div",{staticStyle:{margin:"10px 0",overflow:"hidden","line-height":"32px"}},[a("div",{staticStyle:{float:"left"}},[a("span",[t._v("共 "+t._s(t.pageination.count)+" 条记录")]),a("span",{staticStyle:{"margin-left":"5px"}},[t._v("第"+t._s(t.pageination.page)+"页")])]),a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:Number(t.pageination.count),"page-size":Number(t.pageination.pageSize),current:Number(t.pageination.page)},on:{"on-change":t.changePage}})],1)])],1),a("addStaff",{ref:"Drawer",on:{getData:t.getData}}),a("staffDetail",{ref:"detail",attrs:{erTitle:t.erTitle},on:{getData:t.getData}}),a("staffLeave",{ref:"leave",attrs:{erTitle:t.erTitle},on:{getData:t.getData}}),a("addAdminUser",{ref:"admin"})],1)},i=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=(a("7f7f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,title:"新增职工",width:1e3},on:{"on-cancel":function(e){return t.handleReset("formData")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{ref:"formData",attrs:{"label-width":130,model:t.formData,rules:t.ruleInline}},[a("Row",[a("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("基本信息")]),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"姓名","label-position":"top",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入姓名"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"性别","label-position":"top",prop:"sex"}},[a("Select",{model:{value:t.formData.sex,callback:function(e){t.$set(t.formData,"sex",e)},expression:"formData.sex"}},[a("Option",{attrs:{value:"0"}},[t._v("女")]),a("Option",{attrs:{value:"1"}},[t._v("男")])],1)],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"手机号","label-position":"top",prop:"phone"}},[a("Input",{attrs:{placeholder:"请输入手机号",maxlength:11},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"岗位","label-position":"top",prop:"positionId"}},[a("choosePosition",{attrs:{ids:t.formData.positionId},on:{change:t.changeId}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"工号","label-position":"top"}},[a("Input",{attrs:{placeholder:"请输入工号"},model:{value:t.formData.jobNumber,callback:function(e){t.$set(t.formData,"jobNumber",e)},expression:"formData.jobNumber"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"部门","label-position":"top"}},[a("chooseDepartMent",{attrs:{ids:t.formData.sectionId},on:{change:t.changeDepartmentId}})],1)],1),a("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("工作信息")]),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"入职日期","label-position":"top",prop:"entryTime"}},[a("Date-picker",{staticStyle:{width:"100%"},attrs:{value:t.formData.entryTime,type:"date",placeholder:"选择日期"},on:{"on-change":function(e){t.formData.entryTime=e}}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"工龄","label-position":"top"}},[a("Input",{attrs:{placeholder:"请输入工龄"},model:{value:t.formData.seniority,callback:function(e){t.$set(t.formData,"seniority",e)},expression:"formData.seniority"}})],1)],1)],1),a("Row",[a("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("个人信息")]),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"身份证号","label-position":"top"}},[a("Input",{attrs:{placeholder:"请输入身份证号"},model:{value:t.formData.idCard,callback:function(e){t.$set(t.formData,"idCard",e)},expression:"formData.idCard"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"出生日期","label-position":"top"}},[a("Date-picker",{staticStyle:{width:"100%"},attrs:{value:t.formData.birthday,type:"date",placeholder:"选择出生日期"},on:{"on-change":function(e){t.formData.birthday=e}}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"民族","label-position":"top"}},[a("Input",{attrs:{placeholder:"请输入民族"},model:{value:t.formData.nation,callback:function(e){t.$set(t.formData,"nation",e)},expression:"formData.nation"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"住址","label-position":"top"}},[a("Input",{attrs:{placeholder:"请输入住址"},model:{value:t.formData.address,callback:function(e){t.$set(t.formData,"address",e)},expression:"formData.address"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"婚姻状况","label-position":"top"}},[a("Select",{model:{value:t.formData.maritalStatus,callback:function(e){t.$set(t.formData,"maritalStatus",e)},expression:"formData.maritalStatus"}},t._l(t.maritalStatusList,(function(e,n){return a("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.value))])})),1)],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"政治面貌","label-position":"top"}},[a("Select",{model:{value:t.formData.politicalStatus,callback:function(e){t.$set(t.formData,"politicalStatus",e)},expression:"formData.politicalStatus"}},t._l(t.politicalStatusList,(function(e,n){return a("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.value))])})),1)],1)],1)],1),a("Row",[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"备注","label-position":"top"}},[a("Input",{attrs:{maxlength:"300",type:"textarea",rows:4},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],1)],1)],1),a("template",{slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formData")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.isSubmit},on:{click:function(e){return t.handleSubmit("formData")}}},[t._v("确定")])],1)],2)}),s=[],l=a("40cb"),c=a("a46c"),d=a("b42f"),m=a("4759"),u=a("e6a1"),f=a("54d9"),p=a("580a"),h=a("9411");function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var v={components:{uploadImgCom:l["a"],choosePosition:d["a"],chooseDepartMent:m["a"],chooseStaff:u["a"],uploadImgList:c["a"],chooseBaseData:f["a"]},props:{},data:function(){var t=this;return{loading:!0,showModal:!1,formData:{groupId:1,jobNumber:"",phone:"",sectionId:[],positionId:[],entryTime:"",seniority:"",probation:"",startTime:"",endTime:"",trainTime:"",idName:"",idCard:"",birthday:"",isLunarCalendar:"",nation:"",maritalStatus:"",address:"",politicalStatus:"",socialSecurityAccount:"",providentFundAccount:"",first:"",commercialInsurance:"",bank:"",bankCard:"",education:"",profession:"",finishSchool:"",finishTime:"",personName:"",personType:"",personTell:"",idCardPositivePic:"",idCardReversePic:"",educationPic:"",academicDegreePic:"",Referrer:"",channelId:"",remark:"",sex:"",name:"",clientId:""},ids:[],departmentIds:[],ruleInline:{name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],sex:[{required:!0,trigger:"change",validator:function(e,a,n){console.log(a,"value"),""==t.formData.sex&&n(new Error("请选择性别")),n()}}],phone:[{required:!0,message:"手机号码不能为空",trigger:"blur"}],entryTime:[{required:!0,type:"string",message:"请选择入职日期",trigger:"change"}],positionId:[{required:!0,validator:function(e,a,n){console.log(a,"value"),(!t.formData.positionId||t.formData.positionId.length<1)&&n(new Error("请选择岗位")),n()},trigger:"change"}]},maritalStatusList:[{id:1,value:"未婚"},{id:2,value:"已婚"},{id:3,value:"离异"},{id:4,value:"丧偶"},{id:5,value:"分居"}],politicalStatusList:[{id:1,value:"团员"},{id:2,value:"党员"},{id:3,value:"群众"},{id:4,value:"其他"}],baseList:[],isSubmit:!1}},computed:{},watch:{},methods:{getBase:function(){var t=this;Object(h["h"])({type:"SOCIAL_SECURITY"}).then((function(e){t.baseList=e.data}))},changeId:function(t){this.formData.positionId=t},changeDepartmentId:function(t){this.formData.sectionId=t},DrawerToShow:function(){this.showModal=!0,this.loading=!0,this.getBase()},handleReset:function(t){this.showModal=!1,this.departmentIds=[],this.ids=[],this.formData.contractDate=[],this.$refs[t].resetFields()},handleSubmit:function(t){var e=this;this.isSubmit||this.$refs[t].validate((function(a){if(a){e.isSubmit=!0;var n=e.formData.positionId[e.formData.positionId.length-1]||"";console.log(n);var i=e.formData.sectionId[e.formData.sectionId.length-1]||"";console.log(i,"-----sectionId"),e.formData.staffId?Object(p["B"])(g({},e.formData,{sectionId:i,positionId:n})).then((function(a){0===a.ret?(e.$Message.success("修改成功！"),e.$refs[t].resetFields(),e.$emit("getData"),e.showModal=!1,e.isSubmit=!1):(e.isSubmit=!1,e.$Message.error(a.msg||"接口错误"))})).catch((function(t){e.isSubmit=!1})):Object(p["v"])(g({},e.formData,{sectionId:i,positionId:n})).then((function(a){e.$Message.success("保存成功！"),e.$refs[t].resetFields(),e.$emit("getData"),e.showModal=!1,e.isSubmit=!1})).catch((function(t){e.isSubmit=!1}))}else e.$Message.error("表单验证失败!")}))},getInfo:function(t){var e=this;if(console.log(t),t)this.loading=!0,Object(p["u"])({staffId:t}).then((function(t){0===t.ret&&(e.formData=t.data.info,e.contractDate=[e.formData.startTime,e.formData.endTime],e.formData.positionId=t.data.info.positionId[0]?t.data.info.positionId:[],e.formData.sectionId=t.data.info.sectionId[0]?t.data.info.sectionId:[],e.formData.sex=e.formData.sex+"",e.loading=!1)}));else for(var a in this.formData)switch(a){case"positionId":this.formData[a]=[];break;case"sectionId":this.formData[a]=[];break;default:this.formData[a]="";break}}},mounted:function(){},beforeDestroy:function(){},created:function(){}},I=v,y=(a("a811"),a("2877")),D=Object(y["a"])(I,r,s,!1,null,"68447448",null),w=D.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Modal",{attrs:{title:t.erTitle,width:"1000"},on:{"on-cancel":function(e){return t.cancel("formData")}},model:{value:t.showAdd,callback:function(e){t.showAdd=e},expression:"showAdd"}},[n("div",{staticStyle:{display:"flex","justify-content":"space-between","padding-bottom":"20px","font-size":"12px"}},[n("div",{staticStyle:{display:"flex"}},[n("div",{staticClass:"staff-head"},[n("img",{attrs:{src:a("f66a")}})]),n("div",{staticStyle:{"margin-left":"20px"}},[n("div",[t._v(t._s(t.formData.name))]),n("div",[t._v("岗位 "+t._s(t.formData.positionName))]),n("div",[t._v(t._s(t.formData.phone))])])]),n("div",[n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.staffLeave()}}},[t._v("离职")])],1)]),n("Tabs",{model:{value:t.curTab,callback:function(e){t.curTab=e},expression:"curTab"}},[n("Tab-pane",{key:"0",attrs:{label:"职工信息"}}),n("Tab-pane",{key:"1",attrs:{label:"合同管理"}}),n("Tab-pane",{key:"2",attrs:{label:"离职信息"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:0===t.curTab,expression:"curTab === 0"}]},[n("Form",{ref:"formData",staticClass:"detail",attrs:{"label-width":130,model:t.formData}},[n("Row",[n("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("基本信息")]),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"姓名","label-position":"top",prop:"name"}},[n("editInput",{attrs:{id:"name",empty:"",text:t.formData.name},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"性别","label-position":"top"}},[n("editSelect",{attrs:{id:"sex",iptId:String(t.formData.sex)||"",list:t.sexList},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"工号","label-position":"top"}},[n("editInput",{attrs:{id:"jobNumber",text:t.formData.jobNumber},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"手机号","label-position":"top"}},[n("editInput",{attrs:{id:"phone",empty:"",text:t.formData.phone},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"岗位","label-position":"top"}},[n("choosePosition",{attrs:{ids:t.positionIds},on:{change:t.changeId}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"部门","label-position":"top"}},[n("chooseDepartMent",{attrs:{ids:t.departmentIds},on:{change:t.changeDepartmentId}})],1)],1),n("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("工作信息")]),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"入职日期","label-position":"top"}},[n("editDate",{attrs:{id:"entryTime",empty:"",text:t.formData.entryTime},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"试用期","label-position":"top"}},[n("editSelect",{attrs:{id:"probation",iptId:String(t.formData.probation)||"",list:t.cycleList},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"合同日期","label-position":"top"}},[n("Date-picker",{attrs:{type:"daterange",value:t.contractDate},on:{"on-change":t.handleChangeTime}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"培训时间","label-position":"top"}},[n("editDate",{attrs:{id:"trainTime",text:t.formData.trainTime},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"工龄","label-position":"top"}},[n("editInput",{attrs:{id:"seniority",text:t.formData.seniority},on:{handleSubmit:t.callback}})],1)],1)],1),n("Row",[n("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("个人信息")]),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"身份证姓名","label-position":"top"}},[n("editInput",{attrs:{id:"idName",text:t.formData.idName},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"身份证号","label-position":"top"}},[n("editInput",{attrs:{id:"idCard",text:t.formData.idCard},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"出生日期","label-position":"top"}},[n("editDate",{attrs:{id:"birthday",text:t.formData.birthday},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"是否农历","label-position":"top"}},[n("editSelect",{attrs:{id:"isLunarCalendar",iptId:String(t.formData.isLunarCalendar)||"",list:[{id:"0",name:"农历"},{id:"1",name:"阳历"}]},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"民族","label-position":"top"}},[n("editInput",{attrs:{id:"nation",text:t.formData.nation},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"住址","label-position":"top"}},[n("editInput",{attrs:{id:"address",text:t.formData.address},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"婚姻状况","label-position":"top"}},[n("editSelect",{attrs:{id:"maritalStatus",iptId:String(t.formData.maritalStatus)||"",list:t.maritalStatusList},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"政治面貌","label-position":"top"}},[n("editSelect",{attrs:{id:"politicalStatus",iptId:String(t.formData.politicalStatus)||"",list:t.politicalStatusList},on:{handleSubmit:t.callback}})],1)],1)],1),n("Row",[n("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("保险&公积金")]),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"社保账号","label-position":"top"}},[n("editInput",{attrs:{id:"socialSecurityAccount",text:t.formData.socialSecurityAccount},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"公积金账号","label-position":"top"}},[n("editInput",{attrs:{id:"providentFundAccount",text:t.formData.providentFundAccount},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"是否第一次买社保","label-position":"top"}},[n("editSelect",{attrs:{id:"first",iptId:String(t.formData.first)||"",list:t.firstList},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"社保","label-position":"top"}},[n("Select",{attrs:{multiple:""},on:{"on-qurey-change":t.changeSocial},model:{value:t.formData.socialSecurity,callback:function(e){t.$set(t.formData,"socialSecurity",e)},expression:"formData.socialSecurity"}},t._l(t.baseList,(function(e,a){return n("Option",{key:a,attrs:{value:e.basisId}},[t._v(t._s(e.name))])})),1)],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"商业险购买","label-position":"top"}},[n("editInput",{attrs:{id:"commercialInsurance",text:t.formData.commercialInsurance},on:{handleSubmit:t.callback}})],1)],1)],1),n("Row",[n("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("银行卡信息")]),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"开户银行","label-position":"top"}},[n("editInput",{attrs:{id:"bank",text:t.formData.bank},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"银行卡号","label-position":"top"}},[n("editInput",{attrs:{id:"bankCard",text:t.formData.bankCard},on:{handleSubmit:t.callback}})],1)],1)],1),n("Row",[n("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("学历信息")]),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"学历","label-position":"top"}},[n("editSelect",{attrs:{id:"education",iptId:String(t.formData.education)||"",list:t.educationList},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"所属专业","label-position":"top"}},[n("editInput",{attrs:{id:"profession",text:t.formData.profession},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"毕业院校","label-position":"top"}},[n("editInput",{attrs:{id:"finishSchool",text:t.formData.finishSchool},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"毕业时间","label-position":"top"}},[n("editDate",{attrs:{id:"finishTime",text:t.formData.finishTime},on:{handleSubmit:t.callback}})],1)],1)],1),n("Row",[n("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("紧急联系人")]),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"紧急联系人姓名","label-position":"top"}},[n("editInput",{attrs:{id:"personName",text:t.formData.personName},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"紧急联系人关系","label-position":"top"}},[n("editSelect",{attrs:{id:"personType",iptId:String(t.formData.personType)||"",list:t.personTypeList},on:{handleSubmit:t.callback}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"联系人手机号","label-position":"top"}},[n("editInput",{attrs:{id:"personTell",text:t.formData.personTell},on:{handleSubmit:t.callback}})],1)],1)],1),n("Row",[n("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("个人资料")]),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"身份证","label-position":"top"}},[n("div",{staticStyle:{display:"flex"}},[n("div",{staticClass:"center"},[n("uploadImg",{attrs:{picArr:{pic:t.formData.idCardPositivePic||"",picName:t.idCardPositiveUrl||""}},on:{uploadSuccess:t.handleSuccess}}),n("div",[t._v("人像面")])],1),n("div",{staticClass:"center",staticStyle:{"margin-left":"20px"}},[n("uploadImg",{attrs:{picArr:{pic:t.formData.idCardReversePic||"",picName:t.idCardReverseUrl||""}},on:{uploadSuccess:t.handleSuccess0}}),n("div",[t._v("国徽面")])],1)])])],1),n("Col",{attrs:{xs:24}},[n("FormItem",{attrs:{label:"学历证书","label-position":"top"}},[n("div",{staticStyle:{color:"#bbb"}},[t._v("建议尺寸: 800*1100px，图片大小不超过3M。")]),t.showAdd?n("uploadImgList",{attrs:{id:"education",picArr:t.formData.educationPic||[]},on:{uploadSuccess:t.handleSuccess1}}):t._e()],1)],1),n("Col",{attrs:{xs:24}},[n("FormItem",{attrs:{label:"学位证书","label-position":"top"}},[n("div",{staticStyle:{color:"#bbb"}},[t._v("建议尺寸: 800*1100px，图片大小不超过3M。")]),t.showAdd?n("uploadImgList",{attrs:{id:"academicDegree",picArr:t.formData.academicDegreePic||[]},on:{uploadSuccess:t.handleSuccess2}}):t._e()],1)],1)],1),n("Row",[n("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("其他信息")]),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"推荐人","label-position":"top"}},[n("chooseStaff",{attrs:{id:"Referrer",staffId:String(t.formData.Referrer)},on:{handleSubmit:t.getStaffId}})],1)],1),n("Col",{attrs:{xs:24,md:12}},[n("FormItem",{attrs:{label:"渠道","label-position":"top"}},[n("chooseBaseData",{attrs:{id:"channelId",channel:"CHANNEL_MODE",basisId:String(t.formData.channelId)},on:{handleSubmit:t.getId}})],1)],1)],1),n("Row",[n("Col",{attrs:{span:"24"}},[n("FormItem",{attrs:{label:"备注","label-position":"top"}},[n("editTextarea",{attrs:{id:"remark",text:t.formData.remark},on:{handleSubmit:t.callback}})],1)],1)],1)],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:1===t.curTab,expression:"curTab === 1"}]},[n("div",{staticClass:"list"},[t._l(t.contractData,(function(e,a){return n("div",{key:a,staticClass:"item"},[n("div",{staticClass:"head"},[n("div",[t._v(t._s(e.title))]),n("div",[t._v("合同期限："+t._s(e.startTime)+" 至 "+t._s(e.endTime))]),n("div",{staticClass:"time"},[t._v("创建时间："+t._s(e.createTime)+" ")])]),e.laborContractPic.length>0?n("div",{staticStyle:{"margin-top":"10px"}},[t._v("劳动合同:")]):t._e(),n("div",{staticClass:"album",attrs:{id:"images1"+a}},t._l(e.laborContractPic,(function(e,i){return n("div",{key:i,staticClass:"photo"},[n("img",{attrs:{src:t.demainUrl+e}}),n("div",{staticClass:"r-upload-list-cover"},[n("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView(i,"images1"+a)}}})],1)])})),0),e.competitionAgreementPic.length>0?n("div",{staticStyle:{"margin-top":"10px"}},[t._v("竞业协议:")]):t._e(),n("div",{staticClass:"album",attrs:{id:"images2"+a}},t._l(e.competitionAgreementPic,(function(e,i){return n("div",{key:i,staticClass:"photo"},[n("img",{attrs:{src:t.demainUrl+e}}),n("div",{staticClass:"r-upload-list-cover"},[n("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView(i,"images2"+a)}}})],1)])})),0),e.confidentialityContract.length>0?n("div",{staticStyle:{"margin-top":"10px"}},[t._v("保密合同:")]):t._e(),n("div",{staticClass:"album",attrs:{id:"images3"+a}},t._l(e.confidentialityContract,(function(e,i){return n("div",{key:i,staticClass:"photo"},[n("img",{attrs:{src:t.demainUrl+e}}),n("div",{staticClass:"r-upload-list-cover"},[n("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView(i,"images3"+a)}}})],1)])})),0)])})),n("div",{staticClass:"item",staticStyle:{"text-align":"center",border:"0"},on:{click:t.showContract}},[n("Button",{staticStyle:{margin:"0 auto",width:"100%"},attrs:{type:"primary",icon:"ios-add"}},[t._v("添加合同")])],1)],2)]),n("div",{directives:[{name:"show",rawName:"v-show",value:2===t.curTab,expression:"curTab === 2"}]},[0===t.leaveData.length?n("div",{staticStyle:{"text-align":"center",padding:"20px"}},[t._v("\n        暂无离职信息\n      ")]):t._l(t.leaveData,(function(e,a){return n("div",{key:a,staticStyle:{"border-bottom":"solid 1px #e8eaec"}},[n("Form",[n("FormItem",{attrs:{label:"离职时间"}},[t._v("\n            "+t._s(e.time)+"\n          ")]),n("FormItem",{attrs:{label:"离职原因"}},[t._v("\n            "+t._s(e.leaveReason)+"\n          ")]),n("FormItem",{attrs:{label:"解除劳动合同协议","label-width":150}},[n("div",{staticClass:"img-list",attrs:{id:"images"}},t._l(JSON.parse(e.leavePic),(function(e,a){return n("div",{key:a,staticClass:"img-item"},[n("img",{staticStyle:{object:"cover"},attrs:{src:t.demainUrl+e}}),n("div",{staticClass:"r-upload-list-cover"},[n("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView(a,"images")}}})],1)])})),0)])],1)],1)})),n("staffLeave",{ref:"leave",attrs:{erTitle:t.erTitle},on:{getData:t.cancel}})],2),n("addContract",{ref:"contract",on:{getData:t.getContract}}),n("div",{staticClass:"demo-drawer-footer",attrs:{slot:"footer"},slot:"footer"},[n("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.cancel("formData")}}},[t._v("取消")])],1)],1)],1)},x=[],k=a("c82c"),C=a.n(k),T=(a("0808"),a("c276")),V=a("0bec"),O=a("d31b"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Date-Picker",{attrs:{type:"date",value:t.newText},on:{"on-change":t.change}})],1)},j=[],$={name:"",props:{text:{type:String,default:""},id:{type:String,default:""},empty:{type:Boolean,default:!1}},watch:{text:function(t){this.computeText=t},id:function(t){console.log(t)}},computed:{computeText:{get:function(){return this.newText},set:function(t){this.newText=t}}},data:function(){return{isShow:!1,newText:""}},mounted:function(){},methods:{change:function(t){this.empty?""!=t?this.$emit("handleSubmit",this.id,t):this.$Message.error("请选择日期"):this.$emit("handleSubmit",this.id,t),console.log(t,"date")}}},F=$,P=(a("0617"),Object(y["a"])(F,_,j,!1,null,null,null)),R=P.exports,N=a("6bcd"),L=a("a5ae"),M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,title:"新增合同",width:600},on:{"on-cancel":function(e){return t.handleReset("formData")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{ref:"formData",staticClass:"contract",attrs:{model:t.formData,rules:t.ruleInline,"label-width":130}},[a("FormItem",{attrs:{label:"标题","label-position":"top",prop:"title"}},[a("Input",{attrs:{maxlength:"30"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),a("FormItem",{attrs:{label:"合同期限","label-position":"top",prop:"contractDate"}},[a("Date-picker",{attrs:{value:t.formData.contractDate,type:"daterange",placeholder:"选择日期"},on:{"on-change":t.handleChangeTime}})],1),a("FormItem",{attrs:{label:"劳动合同","label-position":"top"}},[a("div",{staticStyle:{color:"#bbb"}},[t._v("建议尺寸: 800*1100px，图片大小不超过3M。")]),a("uploadImgList",{attrs:{id:"laborContractPic",picArr:[]},on:{uploadSuccess:t.handleSuccess}})],1),a("FormItem",{attrs:{label:"竞业协议","label-position":"top"}},[a("div",{staticStyle:{color:"#bbb"}},[t._v("建议尺寸: 800*1100px，图片大小不超过3M。")]),a("uploadImgList",{attrs:{id:"competitionAgreementPic",picArr:[]},on:{uploadSuccess:t.handleSuccess2}})],1),a("FormItem",{attrs:{label:"保密合同","label-position":"top"}},[a("div",{staticStyle:{color:"#bbb"}},[t._v("建议尺寸: 800*1100px，图片大小不超过3M。")]),a("uploadImgList",{attrs:{id:"confidentialityContract",picArr:[]},on:{uploadSuccess:t.handleSuccess3}})],1)],1),a("template",{slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formData")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formData")}}},[t._v("确定")])],1)],2)},A=[],E={components:{uploadImgList:c["a"]},props:{},data:function(){return{loading:!0,showModal:!1,formData:{title:"",laborContractPic:[],competitionAgreementPic:[],confidentialityContract:[],contractDate:[]},ruleInline:{contractDate:[{required:!0,type:"array",message:"请选择合同期限",trigger:"change"}],title:[{required:!0,message:"请填写合同标题",trigger:"blur"}]},contractDate:[]}},computed:{},watch:{},methods:{DrawerToShow:function(t){this.formData.staffId=t,this.showModal=!0,this.loading=!0},handleReset:function(t){this.showModal=!1,this.$refs[t].resetFields()},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(a){a?Object(p["d"])(e.formData).then((function(a){e.$Message.success("已保存！"),e.$emit("getData"),e.showModal=!1,e.$refs[t].resetFields()})):e.$Message.error("表单验证失败!")}))},handleChangeTime:function(t){this.formData.contractDate=t,this.formData.startTime=t[0]||"",this.formData.endTime=t[1]||""},handleSuccess:function(t){this.formData.laborContractPic=t},handleSuccess2:function(t){this.formData.competitionAgreementPic=t},handleSuccess3:function(t){this.formData.confidentialityContract=t}},mounted:function(){console.log(this.empPosition)},beforeDestroy:function(){},created:function(){}},B=E,H=(a("16e6"),Object(y["a"])(B,M,A,!1,null,"208c6602",null)),G=H.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,title:"人才离职",width:600},on:{"on-cancel":function(e){return t.handleReset("formData")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{ref:"formData",attrs:{"label-width":130,model:t.formData,rules:t.ruleInline}},[a("Row",[a("Col",{attrs:{xs:24}},[a("FormItem",{attrs:{label:"姓名","label-position":"top"}},[t._v("\n           "+t._s(t.staffName)+"\n        ")])],1),a("Col",{attrs:{xs:24}},[a("FormItem",{attrs:{label:"离职时间","label-position":"top",prop:"time"}},[a("DatePicker",{attrs:{type:"date",placeholder:"选择时间"},on:{"on-change":function(e){t.formData.time=e}},model:{value:t.formData.time,callback:function(e){t.$set(t.formData,"time",e)},expression:"formData.time"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"原因","label-position":"top",prop:"leaveReason"}},[a("Input",{attrs:{type:"textarea",rows:6,placeholder:"最多输入200个字符"},model:{value:t.formData.leaveReason,callback:function(e){t.$set(t.formData,"leaveReason",e)},expression:"formData.leaveReason"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"附件","label-position":"top"}},[a("div",[t._v("（可以上传离职协议与离职证明等,不超过20张）")]),a("div",{staticStyle:{color:"#bbb"}},[t._v("建议尺寸: 800*1100px，图片大小不超过3M。")]),a("uploadImgList",{attrs:{id:"leavePic",picArr:[]},on:{uploadSuccess:t.handleSuccess}})],1)],1)],1)],1),a("template",{slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formData")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formData")}}},[t._v("确定")])],1)],2)},U=[],Q={components:{uploadImgList:c["a"]},props:{},data:function(){return{loading:!0,sectionList:[],showModal:!1,formData:{staffId:"",leavePic:[],leaveReason:""},staffName:"",ruleInline:{time:[{required:!0,message:"请选择离职时间",trigger:"change"}],leaveReason:[{required:!0,message:"请输入离职原因",trigger:"blur"}]}}},computed:{},watch:{},methods:{handleSuccess:function(t){this.formData.leavePic=t},DrawerToShow:function(t,e){this.formData.staffId=t,this.staffName=e,this.showModal=!0,this.loading=!0},handleReset:function(t){this.showModal=!1,this.$refs[t].resetFields(),this.formData.leavePic=[]},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(a){a?Object(p["w"])(e.formData).then((function(a){e.$Message.success("已离职！"),e.$emit("getData"),e.showModal=!1,e.$refs[t].resetFields()})):e.$Message.error("表单验证失败!")}))}},mounted:function(){},beforeDestroy:function(){},created:function(){}},Z=Q,Y=(a("4fdf"),Object(y["a"])(Z,z,U,!1,null,"f070ffb8",null)),W=Y.exports,q={name:"detail",components:{editInput:V["a"],editTextarea:O["a"],uploadImg:l["a"],addContract:G,editSelect:N["a"],chooseIndustry:L["a"],choosePosition:d["a"],chooseDepartMent:m["a"],editDate:R,chooseStaff:u["a"],uploadImgList:c["a"],staffLeave:W,chooseBaseData:f["a"]},data:function(){return{showAdd:!1,tabIndex:0,curTab:0,formData:{},leaveInfo:{},name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],phone:[{required:!0,message:"手机号码不能为空",trigger:"blur"}],educationList:[{id:"1",name:"初中及以下"},{id:"2",name:"中专/中技"},{id:"3",name:"高中"},{id:"4",name:"大专"},{id:"5",name:"本科"},{id:"6",name:"硕士"},{id:"6",name:"博士"}],personTypeList:[{id:"1",name:"父母"},{id:"2",name:"配偶"},{id:"3",name:"子女"},{id:"4",name:"其他"}],cycleList:[{id:"1",name:"一个月"},{id:"2",name:"三个月"},{id:"3",name:"六个月"},{id:"4",name:"九个月"},{id:"5",name:"十二个月"},{id:"6",name:"按照合同周期"}],sexList:[{id:"0",name:"女"},{id:"1",name:"男"}],firstList:[{id:"0",name:"是"},{id:"1",name:"否"}],maritalStatusList:[{id:"1",name:"未婚"},{id:"2",name:"已婚"},{id:"3",name:"离异"},{id:"4",name:"丧偶"},{id:"5",name:"分居"}],politicalStatusList:[{id:"1",name:"团员"},{id:"2",name:"党员"},{id:"3",name:"群众"},{id:"4",name:"其他"}],albumList:[],isShow:!1,positionIds:[],departmentIds:[],demainUrl:T["a"].cookies.get("domainUrl"),idCardPositiveUrl:"",idCardReverseUrl:"",leaveData:[],contractData:[],contractDate:[],baseList:[]}},props:{erTitle:{type:String},status:{type:String}},methods:{getBase:function(){var t=this;Object(h["h"])({type:"SOCIAL_SECURITY"}).then((function(e){t.baseList=e.data}))},staffLeave:function(){this.$refs.leave.DrawerToShow(this.formData.staffId,this.formData.name)},getContract:function(){var t=this;Object(p["s"])({staffId:this.formData.staffId}).then((function(e){t.loading=!1,0===e.ret?(console.log("成功"),t.contractData=e.data.list,t.pageination=e.data.pageInfo):t.$Message.error(e.msg||"接口错误")}))},getLeaveData:function(){var t=this;Object(p["y"])({staffId:this.formData.staffId}).then((function(e){t.loading=!1,0===e.ret?(console.log("成功"),t.leaveData=e.data.list,t.pageination=e.data.pageInfo):t.$Message.error(e.msg||"接口错误")}))},getLeaveInfo:function(t){var e=this;Object(p["x"])({staffId:t}).then((function(t){0===t.ret&&(e.leaveInfo=t.data.info||{})}))},getInfo:function(t){var e=this;this.loading=!0,Object(p["u"])({staffId:t}).then((function(t){0===t.ret&&(e.formData=t.data.info,e.positionIds=t.data.info.positionId,e.departmentIds=t.data.info.sectionId,e.contractDate=[e.formData.startTime,e.formData.endTime],e.formData.positionId=t.data.info.positionId[t.data.info.positionId.length-1],e.formData.sectionId=t.data.info.sectionId[t.data.info.sectionId.length-1],t.data.info.idCardPositivePic&&(e.idCardPositiveUrl=e.demainUrl+t.data.info.idCardPositivePic),t.data.info.idCardReversePic&&(e.idCardReverseUrl=e.demainUrl+t.data.info.idCardReversePic),e.loading=!1)}))},showContract:function(){this.$refs.contract.DrawerToShow(this.formData.staffId)},handleSuccess:function(t){this.formData.idCardPositivePic=t.pic,this.handleSubmit()},handleSuccess0:function(t){this.formData.idCardReversePic=t.pic,this.handleSubmit()},handleChangeTime:function(t){this.formData.startTime=t[0]||"",this.formData.endTime=t[1]||"",this.handleSubmit()},show:function(){this.$refs.zhuanyi.DrawerToShow()},DrawerToShow:function(t){this.formData.staffId=t,this.showAdd=!0,this.getBase(),this.getInfo(t),this.getLeaveData(),this.getContract()},cancel:function(t){this.showAdd=!1,this.departmentIds=[],this.positionIds=[],this.$refs[t].resetFields(),this.$emit("getData")},callback:function(t,e){console.log(t,e,"值"),this.formData[t]=e,this.handleSubmit()},handleSubmit:function(){var t=this;Object(p["B"])(this.formData).then((function(e){0===e.ret?t.$Message.success("修改成功！"):t.$Message.error(e.msg||"接口错误")}))},handleSuccess1:function(t){this.formData.educationPic=t,this.handleSubmit()},handleSuccess2:function(t){this.formData.academicDegreePic=t,this.handleSubmit()},changeId:function(t){this.positionIds=t;var e=t.length-1;this.formData.positionId=t[e],this.handleSubmit()},changeDepartmentId:function(t){this.departmentIds=t;var e=t.length-1;this.formData.sectionId=t[e],this.handleSubmit()},getStaffId:function(t){this.formData.Referrer=t,console.log(t,"++++++"),this.handleSubmit(this.formData.staffId)},handleLeave:function(t){this.leaveInfo.leavePic.push(t)},getId:function(t,e){this.formData[e]=t,this.handleSubmit()},changeSocial:function(){this.handleSubmit()},handleView:function(t,e){var a=new C.a(document.getElementById(e),{initialViewIndex:t,title:!1,navbar:!1,hidden:function(){a.destroy()}});a.show()}},created:function(){},mounted:function(){}},J=q,X=(a("181c"),Object(y["a"])(J,S,x,!1,null,"a88ac2b8",null)),K=X.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{"class-name":"vertical-center-modal","mask-closable":!1,"footer-hide":!0,width:500,title:"修改密码"},on:{"on-cancel":function(e){return t.cancel("formValidate")}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Form",{ref:"formValidate",staticClass:"ivu-mb-8",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"账号",prop:"userAccount"}},[t._v("\n                "+t._s(t.formValidate.userAccount)+"\n            ")]),a("FormItem",{attrs:{label:"密码",prop:"adminPwd"}},[a("Input",{attrs:{maxlength:"24",type:"password",placeholder:"请输入新密码"},model:{value:t.formValidate.adminPwd,callback:function(e){t.$set(t.formValidate,"adminPwd",e)},expression:"formValidate.adminPwd"}})],1)],1),a("div",{staticClass:"ivu-mt ivu-text-right"},[a("Button",{on:{click:function(e){return t.cancel("formValidate")}}},[t._v("取消")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)],1)],1)},et=[],at=(a("9ec9"),a("b6bd"));function nt(t){return Object(at["a"])({url:"/auth/group/list",method:"post",data:t})}function it(t){return Object(at["a"])({url:"/user/user/info",method:"post",data:t})}function ot(t){return Object(at["a"])({url:"/user/user/update",method:"post",data:t})}var rt={props:[],data:function(){return{loading:!1,status:[{id:1,value:"启用"},{id:2,value:"停用"}],formValidate:{adminAccount:"",adminPwd:"",groupId:""},ruleValidate:{},modal:!1,mode:"add",groupList:[]}},computed:{},methods:{getList:function(){var t=this;nt({name:this.name,page:this.page,pageSize:this.pageSize}).then((function(e){t.groupList=e.data.list}))},infoDetail:function(t){var e=this;it({id:t}).then((function(t){e.formValidate=t.data}))},DrawerToShow:function(t){this.infoDetail(t),this.getList(),this.modal=!0},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t&&(e.loading=!0,ot({id:e.formValidate.id,userPwd:e.formValidate.adminPwd,groupId:e.formValidate.groupId}).then((function(t){e.modal=!1,e.$emit("onSubmit"),e.$Message.success("修改成功"),e.loading=!1})).catch((function(t){e.loading=!1})))}))},cancel:function(t){this.modal=!1,this.$refs[t].resetFields()},handleReset:function(t){this.$refs[t].resetFields()}},mounted:function(){},watch:{}},st=rt,lt=Object(y["a"])(st,tt,et,!1,null,null,null),ct=lt.exports;function dt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function mt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?dt(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):dt(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var ut={components:{addStaff:w,staffDetail:K,staffLeave:W,chooseDepartMent:m["a"],addAdminUser:ct,choosePosition:d["a"]},data:function(){var t,e=this;return t={loading:!0,erTitle:"",status:"",staffId:0,staffName:"",tableColumns:[{title:"姓名",key:"name",minWidth:100,render:function(t,a){return t("div",[t("a",{props:{type:"primary",size:"small"},style:{marginRight:"5px",width:"100px",height:"20px",display:"block"},on:{click:function(){e.show(a.row,"edit")}}},a.row.name)])}},{title:"手机号",minWidth:100,key:"phone"},{title:"岗位",minWidth:100,key:"positionName"},{title:"性别",minWidth:60,key:"sexName"},{title:"入职日期",minWidth:100,key:"entryTime"},{title:"状态",minWidth:60,key:"statusName"},{title:"操作",key:"action",minWidth:200,render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.showAdmin(a.row)}}},"修改密码"),t("Button",{props:{type:0===a.row.status?"info":"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){0===a.row.status?e.staffLeave(a.row):e.backCompany(a.row)}}},0===a.row.status?"离职":"复职"),t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.remove(a.row)}}},"删除")])}}],tableData:[]},Object(o["a"])(t,"erTitle",""),Object(o["a"])(t,"pageination",{page:1,pageSize:2,count:1}),Object(o["a"])(t,"staffData",[]),Object(o["a"])(t,"curTab",0),Object(o["a"])(t,"formData",{status:-1,sex:-1,sectionId:0,positionId:[],phone:""}),Object(o["a"])(t,"isShow",!1),Object(o["a"])(t,"staffIds",[]),Object(o["a"])(t,"ids",[]),t},created:function(){this.staffIds=this.$route.query.staffId,this.getData()},methods:{remove:function(t){var e=this;this.$Modal.confirm({title:"删除",content:"<p>确定删除该职工？</p>",onOk:function(){Object(p["t"])({staffId:t.staffId}).then((function(t){0===t.ret?(e.$Message.success("删除成功"),e.getData()):e.$Message.error(t.msg)}))},onCancel:function(){e.$Message.warning("已取消！")}})},backCompany:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"<p>确定该职工复职？</p>",onOk:function(){Object(p["r"])({staffId:t.staffId}).then((function(t){0===t.ret?(e.$Message.success("已复职！"),e.getData()):e.$Message.error(t.msg||"网络错误")}))},onCancel:function(){e.$Message.warning("已取消！")}})},search:function(){this.page=1,this.getData()},clear:function(t){this.page=1,this.formData.status=-1,this.formData.sex=-1,this.formData.name="",this.formData.sectionId=0,this.formData.positionId=[],this.formData.phone="",this.staffIds=[],this.ids=[],this.getData()},getData:function(){var t=this;this.loading=!0;var e=this.formData.positionId[this.formData.positionId.length-1]||"";Object(p["z"])(mt({staffId:this.staffIds,page:this.page},this.formData,{positionId:e})).then((function(e){t.loading=!1,0===e.ret?(console.log("成功"),t.tableData=e.data.list,t.pageination=e.data.pageInfo):t.$Message.error(e.msg||"接口错误")}))},changePage:function(t){this.page=t,this.getData()},showDetail:function(t){this.erTitle="职工详情",this.$refs.Drawer.DrawerToShow(t.staffId)},show:function(t,e){this.status=e,"add"===e?(this.erTitle="新增",this.$refs.Drawer.getInfo("")):"edit"===e&&(this.erTitle="编辑",this.$refs.Drawer.getInfo(t.staffId)),this.$refs.Drawer.DrawerToShow()},chooseStaff:function(t){this.staffData=t,console.log(t,"list"),1===t.length&&(this.staffId=t[0].staffId,this.staffName=t[0].name)},staffLeave:function(t){this.erTitle="职工离职",this.$refs.leave.DrawerToShow(t.staffId,t.name)},showAdmin:function(t){this.$refs.admin.DrawerToShow(t.staffId,t.name)},screen:function(){this.isShow=!this.isShow},changeDepartmentId:function(t){this.ids=t;var e=t.length-1;this.formData.sectionId=t[e],console.log(this.formData.sectionId)},changeId:function(t){this.formData.positionId=t}}},ft=ut,pt=(a("1102"),Object(y["a"])(ft,n,i,!1,null,"f0046938",null));e["default"]=pt.exports},"716c":function(t,e,a){"use strict";var n=a("05d0"),i=a.n(n);i.a},"7e1d":function(t,e,a){"use strict";var n=a("8f63"),i=a.n(n);i.a},"7e81":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{staticClass:"no-mb-container  ",attrs:{"class-name":"vertical-center-modal","mask-closable":!1,"footer-hide":!0,width:600,title:"修改权限组"},on:{"on-cancel":t.handleCancel},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Form",{ref:"formCustom",staticClass:"ivu-mb-8",attrs:{inline:""}},[a("FormItem",{attrs:{label:""}},[a("Input")],1),a("FormItem",{attrs:{label:""}},[a("Button",[t._v("查询")])],1)],1),a("div",[a("Tree",{attrs:{data:t.data1,"show-checkbox":""}})],1),a("div",{staticClass:"ivu-mt ivu-text-right"},[a("Button",{on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("取消")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)],1)],1)},i=[],o=(a("7f7f"),a("c5f6"),a("3298"),{props:{test1:{type:String,default:","},test2:{type:Number,default:0},showModal:{type:Boolean,default:!1},test4:{type:Array,default:function(){return[]}}},data:function(){return{formValidate:{name:"",mail:"",city:"",gender:"",interest:[],date:"",time:"",desc:""},ruleValidate:{name:[{required:!0,message:"",trigger:"blur"}],mail:[{required:!0,message:"",trigger:"blur"},{type:"email",message:"",trigger:"blur"}],city:[{required:!0,message:"",trigger:"change"}],gender:[{required:!0,message:"",trigger:"change"}],interest:[{required:!0,type:"array",min:1,message:"",trigger:"change"},{type:"array",max:2,message:"",trigger:"change"}],date:[{required:!0,type:"date",message:"",trigger:"change"}],time:[{required:!0,type:"string",message:"",trigger:"change"}],desc:[{required:!0,message:"",trigger:"blur"},{type:"string",min:20,message:"",trigger:"blur"}]},data1:[{title:"招生管理",expand:!1,children:[]},{title:"招生管理",expand:!1,children:[{title:"parent 1-1",expand:!1,children:[{title:"leaf 1-1-1"},{title:"leaf 1-1-2"}]},{title:"parent 1-2",expand:!1,children:[{title:"leaf 1-2-1"},{title:"leaf 1-2-1"}]}]}],modal:!1,typeModal:!1}},computed:{},methods:{handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?e.$Message.success("Success!"):e.$Message.error("Fail!")}))},handleReset:function(t){this.$refs[t].resetFields()},handleCancel:function(){this.$emit("onCancel")}},mounted:function(){},watch:{showModal:function(t){this.modal=t}}}),r=o,s=a("2877"),l=Object(s["a"])(r,n,i,!1,null,null,null),c=l.exports;e["a"]=c},"81c7":function(t,e,a){},"8b97":function(t,e,a){var n=a("d3f4"),i=a("cb7c"),o=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,a){return o(t,a),e?t.__proto__=a:n(t,a),t}}({},!1):void 0),check:o}},"8f63":function(t,e,a){},"9ec9":function(t,e,a){},a6d3:function(t,e,a){},a7e5:function(t,e,a){},a811:function(t,e,a){"use strict";var n=a("31d7"),i=a.n(n);i.a},aa77:function(t,e,a){var n=a("5ca1"),i=a("be13"),o=a("79e5"),r=a("fdef"),s="["+r+"]",l="​",c=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),m=function(t,e,a){var i={},s=o((function(){return!!r[t]()||l[t]()!=l})),c=i[t]=s?e(u):r[t];a&&(i[a]=c),n(n.P+n.F*s,"String",i)},u=m.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(d,"")),t};t.exports=m},ae2e:function(t,e,a){},b19b:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("div",[t._l(t.children,(function(e,n){return[e.btnIsTable?t._e():a("Button",{key:n,class:e.btnClass,attrs:{type:e.btnType?e.btnType:"default"},on:{click:function(a){return t.handleEvent(e.btnHandle,e.btnHandleParams)}}},[t._v(t._s(e.btnTitle))])]})),a("div",{staticClass:"ivu-mt"},[a("Table",{ref:"table",attrs:{loading:t.loading,columns:t.tableTitle,data:t.tableData,type:"seletion",stripe:""},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.row;return[t._l(t.children,(function(e,i){return[e.btnIsTable?a("Button",{key:i,class:e.btnClass,attrs:{type:e.btnType?e.btnType:"default"},on:{click:function(a){return t.handleEventTwo(e.btnHandle,e.btnHandleParams,n)}}},[t._v(t._s(e.btnTitle))]):t._e()]}))]}}])})],1)],2)]),a("editPage",{ref:"Drawer",attrs:{erTitle:t.title},on:{callback:function(e){return t.getList()}}}),a("permissionGroup",{ref:"permissionGroup",attrs:{mode:t.mode},on:{onSubmit:t.onSubmit}})],1)},i=[],o=(a("ac6a"),a("7f7f"),a("ae2e"),a("684d")),r=a("7e81"),s=a("ea45"),l=a("59a3"),c=a("10b4"),d=a("580a"),m={components:{permissionGroup:o["a"],setPermission:r["a"],addUser:s["a"],chooseMember:l["a"],editPage:c["a"]},data:function(){var t=this;return{children:[{btnTitle:"新增",btnClass:"",btnType:"primary",btnHandle:"handleAdd",btnHandleParams:"add",btnIsTable:!1},{btnTitle:"编辑",btnClass:"marginRight-20",btnType:"primary",btnHandle:"showEditDrawer",btnHandleParams:"编辑",btnIsTable:!0},{btnTitle:"删除",btnClass:"",btnType:"error",btnHandle:"remove",btnHandleParams:"row.index",btnIsTable:!0}],showModal:!1,showModal2:!1,showModal3:!1,showChooseClass:!1,treeList:[],groupId:"",loading:!1,title:"",formValidate:{groupName:""},ruleValidate:{groupName:[{required:!0,message:"角色名称不能为空",trigger:"blur"}]},tableTitle:[{title:"角色名称",key:"groupName",minWidth:120,render:function(e,a){return e("div",[e("a",{on:{click:function(){t.handleAdd("edit",a.row)}}},a.row.groupName)])}},{title:"描述",key:"roleName",minWidth:120},{title:"说明",key:"describe",minWidth:120},{title:"操作",slot:"action",align:"center",minWidth:140}],page:1,name:"",pageSize:20,tableData:[],pageination:{pageSize:10,count:0,pageSum:1,page:1},mode:""}},computed:{},watch:{},methods:{handleAdd:function(t,e){this.mode=t,this.$refs.permissionGroup.DrawerToShow(t,e,1)},onSubmit:function(){this.getList()},delete:function(){this.$Modal.confirm({title:"提示",content:"<p>确定删除吗？</p>",onOk:function(){},onCancel:function(){}})},handleChoose:function(){this.showChooseClass=!1},showEditDrawer:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.title=t,this.$refs.Drawer.DrawerToShow(1),this.$refs.Drawer.loadData(e)},getList:function(){var t=this;this.loading=!0,Object(d["l"])({type:1,name:this.name,page:this.page,pageSize:this.pageSize}).then((function(e){t.loading=!1,t.tableData=e.data.list}))},remove:function(t,e){var a=this;this.$Modal.confirm({title:"提示",content:"<p>确认删除</p>",onOk:function(){a.onGroupDel(e)},onCancel:function(){}})},onGroupDel:function(t){var e=this;Object(d["g"])({type:1,groupId:t.groupId}).then((function(t){e.$Message.success("删除成功"),e.getList()}))},handleEvent:function(t,e){this.$emit(t,e)},handleEventTwo:function(t,e,a){this.$emit(t,e,a)}},mounted:function(){this.getList()},beforeDestroy:function(){},created:function(){var t=this;this.children.forEach((function(e){t.$on(e.btnHandle,t[e.btnHandle])}))}},u=m,f=a("2877"),p=Object(f["a"])(u,n,i,!1,null,null,null);e["default"]=p.exports},b42f:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Cascader",{attrs:{data:t.list,value:t.ids,"change-on-select":""},on:{"update:value":function(e){t.ids=e},"on-change":t.change}})],1)},i=[],o=a("9411"),r={components:{},props:{ids:Array},data:function(){return{showModal:!1,list:[]}},computed:{},watch:{},methods:{change:function(t){this.$emit("change",t),console.log(t,"position")},getList:function(){var t=this;Object(o["y"])().then((function(e){var a=e.data.list;t.list=a.map((function(t,e){return{value:t.value,label:t.title,children:t.children.map((function(t){return{value:t.value,label:t.title}}))}}))}))}},mounted:function(){},beforeDestroy:function(){},created:function(){this.getList()}},s=r,l=a("2877"),c=Object(l["a"])(s,n,i,!1,null,"4e5377ed",null);e["a"]=c.exports},b8b5:function(t,e,a){},c5f6:function(t,e,a){"use strict";var n=a("7726"),i=a("69a8"),o=a("2d95"),r=a("5dbc"),s=a("6a99"),l=a("79e5"),c=a("9093").f,d=a("11e9").f,m=a("86cc").f,u=a("aa77").trim,f="Number",p=n[f],h=p,b=p.prototype,g=o(a("2aeb")(b))==f,v="trim"in String.prototype,I=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():u(e,3);var a,n,i,o=e.charCodeAt(0);if(43===o||45===o){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+e}for(var r,l=e.slice(2),c=0,d=l.length;c<d;c++)if(r=l.charCodeAt(c),r<48||r>i)return NaN;return parseInt(l,n)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof p&&(g?l((function(){b.valueOf.call(a)})):o(a)!=f)?r(new h(I(e)),a,p):I(e)};for(var y,D=a("9e1e")?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;D.length>w;w++)i(h,y=D[w])&&!i(p,y)&&m(p,y,d(h,y));p.prototype=b,b.constructor=p,a("2aba")(n,f,p)}},c666:function(t,e,a){},cdac:function(t,e,a){"use strict";var n=a("c666"),i=a.n(n);i.a},d9a3:function(t,e,a){},e323:function(t,e,a){"use strict";var n=a("22bf"),i=a.n(n);i.a},ea45:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,width:700,title:t.erTitle+"职工"},on:{"on-cancel":t.handleCancel},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Form",{ref:"formValidate",attrs:{inline:"",model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[a("Tabs",{attrs:{value:"name1"}},[a("TabPane",{attrs:{label:"职工信息",name:"name1"}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"姓名",prop:"userRealName"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"12",size:"small"},on:{"on-change":t.setUserName},model:{value:t.formValidate.userRealName,callback:function(e){t.$set(t.formValidate,"userRealName",e)},expression:"formValidate.userRealName"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"昵称"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"12",size:"small"},model:{value:t.formValidate.userNickName,callback:function(e){t.$set(t.formValidate,"userNickName",e)},expression:"formValidate.userNickName"}})],1)],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"性别"}},[a("Select",{staticStyle:{width:"auto"},attrs:{size:"small"},model:{value:t.formValidate.userSex,callback:function(e){t.$set(t.formValidate,"userSex",e)},expression:"formValidate.userSex"}},[a("Option",{attrs:{value:1}},[t._v("男")]),a("Option",{attrs:{value:2}},[t._v("女")])],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"手机号码"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"12",size:"small"},model:{value:t.formValidate.userMobile,callback:function(e){t.$set(t.formValidate,"userMobile",e)},expression:"formValidate.userMobile"}})],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"部门"}},[t._l(t.formValidate.sectionAndPosition,(function(e,n){return[a("Tag",{key:n,attrs:{closable:""},on:{"on-close":function(e){return t.handleClear(n)}}},[t._v(t._s(e.sectionName+"("+e.positionName+")")+"\n              ")])]})),a("Button",{attrs:{size:"small",icon:"md-more"},on:{click:function(e){return t.choose()}}})],2)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"身份证号"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"20",size:"small"},model:{value:t.formValidate.idCard,callback:function(e){t.$set(t.formValidate,"idCard",e)},expression:"formValidate.idCard"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"银行账号"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"24",size:"small"},model:{value:t.formValidate.bankCard,callback:function(e){t.$set(t.formValidate,"bankCard",e)},expression:"formValidate.bankCard"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"在职类型"}},[a("Select",{staticStyle:{width:"auto"},attrs:{size:"small"},model:{value:t.formValidate.userType,callback:function(e){t.$set(t.formValidate,"userType",e)},expression:"formValidate.userType"}},[a("Option",{attrs:{value:1}},[t._v("全职")]),a("Option",{attrs:{value:2}},[t._v("兼职")]),a("Option",{attrs:{value:3}},[t._v("专职")])],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"级别"}},[a("Select",{staticStyle:{width:"auto"},attrs:{size:"small"},model:{value:t.formValidate.userGroupId,callback:function(e){t.$set(t.formValidate,"userGroupId",e)},expression:"formValidate.userGroupId"}},t._l(t.empGrade,(function(e){return a("Option",{key:e.basicsId,attrs:{value:e.basicsId}},[t._v("\n                "+t._s(e.name))])})),1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"授课年级"}},[a("Select",{staticStyle:{"padding-right":"30px"},attrs:{multiple:"",size:"small"},model:{value:t.formValidate.classIds,callback:function(e){t.$set(t.formValidate,"classIds",e)},expression:"formValidate.classIds"}},t._l(t.shiftGrade,(function(e){return a("Option",{key:e.basicsId,attrs:{value:e.basicsId}},[t._v("\n                "+t._s(e.name))])})),1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"授课科目"}},[a("Select",{staticStyle:{"padding-right":"30px"},attrs:{multiple:"",size:"small"},model:{value:t.formValidate.subjectIds,callback:function(e){t.$set(t.formValidate,"subjectIds",e)},expression:"formValidate.subjectIds"}},t._l(t.subject,(function(e){return a("Option",{key:e.basicsId,attrs:{value:e.basicsId}},[t._v("\n                "+t._s(e.name))])})),1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"上司"}},[""!=t.formValidate.leaderName?a("Tag",{attrs:{closable:""},on:{"on-close":t.handleClearLeader}},[t._v("\n              "+t._s(t.formValidate.leaderName))]):t._e(),a("Button",{attrs:{size:"small",icon:"md-more"},on:{click:t.chooseLeader}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"邮箱"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"24",size:"small"},model:{value:t.formValidate.userEmail,callback:function(e){t.$set(t.formValidate,"userEmail",e)},expression:"formValidate.userEmail"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"QQ号码"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"18",size:"small"},model:{value:t.formValidate.userTel,callback:function(e){t.$set(t.formValidate,"userTel",e)},expression:"formValidate.userTel"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"入职日期"}},[a("DatePicker",{staticStyle:{width:"auto"},attrs:{transfer:!0,value:t.formValidate.entryTime,type:"date",size:"small"},on:{"on-change":function(e){t.formValidate.entryTime=e}}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"转正日期"}},[a("DatePicker",{staticStyle:{width:"auto"},attrs:{transfer:!0,value:t.formValidate.bindingTime,type:"date",size:"small"},on:{"on-change":function(e){t.formValidate.bindingTime=e}}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"正式职工"}},[a("Select",{staticStyle:{width:"auto"},attrs:{transfer:"",size:"small"},model:{value:t.formValidate.workerType,callback:function(e){t.$set(t.formValidate,"workerType",e)},expression:"formValidate.workerType"}},[a("Option",{attrs:{value:1}},[t._v("是")]),a("Option",{attrs:{value:0}},[t._v("否")])],1)],1)],1),a("FormItem",{attrs:{label:"备注"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"300",size:"small"},model:{value:t.formValidate.userQrcode,callback:function(e){t.$set(t.formValidate,"userQrcode",e)},expression:"formValidate.userQrcode"}})],1),"1"===t.userSatus?a("FormItem",{attrs:{label:"离职信息"}},[a("div",{domProps:{innerHTML:t._s(t.leaveTime)}})]):t._e(),a("FormItem",{attrs:{label:"岗位类型"}},[a("Select",{staticStyle:{width:"auto"},attrs:{transfer:"",size:"small"},model:{value:t.formValidate.isAffairs,callback:function(e){t.$set(t.formValidate,"isAffairs",e)},expression:"formValidate.isAffairs"}},[a("Option",{attrs:{value:1}},[t._v("教学老师")]),a("Option",{attrs:{value:2}},[t._v("教务老师")])],1)],1)],1),a("TabPane",{attrs:{label:"登录用户"}},[a("FormItem",{attrs:{label:"用户名"}},[a("Input",{staticStyle:{width:"auto"},attrs:{disabled:"edit"==t.mode,maxlength:"12",size:"small"},model:{value:t.formValidate.adminAccount,callback:function(e){t.$set(t.formValidate,"adminAccount",e)},expression:"formValidate.adminAccount"}})],1),a("FormItem",{attrs:{label:"密码"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"24",size:"small"},model:{value:t.formValidate.adminPwd,callback:function(e){t.$set(t.formValidate,"adminPwd",e)},expression:"formValidate.adminPwd"}})],1),a("FormItem",{attrs:{label:"状态"}},[a("Select",{staticStyle:{width:"auto"},attrs:{size:"small"},model:{value:t.formValidate.adminStatus,callback:function(e){t.$set(t.formValidate,"adminStatus",e)},expression:"formValidate.adminStatus"}},[a("Option",{attrs:{value:1}},[t._v("启用")]),a("Option",{attrs:{value:2}},[t._v("停用")])],1)],1),a("FormItem",{attrs:{label:"所属权限组"}},[a("RadioGroup",{model:{value:t.formValidate.groupId,callback:function(e){t.$set(t.formValidate,"groupId",e)},expression:"formValidate.groupId"}},t._l(t.groupList,(function(e,n){return a("Radio",{key:n,attrs:{label:e.groupId}},[t._v(t._s(e.groupName))])})),1)],1)],1)],1)],1),a("div"),a("div",{staticClass:"ivu-mt ivu-text-right"},[a("Button",{on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("取消")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)],1),a("chooseDepartmentAndJob",{ref:"DepartmentAndJob",on:{onSubmit:t.onSubmit}}),a("chooseLeader",{ref:"leader",on:{onSubmit:t.onSubmitLeader}})],1)},i=[],o=(a("8e6e"),a("456d"),a("ac6a"),a("7f7f"),a("c5f6"),a("bd86")),r=(a("3b37"),a("2f62")),s=a("580a"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,title:"选择部门和职位",width:600},on:{"on-cancel":function(e){return t.handleReset()}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.loading?t._e():a("Tree",{attrs:{data:t.sectionList,render:t.renderContent}}),t.loading?a("div",[a("Spin",{attrs:{size:"large"}})],1):t._e(),a("template",{slot:"footer"},[a("Form",{attrs:{inline:""}},[a("Form",{ref:"formCustom",attrs:{"label-width":80}},[a("FormItem",{attrs:{label:"已选择"}},[a("Input",{attrs:{readonly:""},model:{value:t.section.title,callback:function(e){t.$set(t.section,"title",e)},expression:"section.title"}})],1),a("FormItem",{attrs:{label:"职位"}},[a("Select",{model:{value:t.positionId,callback:function(e){t.positionId=e},expression:"positionId"}},t._l(t.empPosition,(function(e){return a("Option",{key:e.basicsId,attrs:{value:e.basicsId}},[t._v("\n                "+t._s(e.name))])})),1)],1)],1),a("Form",{attrs:{inline:""}},[a("FormItem",{attrs:{label:""}},[a("Icon",{attrs:{type:"ios-folder-outline"}}),t._v("校区\n              ")],1),a("FormItem",{attrs:{label:""}},[a("Icon",{attrs:{type:"ios-paper-outline"}}),t._v("部门\n              ")],1)],1)],1),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit()}}},[t._v("确定")])],1)],2)},c=[],d=a("9411");function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={components:{},props:{},data:function(){return{loading:!0,showModal:!1,positionId:"",section:{},sectionList:[]}},computed:u({},Object(r["e"])("admin/global",["empPosition"])),watch:{},methods:{DrawerToShow:function(t){var e=this;this.showModal=!0,Object(d["E"])({campusId:t}).then((function(t){e.sectionList=t.data.list,e.loading=!1}))},handleReset:function(){this.showModal=!1},handleSubmit:function(){var t=this,e={};this.empPosition.map((function(a){a.basicsId===t.positionId&&(e=a)})),0!==Object.keys(this.section).length?0!==Object.keys(e).length?(this.showModal=!1,this.$emit("onSubmit",{section:this.section,position:e})):this.$Message.info("请选择职位"):this.$Message.info("请选择部门")},treeClick:function(t){0===t.isCampus?this.section=t:this.section={}},renderContent:function(t,e){var a,n=this,i=(e.root,e.node,e.data);return a=1===i.isCampus?t("span",{on:{click:function(){n.treeClick(i),i.expand?n.$set(i,"expand",!1):n.$set(i,"expand",!0)}}},[t("Icon",{props:{type:"ios-folder-outline"},style:{marginRight:"8px",cursor:"pointer"}}),t("span",{style:{cursor:"pointer"}},i.title)]):0===i.isCampus?t("span",{on:{click:function(){n.treeClick(i),i.expand?n.$set(i,"expand",!1):n.$set(i,"expand",!0)}}},[t("Icon",{props:{type:"ios-paper-outline"},style:{marginRight:"8px",cursor:"pointer"}}),t("span",{style:{cursor:"pointer"}},i.title)]):t("span",{on:{click:function(){n.treeClick(i)}}},[t("span",{style:{cursor:"pointer"}},i.title)]),a}},mounted:function(){},beforeDestroy:function(){},created:function(){}},p=f,h=a("2877"),b=Object(h["a"])(p,l,c,!1,null,null,null),g=b.exports,v=g,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,title:"选择职工",width:600},on:{"on-cancel":function(e){return t.handleReset()}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.loading?t._e():a("Tree",{attrs:{data:t.sectionList,render:t.renderContent}}),t.loading?a("div",[a("Spin",{attrs:{size:"large"}})],1):t._e(),a("template",{slot:"footer"},[a("Form",{attrs:{inline:""}},[a("Form",{ref:"formCustom",attrs:{"label-width":80}},[a("FormItem",{attrs:{label:"已选择"}},[a("Input",{attrs:{readonly:""},model:{value:t.section.title,callback:function(e){t.$set(t.section,"title",e)},expression:"section.title"}})],1)],1)],1),a("Form",{attrs:{inline:""}},[a("FormItem",{attrs:{label:""}},[a("Icon",{attrs:{type:"ios-folder-outline"}}),t._v("校区\n            ")],1),a("FormItem",{attrs:{label:""}},[a("Icon",{attrs:{type:"ios-paper-outline"}}),t._v("部门\n            ")],1)],1),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit()}}},[t._v("确定")])],1)],2)},y=[],D={components:{},props:{},data:function(){return{loading:!0,sectionList:[],showModal:!1,positionId:"",section:{},empPosition:[]}},computed:{},watch:{},methods:{DrawerToShow:function(){var t=this;this.showModal=!0,this.loading=!0,Object(s["listType"])({type:"campus",status:0}).then((function(e){t.sectionList=e.data,t.loading=!1}))},handleReset:function(){this.showModal=!1},handleSubmit:function(){this.section.userId?(this.showModal=!1,this.$emit("onSubmit",{section:this.section})):this.$Message.error("请选择学员")},treeClick:function(t){console.log(t),void 0===t.isCampus?this.section=t:this.section={}},renderContent:function(t,e){var a,n=this,i=(e.root,e.node,e.data);return a=1===i.isCampus?t("span",{on:{click:function(){i.expand?n.$set(i,"expand",!1):n.$set(i,"expand",!0)}}},[t("Icon",{props:{type:"ios-folder-outline"},style:{marginRight:"8px",cursor:"pointer"}}),t("span",{style:{cursor:"pointer"}},i.title)]):0===i.isCampus?t("span",{on:{click:function(){i.expand?n.$set(i,"expand",!1):n.$set(i,"expand",!0)}}},[t("Icon",{props:{type:"ios-paper-outline"},style:{marginRight:"8px",cursor:"pointer"}}),t("span",{style:{cursor:"pointer"}},i.title)]):this.section.title===i.title?t("span",{on:{click:function(){n.treeClick(i)}}},[t("span",{style:{cursor:"pointer",color:"#2db7f5"}},i.title)]):t("span",{on:{click:function(){n.treeClick(i)}}},[t("span",{style:{cursor:"pointer"}},i.title)]),a}},mounted:function(){console.log(this.empPosition)},beforeDestroy:function(){},created:function(){}},w=D,S=Object(h["a"])(w,I,y,!1,null,null,null),x=S.exports,k=x;function C(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function T(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?C(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):C(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var V={components:{chooseDepartmentAndJob:v,chooseLeader:k},props:{},data:function(){return{erTitle:"",groupList:[],mode:"add",modal:!1,userId:"",leaveTime:"",userSatus:"0",formValidate:{userRealName:"",userNickName:"",userSex:"",idCard:"",userMobile:"",sectionAndPosition:[],bankCard:"",userType:"",userGroupId:"",userDepartId:"",classIds:"",subjectIds:"",leaderId:"",leaderName:"",userEmail:"",userTel:"",entryTime:"",workerType:1,bindingTime:"",userQrcode:"",adminId:"",adminAccount:"",adminPwd:"",adminStatus:"",groupId:"",sectionIds:"",isAffairs:1},ruleValidate:{userRealName:[{required:!0,message:"请输入姓名",trigger:"blur"}]}}},computed:T({},Object(r["e"])("admin/global",["empGrade","classTerm","classType","shiftGrade","subject","shiftCat","yearList","chargeinTypeList","courseTypeList"])),methods:{DrawerToShow:function(t,e,a){var n=this;console.log(t,"f"),this.mode=t,this.erTitle="add"===t?"新增":"编辑",e?this.staffInfo(e.userId):this.formValidate={userRealName:"",userNickName:"",userSex:"",idCard:"",userMobile:"",sectionAndPosition:[],bankCard:"",userType:"",userGroupId:"",userDepartId:"",classIds:"",subjectIds:"",leaderId:"",userEmail:"",userTel:"",entryTime:"",workerType:1,bindingTime:"",userQrcode:"",adminId:"",adminAccount:"",adminPwd:"",adminStatus:"",groupId:"",campusId:a,leaderName:"",isAffairs:1},this.modal=!0,Object(s["l"])({}).then((function(t){n.groupList=t.data}))},setUserName:function(){this.formValidate.adminAccount=this.formValidate.userRealName},staffInfo:function(t){var e=this;this.userId=t,Object(s["u"])({userId:t}).then((function(t){e.formValidate={leaderName:t.data.leaderName,userRealName:t.data.userRealName,userNickName:t.data.userNickName,userSex:t.data.userSex,idCard:t.data.idCard,userMobile:t.data.userMobile,sectionAndPosition:t.data.sectionAndPosition,bankCard:t.data.bankCard,userType:t.data.userType,userGroupId:t.data.userGroupId,userDepartId:t.data.userDepartId,classIds:t.data.classIds,subjectIds:t.data.subjectIds,leaderId:t.data.leaderId,userEmail:t.data.userEmail,userTel:t.data.userTel,entryTime:t.data.entryTime,workerType:t.data.workerType,bindingTime:t.data.bindingTime,userQrcode:t.data.userQrcode,adminId:t.data.adminId,adminAccount:t.data.adminAccount,adminPwd:t.data.adminPwd,adminStatus:t.data.adminStatus,groupId:t.data.groupId,sectionIds:t.data.sectionIds,campusId:t.data.campusId,isAffairs:t.data.isAffairs},e.formValidate.classIds=e.formValidate.classIds.map(Number),e.formValidate.subjectIds=e.formValidate.subjectIds.map(Number),e.userSatus=t.data.userSatus,e.leaveTime=t.data.leaveTime+"<br/>"+t.data.leaveName+"<br/>"+t.data.leaveText}))},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){console.log(JSON.stringify(e.formValidate)),t&&("add"===e.mode?Object(s["v"])(e.formValidate).then((function(t){e.handleCancel(),e.$Message.success("新增成功"),e.$emit("onSubmit")})):Object(s["B"])(Object.assign({userId:e.userId},e.formValidate)).then((function(t){e.handleCancel(),e.$Message.success("修改成功"),e.$emit("onSubmit")})))}))},handleReset:function(t){this.handleCancel(),this.$refs[t].resetFields()},handleCancel:function(){this.modal=!1},handleClear:function(t){this.formValidate.sectionAndPosition.splice(t,1)},choose:function(){this.$refs.DepartmentAndJob.DrawerToShow(this.formValidate.campusId)},onSubmit:function(t){console.log(t,"ff");var e=-1;this.formValidate.sectionAndPosition.forEach((function(a,n){t.section.sectionId===a.sectionId&&(e=n)})),-1!==e?this.formValidate.sectionAndPosition.splice(e,1,{sectionId:t.section.sectionId,sectionName:t.section.title,positionId:t.position.basicsId,positionName:t.position.name}):this.formValidate.sectionAndPosition.push({sectionId:t.section.sectionId,sectionName:t.section.title,positionId:t.position.basicsId,positionName:t.position.name}),console.log(this.formValidate.sectionAndPosition)},chooseLeader:function(){this.$refs.leader.DrawerToShow()},handleClearLeader:function(){this.formValidate.leaderId="",this.formValidate.leaderName="",this.formValidate.campusId=""},onSubmitLeader:function(t){this.formValidate.leaderId=t.section.userId,this.formValidate.leaderName=t.section.title}},mounted:function(){},watch:{}},O=V,_=Object(h["a"])(O,n,i,!1,null,null,null),j=_.exports;e["a"]=j},f264:function(t,e,a){},f66a:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjZCODY5RTNGMUI5MTFFQTg4MUNFRjZCRDRDQURGN0EiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjZCODY5RTJGMUI5MTFFQTg4MUNFRjZCRDRDQURGN0EiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCODk0QURGOTRFMDcxMUU5QTQxM0U1RjNBRUYwMkRENSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCODk0QURGQTRFMDcxMUU5QTQxM0U1RjNBRUYwMkRENSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvihNHYAAAUQSURBVHja7N2NbeJIAIBRc9oGaIEWsiWQEpISSAmhhKSEUMJSAinhKOEo4VIC69kbJMIyPthgzwy8J6GVspEyOJ/twX8ZbbfbBq7FSNAIGgQNggZBI2gQNAgaBA2CRtAgaBA0CBoEjaBB0CBoEDQIGkGDoEHQIGgQNIIGQYOgQdAgaAQNggZBg6BB0AgaBA2CBkEjaEsBQYOgQdAgaAQNggZBg6BB0AgaBA2CBkGDoBE0CBoEDYIGQSNoEDQIGgoP+q59jQt7v+vRaPRxyje2y6WX8bc//73vN9nH2FPjLm2D2GfQq/Y1LSzo+1ODapdL3+PfhBUsvt7bca0vGHSfY//YG/evscevFeGbnVQ2k/h6iBGGOBZt2IvCxz2OK8v+ChPGvIxxZ/WXrooRpglvbdj/tK9pZWOfxT3yKq6kgubTlnvVRv1c4djDivh3DPwmphy7+VcuHxnHf+4HtZc26nE7BZlnXvbnjjt879veVOSqgw4L9P7g03NNW6BwlOT+Ah/apjGUh/hvynP7vZsLzau/PPZ49ORub+xdob/FlWg56G8oHOXo6RV2m4dWh99XqtT4e/g508TP2vk3bKkLHfsszvk7x95jY7+9zKEzC4cR45Zz3rELfyl07GHP8b1jKzz42AVdThyvHVHPzt1KD/y55LFjvjxrBjzBJujyok4dy30ofPhPHR86Z4K+Xa+Jr9dwbHrecaRE0Lc6p27+Oy1+aFLB8FNjnwr6tq1zbuW+aJn4cDgWtKBrtMk57RA0QwVtygGCvg7T0rZ8ZxgLmlPmm7XMqyc5pyKCLsx2u01d9LOueGUU9A1LXQe9qGDsYUV8yLkyCrqsrfNzYgu3OPXm3sxSp7jfBX17MYcYjl2ZFkKeV/AW7jr2LoNdEz30Bf6Twzc9wDXR6yEeHfCFkMdxmaRimFewdQ6/1x+Juf9myClHjqCHvrZ33hRwN/KRkHd3fD836UNd8wruAp92xNwMvXfxGIMzV8gL3Ly6u4Xp/y42eio55ngb2XPTfeHRshn4FixBl7eHWceY1wXFu7tRdrciTk9YIX+9j6HHKuhyhLnma49b5XDv4nbA9/LUZHii0rcMv7Shd6O1nJAYxynNuJJDdCnh88pjk+nxYDmC/nRHRmWPMeg76DAnDfcPhinHsrLx7363Wef9phzD72Eme/PQVNg/YtQ1nB3cPdOuiLEK+syg442sl/igFcKdNenDdm/xITMlHHLcf+rS4dNHi5oeCTqTOE9+baMNW7ZVc/yUd4j6+4Xm1O+XeOrTkRWzqOXq1HcZYd836RtjZ5aSoGuM+jHx34IWdJVRr5vjZ9Um8cQGgq5O6lDd1KIRdI1baUEL+uocO0w3tlgEXatjRzvMoQV9VUEj6OtS8POhBU2n1NWBph2Cviq20IK+qi30xKIRdHU6LkQy5RD0VW2lbaEFXa0PW+g/cwsPmvkUSiV3gYSzhb+d7g6PDij5oTm3GvRL5lBqCLrrzzoI2pTjKubQph2CrlM7rdg0mf88mqDpY3p0aBwfiE6GOfSywPnexxfHP+Qdzovmzy9Uyj32fHu30u7aBUGDoBE0CBoEDYIGQSNoEDQIGgSNoEHQIGgQNAgaQYOgQdAgaBA0ggZBg6BB0CBoBA2CBkGDoEHQCBoEDYIGQYOgETQIGgQNggZBI2gQNAgaBI2gBY2gQdAgaBA0ggZBg6BB0CBoBA2CBkGDoEHQCBoEDbn9FGAAfjjSptwWXGgAAAAASUVORK5CYII="},f847:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{padding:"10px 0",display:"flex","justify-content":"space-between"}},[a("Card",{staticStyle:{width:"49%"}},[a("Tree",{attrs:{data:t.treeList,render:t.renderContent,"empty-text":""}}),t.treeLoading?t._e():a("div",{staticClass:"demo-spin-container"},[a("Spin",{attrs:{size:"large",fix:""}})],1)],1),a("Card",{staticStyle:{width:"49%"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"父栏目"}}),a("FormItem",{attrs:{label:"重要"}},[t._v("\n          非技术人员，请不要操作本功能\n        ")]),a("FormItem",{attrs:{label:"名称",prop:"menuName"}},[a("Input",{attrs:{placeholder:"请输入菜单名称"},model:{value:t.formValidate.menuName,callback:function(e){t.$set(t.formValidate,"menuName",e)},expression:"formValidate.menuName"}})],1),a("FormItem",{attrs:{label:"路径",prop:"menuUrl"}},[a("Input",{attrs:{placeholder:"请输入菜单路径"},model:{value:t.formValidate.menuUrl,callback:function(e){t.$set(t.formValidate,"menuUrl",e)},expression:"formValidate.menuUrl"}})],1),a("FormItem",{attrs:{label:"接口地址",prop:"interface"}},[a("Input",{attrs:{placeholder:"请输入菜单接口地址"},model:{value:t.formValidate.interface,callback:function(e){t.$set(t.formValidate,"interface",e)},expression:"formValidate.interface"}})],1),a("FormItem",{attrs:{label:"图标"}},[a("uploadImgCom",{attrs:{picArr:{pic:t.formValidate.menuIcon,picName:t.formValidate.menuIcon}},on:{uploadSuccess:t.handleSuccess}})],1),a("FormItem",{attrs:{label:"类别"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[[a("Radio",{attrs:{label:"修改节点"}}),a("Radio",{attrs:{label:"添加子节点"}}),a("Radio",{attrs:{label:"添加同级节点"}}),a("Radio",{attrs:{label:"删除节点"}})]],2)],1),a("Divider",[t._v("三级按钮参数")]),a("FormItem",{attrs:{label:"按钮名称"}},[a("Input",{attrs:{placeholder:"请输入按钮名称"},model:{value:t.formValidate.btnTitle,callback:function(e){t.$set(t.formValidate,"btnTitle",e)},expression:"formValidate.btnTitle"}})],1),a("FormItem",{attrs:{label:"按钮样式"}},[a("Input",{attrs:{placeholder:"请输入按钮样式"},model:{value:t.formValidate.btnClass,callback:function(e){t.$set(t.formValidate,"btnClass",e)},expression:"formValidate.btnClass"}})],1),a("FormItem",{attrs:{label:"按钮类型"}},[a("Input",{attrs:{placeholder:"请输入按钮类型"},model:{value:t.formValidate.btnType,callback:function(e){t.$set(t.formValidate,"btnType",e)},expression:"formValidate.btnType"}})],1),a("FormItem",{attrs:{label:"按钮事件"}},[a("Input",{attrs:{placeholder:"请输入按钮事件"},model:{value:t.formValidate.btnHandle,callback:function(e){t.$set(t.formValidate,"btnHandle",e)},expression:"formValidate.btnHandle"}})],1),a("FormItem",{attrs:{label:"事件传参"}},[a("Input",{attrs:{placeholder:"请输入事件传参"},model:{value:t.formValidate.btnHandleParams,callback:function(e){t.$set(t.formValidate,"btnHandleParams",e)},expression:"formValidate.btnHandleParams"}})],1),a("FormItem",{attrs:{label:"排序"}},[a("Input",{attrs:{placeholder:"请输入菜单排序",type:"number"},model:{value:t.formValidate.sort,callback:function(e){t.$set(t.formValidate,"sort",e)},expression:"formValidate.sort"}})],1),a("FormItem",{attrs:{label:"是否表格"}},[a("RadioGroup",{model:{value:t.formValidate.btnIsTable,callback:function(e){t.$set(t.formValidate,"btnIsTable",e)},expression:"formValidate.btnIsTable"}},[a("Radio",{attrs:{label:1}},[t._v("是")]),a("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("FormItem",{attrs:{label:"是否隐藏"}},[a("RadioGroup",{model:{value:t.formValidate.isHidden,callback:function(e){t.$set(t.formValidate,"isHidden",e)},expression:"formValidate.isHidden"}},[a("Radio",{attrs:{label:1}},[t._v("是")]),a("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit()}}},[t._v("提交")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v("重置")])],1)],1)],1)],1)])},i=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=(a("55dd"),a("3b2b"),a("580a")),s=a("40cb");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={components:{uploadImgCom:s["a"]},data:function(){var t=this,e=function(e,a,n){var i=new RegExp(/^[0-9]+$/),o=i.test(t.formValidate.menuSort);o?n():n(new Error("菜单排序必须为正整数"))};return{treeLoading:!1,type:"添加根节点",parentId:0,menuId:0,formValidate:{menuId:"",parentId:0,menuName:"",level:"",menuUrl:"",menuIcon:"",interface:"",menuSort:"",btnIsTable:"",btnTitle:"",btnClass:"",btnType:"",btnHandle:"",btnHandleParams:"",isHidden:1,sort:1},ruleValidate:{menuName:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],menuUrl:[{required:!0,message:"请输入菜单路径",trigger:"blur"}],menuSort:[{required:!0,validator:e,trigger:"blur"}]},treeList:[]}},methods:{handleSuccess:function(t){this.formValidate.menuIcon=t.pic},handleSelect:function(t){if(this.handleReset(),0===t.length)this.type="添加根节点",this.formValidate={parentId:0,menuName:"",level:"",menuUrl:"",menuIcon:"",interface:"",menuSort:"",btnIsTable:"",btnTitle:"",btnClass:"",btnType:"",btnHandle:"",btnHandleParams:"",isHidden:1,sort:1};else{this.type="修改节点";var e=t.parentId,a=t.menuId,n=t.menuName,i=t.level,o=t.menuUrl,r=t.menuIcon,s=t.menuSort,l=t.btnTitle,c=t.btnClass,d=t.btnType,m=t.btnHandle,u=t.btnHandleParams,f=t.btnIsTable,p=t.isHidden,h=t.sort,b=t.interface;this.formValidate={parentId:e,menuName:n,menuId:a,level:i,menuUrl:o,interface:b,menuIcon:r,menuSort:s,btnTitle:l,btnClass:c,btnType:d,btnHandle:m,btnHandleParams:u,btnIsTable:f,isHidden:p,sort:h},this.parentId=e,this.menuId=a}},handleSubmit:function(){var t=this;this.formValidate.type=1,"删除节点"!==this.type?this.$refs["formValidate"].validate((function(e){e&&("修改节点"===t.type?(t.formValidate.menuId=t.menuId,Object(r["k"])(c({},t.formValidate)).then((function(e){t.$Message.success("修改成功"),t.getList()}))):("添加根节点"!==t.type&&(delete t.formValidate.menuId,"添加子节点"===t.type?t.formValidate.parentId=t.menuId:"添加同级节点"===t.type&&(t.formValidate.parentId=t.parentId)),Object(r["b"])(c({},t.formValidate)).then((function(e){t.$Message.success("添加成功"),t.getList()}))))})):Object(r["h"])({menuId:this.formValidate.menuId}).then((function(e){t.$Message.success("删除成功"),t.getList()}))},handleReset:function(){this.$refs["formValidate"].resetFields()},setIcon:function(t){this.formValidate.menuIcon=t},getList:function(){var t=this;this.formValidate={parentId:0,menuName:"",level:"",menuUrl:"",menuIcon:"",interface:"",menuSort:"",btnIsTable:"",btnTitle:"",btnClass:"",btnType:"",btnHandle:"",btnHandleParams:"",isHidden:1,sort:1},Object(r["n"])({type:1}).then((function(e){var a=e.data.list,n=function e(a){return a.map((function(a){return t.menuId===a.menuId&&(a.selected=!0),a.children&&0!==a.children.length&&e(a.children),a}))};n(a),t.treeList=a,t.treeLoading=!0}))},renderContent:function(t,e){var a=this,n=(e.root,e.node,e.data);return t("span",{style:{display:"inline-block",width:"100%"},on:{click:function(){a.handleSelect(n)}}},[t("span",[t("span",n.title)]),t("span",{style:{display:"inline-block",float:"right",marginRight:"32px"}})])}},created:function(){},mounted:function(){this.getList()}},m=d,u=(a("7e1d"),a("2877")),f=Object(u["a"])(m,n,i,!1,null,"63c2864e",null);e["default"]=f.exports},fc9e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{padding:"10px 0",display:"flex","justify-content":"space-between"}},[a("Card",{staticStyle:{width:"49%"}},[a("Tree",{attrs:{data:t.treeList,render:t.renderContent,"empty-text":""}}),t.treeLoading?t._e():a("div",{staticClass:"demo-spin-container"},[a("Spin",{attrs:{size:"large",fix:""}})],1)],1),a("Card",{staticStyle:{width:"49%"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"父栏目"}}),a("FormItem",{attrs:{label:"重要"}},[t._v("\n          非技术人员，请不要操作本功能\n        ")]),a("FormItem",{attrs:{label:"名称",prop:"menuName"}},[a("Input",{attrs:{placeholder:"请输入菜单名称"},model:{value:t.formValidate.menuName,callback:function(e){t.$set(t.formValidate,"menuName",e)},expression:"formValidate.menuName"}})],1),a("FormItem",{attrs:{label:"路径",prop:"menuUrl"}},[a("Input",{attrs:{placeholder:"请输入菜单路径"},model:{value:t.formValidate.menuUrl,callback:function(e){t.$set(t.formValidate,"menuUrl",e)},expression:"formValidate.menuUrl"}})],1),a("FormItem",{attrs:{label:"接口地址",prop:"interface"}},[a("Input",{attrs:{placeholder:"请输入菜单接口地址"},model:{value:t.formValidate.interface,callback:function(e){t.$set(t.formValidate,"interface",e)},expression:"formValidate.interface"}})],1),a("FormItem",{attrs:{label:"图标"}},[a("uploadImgCom",{attrs:{picArr:{pic:t.formValidate.menuIcon,picName:t.formValidate.menuIcon}},on:{uploadSuccess:t.handleSuccess}})],1),a("FormItem",{attrs:{label:"类别"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[[a("Radio",{attrs:{label:"修改节点"}}),a("Radio",{attrs:{label:"添加子节点"}}),a("Radio",{attrs:{label:"添加同级节点"}}),a("Radio",{attrs:{label:"删除节点"}})]],2)],1),a("Divider",[t._v("三级按钮参数")]),a("FormItem",{attrs:{label:"按钮名称"}},[a("Input",{attrs:{placeholder:"请输入按钮名称"},model:{value:t.formValidate.btnTitle,callback:function(e){t.$set(t.formValidate,"btnTitle",e)},expression:"formValidate.btnTitle"}})],1),a("FormItem",{attrs:{label:"按钮样式"}},[a("Input",{attrs:{placeholder:"请输入按钮样式"},model:{value:t.formValidate.btnClass,callback:function(e){t.$set(t.formValidate,"btnClass",e)},expression:"formValidate.btnClass"}})],1),a("FormItem",{attrs:{label:"按钮类型"}},[a("Input",{attrs:{placeholder:"请输入按钮类型"},model:{value:t.formValidate.btnType,callback:function(e){t.$set(t.formValidate,"btnType",e)},expression:"formValidate.btnType"}})],1),a("FormItem",{attrs:{label:"按钮事件"}},[a("Input",{attrs:{placeholder:"请输入按钮事件"},model:{value:t.formValidate.btnHandle,callback:function(e){t.$set(t.formValidate,"btnHandle",e)},expression:"formValidate.btnHandle"}})],1),a("FormItem",{attrs:{label:"事件传参"}},[a("Input",{attrs:{placeholder:"请输入事件传参"},model:{value:t.formValidate.btnHandleParams,callback:function(e){t.$set(t.formValidate,"btnHandleParams",e)},expression:"formValidate.btnHandleParams"}})],1),a("FormItem",{attrs:{label:"排序"}},[a("Input",{attrs:{placeholder:"请输入菜单排序",type:"number"},model:{value:t.formValidate.sort,callback:function(e){t.$set(t.formValidate,"sort",e)},expression:"formValidate.sort"}})],1),a("FormItem",{attrs:{label:"是否表格"}},[a("RadioGroup",{model:{value:t.formValidate.btnIsTable,callback:function(e){t.$set(t.formValidate,"btnIsTable",e)},expression:"formValidate.btnIsTable"}},[a("Radio",{attrs:{label:1}},[t._v("是")]),a("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("FormItem",{attrs:{label:"是否隐藏"}},[a("RadioGroup",{model:{value:t.formValidate.isHidden,callback:function(e){t.$set(t.formValidate,"isHidden",e)},expression:"formValidate.isHidden"}},[a("Radio",{attrs:{label:1}},[t._v("是")]),a("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit()}}},[t._v("提交")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v("重置")])],1)],1)],1)],1)])},i=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=(a("55dd"),a("3b2b"),a("580a")),s=a("40cb");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={components:{uploadImgCom:s["a"]},data:function(){var t=this,e=function(e,a,n){var i=new RegExp(/^[0-9]+$/),o=i.test(t.formValidate.menuSort);o?n():n(new Error("菜单排序必须为正整数"))};return{treeLoading:!1,type:"添加根节点",parentId:0,menuId:0,formValidate:{menuId:"",parentId:0,menuName:"",level:"",menuUrl:"",menuIcon:"",interface:"",menuSort:"",btnIsTable:"",btnTitle:"",btnClass:"",btnType:"",btnHandle:"",btnHandleParams:"",isHidden:1,sort:1},ruleValidate:{menuName:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],menuUrl:[{required:!0,message:"请输入菜单路径",trigger:"blur"}],menuSort:[{required:!0,validator:e,trigger:"blur"}]},treeList:[]}},methods:{handleSuccess:function(t){this.formValidate.menuIcon=t.pic},handleSelect:function(t){if(this.handleReset(),0===t.length)this.type="添加根节点",this.formValidate={parentId:0,menuName:"",level:"",menuUrl:"",menuIcon:"",interface:"",menuSort:"",btnIsTable:"",btnTitle:"",btnClass:"",btnType:"",btnHandle:"",btnHandleParams:"",isHidden:1,sort:1};else{this.type="修改节点";var e=t.parentId,a=t.menuId,n=t.menuName,i=t.level,o=t.menuUrl,r=t.menuIcon,s=t.menuSort,l=t.btnTitle,c=t.btnClass,d=t.btnType,m=t.btnHandle,u=t.btnHandleParams,f=t.btnIsTable,p=t.isHidden,h=t.sort,b=t.interface;this.formValidate={parentId:e,menuName:n,menuId:a,level:i,menuUrl:o,interface:b,menuIcon:r,menuSort:s,btnTitle:l,btnClass:c,btnType:d,btnHandle:m,btnHandleParams:u,btnIsTable:f,isHidden:p,sort:h},this.parentId=e,this.menuId=a}},handleSubmit:function(){var t=this;this.formValidate.type=0,"删除节点"!==this.type?this.$refs["formValidate"].validate((function(e){e&&("修改节点"===t.type?(t.formValidate.menuId=t.menuId,Object(r["k"])(c({},t.formValidate)).then((function(e){t.$Message.success("修改成功"),t.getList()}))):("添加根节点"!==t.type&&(delete t.formValidate.menuId,"添加子节点"===t.type?t.formValidate.parentId=t.menuId:"添加同级节点"===t.type&&(t.formValidate.parentId=t.parentId)),Object(r["b"])(c({},t.formValidate)).then((function(e){t.$Message.success("添加成功"),t.getList()}))))})):Object(r["h"])({menuId:this.formValidate.menuId}).then((function(e){t.$Message.success("删除成功"),t.getList()}))},handleReset:function(){this.$refs["formValidate"].resetFields()},setIcon:function(t){this.formValidate.menuIcon=t},getList:function(){var t=this;this.formValidate={parentId:0,menuName:"",level:"",menuUrl:"",menuIcon:"",interface:"",menuSort:"",btnIsTable:"",btnTitle:"",btnClass:"",btnType:"",btnHandle:"",btnHandleParams:"",isHidden:1,sort:1},Object(r["n"])({type:0}).then((function(e){var a=e.data.list,n=function e(a){return a.map((function(a){return t.menuId===a.menuId&&(a.selected=!0),a.children&&0!==a.children.length&&e(a.children),a}))};n(a),t.treeList=a,t.treeLoading=!0}))},renderContent:function(t,e){var a=this,n=(e.root,e.node,e.data);return t("span",{style:{display:"inline-block",width:"100%"},on:{click:function(){a.handleSelect(n)}}},[t("span",[t("span",n.title)]),t("span",{style:{display:"inline-block",float:"right",marginRight:"32px"}})])}},created:function(){},mounted:function(){this.getList()}},m=d,u=(a("cdac"),a("2877")),f=Object(u["a"])(m,n,i,!1,null,"2da8eab9",null);e["default"]=f.exports},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},fea6:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("div",[t._l(t.children,(function(e,n){return[e.btnIsTable?t._e():a("Button",{key:n,class:e.btnClass,attrs:{type:e.btnType?e.btnType:"default"},on:{click:function(a){return t.handleEvent(e.btnHandle,e.btnHandleParams)}}},[t._v(t._s(e.btnTitle))])]})),a("div",{staticClass:"ivu-mt"},[a("Table",{ref:"table",attrs:{loading:t.loading,columns:t.tableTitle,data:t.tableData,type:"seletion",stripe:""},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.row;return[t._l(t.children,(function(e,i){return[e.btnIsTable?a("Button",{key:i,class:e.btnClass,attrs:{type:e.btnType?e.btnType:"default"},on:{click:function(a){return t.handleEventTwo(e.btnHandle,e.btnHandleParams,n)}}},[t._v(t._s(e.btnTitle))]):t._e()]}))]}}])})],1)],2)]),a("editPage",{ref:"Drawer",attrs:{erTitle:t.title},on:{callback:function(e){return t.getList()}}}),a("permissionGroup",{ref:"permissionGroup",attrs:{mode:t.mode},on:{onSubmit:t.onSubmit}})],1)},i=[],o=(a("ac6a"),a("7f7f"),a("a6d3"),a("684d")),r=a("7e81"),s=a("ea45"),l=a("59a3"),c=a("10b4"),d=a("580a"),m={components:{permissionGroup:o["a"],setPermission:r["a"],addUser:s["a"],chooseMember:l["a"],editPage:c["a"]},data:function(){var t=this;return{children:[{btnTitle:"新增",btnClass:"",btnType:"primary",btnHandle:"handleAdd",btnHandleParams:"add",btnIsTable:!1},{btnTitle:"后台权限",btnClass:"marginRight-20",btnType:"primary",btnHandle:"showEditDrawer",btnHandleParams:"后台权限",btnIsTable:!0},{btnTitle:"小程序权限",btnClass:"marginRight-20",btnType:"primary",btnHandle:"showEditDrawer",btnHandleParams:"小程序权限",btnIsTable:!0},{btnTitle:"删除",btnClass:"",btnType:"error",btnHandle:"remove",btnHandleParams:"row.index",btnIsTable:!0}],showModal:!1,showModal2:!1,showModal3:!1,showChooseClass:!1,treeList:[],groupId:"",loading:!1,title:"",formValidate:{groupName:""},ruleValidate:{groupName:[{required:!0,message:"角色名称不能为空",trigger:"blur"}]},tableTitle:[{title:"角色名称",key:"groupName",minWidth:120,render:function(e,a){return e("div",[e("a",{on:{click:function(){t.handleAdd("edit",a.row)}}},a.row.groupName)])}},{title:"说明",key:"describe",minWidth:120},{title:"操作",slot:"action",align:"center",minWidth:300}],page:1,name:"",pageSize:20,tableData:[],pageination:{pageSize:10,count:0,pageSum:1,page:1},mode:""}},computed:{},watch:{},methods:{handleAdd:function(t,e){this.mode=t,this.$refs.permissionGroup.DrawerToShow(t,e,0)},onSubmit:function(){this.getList()},delete:function(){this.$Modal.confirm({title:"提示",content:"<p>确定删除吗？</p>",onOk:function(){},onCancel:function(){}})},handleChoose:function(){this.showChooseClass=!1},showEditDrawer:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.title=t,"后台权限"===t?this.$refs.Drawer.DrawerToShow(0):this.$refs.Drawer.DrawerToShow(1),this.$refs.Drawer.loadData(e)},getList:function(){var t=this;this.loading=!0,Object(d["l"])({name:this.name,page:this.page,pageSize:this.pageSize}).then((function(e){t.loading=!1,t.tableData=e.data.list}))},remove:function(t,e){var a=this;this.$Modal.confirm({title:"提示",content:"<p>确认删除</p>",onOk:function(){a.onGroupDel(e)},onCancel:function(){}})},onGroupDel:function(t){var e=this;Object(d["g"])({groupId:t.groupId}).then((function(t){e.$Message.success("删除成功"),e.getList()}))},handleEvent:function(t,e){this.$emit(t,e)},handleEventTwo:function(t,e,a){this.$emit(t,e,a)}},mounted:function(){this.getList()},beforeDestroy:function(){},created:function(){var t=this;this.children.forEach((function(e){t.$on(e.btnHandle,t[e.btnHandle])}))}},u=m,f=a("2877"),p=Object(f["a"])(u,n,i,!1,null,null,null);e["default"]=p.exports}}]);