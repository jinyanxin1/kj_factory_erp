(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["erpManagement~erpManagement0"],{"12ae":function(t,e){t.exports="data:image/gif;base64,R0lGODlhJQAlAJECAL3L2AYrTv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgACACwAAAAAJQAlAAACi5SPqcvtDyGYIFpF690i8xUw3qJBwUlSadmcLqYmGQu6KDIeM13beGzYWWy3DlB4IYaMk+Dso2RWkFCfLPcRvFbZxFLUDTt21BW56TyjRep1e20+i+eYMR145W2eefj+6VFmgTQi+ECVY8iGxcg35phGo/iDFwlTyXWphwlm1imGRdcnuqhHeop6UAAAIfkEBQoAAgAsEAACAAQACwAAAgWMj6nLXAAh+QQFCgACACwVAAUACgALAAACFZQvgRi92dyJcVJlLobUdi8x4bIhBQAh+QQFCgACACwXABEADAADAAACBYyPqcsFACH5BAUKAAIALBUAFQAKAAsAAAITlGKZwWoMHYxqtmplxlNT7ixGAQAh+QQFCgACACwQABgABAALAAACBYyPqctcACH5BAUKAAIALAUAFQAKAAsAAAIVlC+BGL3Z3IlxUmUuhtR2LzHhsiEFACH5BAUKAAIALAEAEQAMAAMAAAIFjI+pywUAIfkEBQoAAgAsBQAFAAoACwAAAhOUYJnAagwdjGq2amXGU1PuLEYBACH5BAUKAAIALBAAAgAEAAsAAAIFhI+py1wAIfkEBQoAAgAsFQAFAAoACwAAAhWUL4AIvdnciXFSZS6G1HYvMeGyIQUAIfkEBQoAAgAsFwARAAwAAwAAAgWEj6nLBQAh+QQFCgACACwVABUACgALAAACE5RgmcBqDB2MarZqZcZTU+4sRgEAIfkEBQoAAgAsEAAYAAQACwAAAgWEj6nLXAAh+QQFCgACACwFABUACgALAAACFZQvgAi92dyJcVJlLobUdi8x4bIhBQAh+QQFCgACACwBABEADAADAAACBYSPqcsFADs="},"287e":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,title:"物料详情",width:1e3},on:{"on-cancel":function(e){return t.handleReset("formData")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.loading?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),a("Row",[a("Col",[a("Table",{staticStyle:{margin:"10px 0"},attrs:{columns:t.columns,data:t.formData,border:"","show-summary":"","min-height":"200"}})],1)],1),a("template",{slot:"footer"},[a("Button",{on:{click:function(e){return t.handleReset("formData")}}},[t._v("关闭")])],1)],2)},i=[],o=a("f8b7"),r={components:{},props:{},data:function(){return{loading:!1,showModal:!1,formData:[],columns:[{title:"编号",key:"number",minWidth:100},{title:"名称",key:"name",minWidth:100},{title:"规格",key:"attr",minWidth:100},{title:"所需数量",minWidth:100,key:"count"},{title:"单位",key:"unit",minWidth:50},{title:"体积",key:"volume",minWidth:50},{title:"重量",key:"weight",minWidth:50}]}},computed:{},watch:{},methods:{handleReset:function(t){this.showModal=!1,this.formData=[]},getInfo:function(t){var e=this;console.log(t),this.showModal=!0,this.loading=!0,Object(o["b"])({id:t}).then((function(t){0===t.ret&&(e.formData=t.data.list,e.loading=!1)}))}},mounted:function(){},beforeDestroy:function(){},created:function(){}},s=r,c=(a("fcf2"),a("2877")),l=Object(c["a"])(s,n,i,!1,null,"40c1ed2b",null);e["a"]=l.exports},2887:function(t,e,a){"use strict";var n=a("4150"),i=a.n(n);i.a},3078:function(t,e,a){"use strict";var n=a("f5a3"),i=a.n(n);i.a},"40cb":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[""!=t.picArr.picName?n("div",{staticClass:"demo-upload-list"},[[n("img",{attrs:{src:t.demainUrl+t.picArr.pic}}),n("div",{staticClass:"demo-upload-list-cover"},[n("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(e){return t.handleView(t.picArr.pic)}}}),n("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(e){return t.handleRemove(e)}}})],1)]],2):t._e(),n("Upload",{directives:[{name:"show",rawName:"v-show",value:"view"!=t.status&&""==t.picArr.picName,expression:"status!='view' && picArr.picName == ''"}],ref:"upload",staticStyle:{display:"inline-block",width:"100px",height:"100px"},attrs:{name:"img","show-upload-list":!1,"on-success":t.handleSuccess,format:["jpg","jpeg","png","gif"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,type:"drag",action:t.uploadImg}},[n("Modal",{attrs:{title:"图片预览"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.visible?n("img",{staticStyle:{width:"100%"},attrs:{src:t.imgName}}):t._e()]),n("div",{staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[t.loadingImg?t._e():n("Icon",{attrs:{type:"ios-camera",size:"30"}}),t.loadingImg?n("img",{staticStyle:{display:"inline-block",width:"50px",height:"50px","margin-top":"25px"},attrs:{src:a("12ae")}}):t._e()],1)],1)],1)},i=[],o=(a("7f7f"),a("7e1e")),r=a("c276"),s={data:function(){return{loadingImg:!1,picName:"",uploadImg:o["d"],demainUrl:r["a"].cookies.get("domainUrl"),headers:{"Access-Control-Allow-Origin":"*"},visible:!1,imgName:""}},props:{status:{type:String},picArr:{type:Object}},computed:{},methods:{handleSuccess:function(t,e){this.loadingImg=!1,0==t.ret?(this.picArr.picName=t.data.imgUrl,this.picArr.pic=t.data.url,this.$emit("uploadSuccess",this.picArr)):this.$Notice.warning({title:"上传失败",desc:t.msg})},handleBeforeUpload:function(t){this.loadingImg=!0},handleFormatError:function(t){this.loadingImg=!1,this.loadingSmall=!1,this.$Notice.warning({title:"图片格式上传错误",desc:"文件 "+t.name+" 格式错误, 请选择图片格式例jpg,png,gif"})},handleMaxSize:function(t){this.loadingImg=!1,this.loadingSmall=!1,this.$Notice.warning({title:"超出文件大小限制",desc:"文件  "+t.name+"太大, 不能大于2M"})},handleRemove:function(){this.loadingImg=!0,this.$set(this.picArr,"picName",""),this.$set(this.picArr,"pic",""),this.loadingImg=!1,this.$emit("uploadSuccess",this.picArr)},handleView:function(t){this.imgName=this.demainUrl+t,this.visible=!0}},created:function(){},mounted:function(){}},c=s,l=(a("add2"),a("2877")),d=Object(l["a"])(c,n,i,!1,null,"718b7e3e",null);e["a"]=d.exports},4150:function(t,e,a){},"6d61":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("div",[t._l(t.children,(function(e,n){return[e.btnIsTable?t._e():a("Button",{key:n,class:e.btnClass,attrs:{icon:"md-add",type:e.btnType?e.btnType:"default"},on:{click:function(a){return t.handleEvent(e.btnHandle,e.btnHandleParmas)}}},[t._v(t._s(e.btnTitle))])]})),a("div",{staticClass:"ivu-mt"},[a("Alert",[a("Icon",{staticClass:"ivu-mr-8",attrs:{color:"#2d8cf0",type:"ios-alert"}}),t._v("\n          已选择 "+t._s(t.selectedArr.length)+" 项\n          "),a("a",{staticClass:"ivu-ml-8",on:{click:t.clearSelectd}},[t._v("清空")])],1)],1),a("div",[a("Table",{ref:"tableData",attrs:{columns:t.columns,data:t.data,loading:t.loading},on:{"on-selection-change":t.changeSelect}})],1),a("div",{staticClass:"ivu-mt ivu-text-center"},[a("Page",{attrs:{"page-size":t.pageInfo.pageSize,total:Number(t.pageInfo.count),current:t.pageInfo.page},on:{"on-change":t.changePage}})],1)],2)]),a("addWarehouse",{ref:"addWarehouse",on:{hideModal:function(e){e&&t.getData()}}})],1)},i=[],o=(a("ac6a"),a("915b")),r=a("2f08"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,title:0==t.formValidate.houseId?"新增仓库":"编辑仓库"},on:{"on-cancel":function(e){return t.handleReset("formValidate")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"仓库名称",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入仓库名称"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),a("FormItem",{attrs:{label:"仓库编号",prop:"number"}},[a("Input",{attrs:{placeholder:"请输入仓库编号"},model:{value:t.formValidate.number,callback:function(e){t.$set(t.formValidate,"number",e)},expression:"formValidate.number"}})],1),a("FormItem",{attrs:{label:"仓库保管员",prop:"keeper"}},[a("Input",{attrs:{placeholder:"请输入仓库保管员"},model:{value:t.formValidate.keeper,callback:function(e){t.$set(t.formValidate,"keeper",e)},expression:"formValidate.keeper"}})],1),a("FormItem",{attrs:{label:"仓库地址",prop:"address"}},[a("Input",{attrs:{placeholder:"请输入仓库地址"},model:{value:t.formValidate.address,callback:function(e){t.$set(t.formValidate,"address",e)},expression:"formValidate.address"}})],1)],1),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)],1)],1)},c=[],l=(a("7f7f"),a("9411")),d={name:"addWarehouse",props:{modal:{type:Boolean,default:!1}},components:{iCopyright:r["a"]},data:function(){return{formValidate:{id:0,name:"",address:"",keeper:"",number:""},ruleValidate:{name:[{required:!0,message:"请输入仓库名称",trigger:"blur"}]},indeterminate:!1,checkAll:!1,campusList:[],showModal:!1,loading:!1}},computed:{},watch:{},methods:{loadData:function(t,e){this.showModal=!0,"add"===e?(this.formValidate={id:0,name:"",address:"",keeper:"",number:""},this.checkAll=!1):this.formValidate=t},handleCheckAll:function(){var t=this;this.indeterminate?this.checkAll=!1:this.checkAll=!this.checkAll,this.indeterminate=!1,this.checkAll?(this.formValidate.cacampusIdsmpus=[],this.campusList.forEach((function(e){t.formValidate.campusIds.push(e.sectionId+"")}))):this.formValidate.campusIds=[]},checkAllGroupChange:function(t){t.length===this.campusList.length?(this.indeterminate=!1,this.checkAll=!0):t.length>0?(this.indeterminate=!0,this.checkAll=!1):(this.indeterminate=!1,this.checkAll=!1)},handleReset:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$refs[t].resetFields(),this.showModal=!1,this.loading=!1,this.$emit("hideModal",e)},handleSubmit:function(t){var e=this;this.loading=!0,this.$refs[t].validate((function(a){a?Object(o["c"])(e.formValidate).then((function(a){e.$Message.success("保存成功"),e.handleReset(t,!0)})).catch((function(){e.loading=!1})):(e.loading=!1,e.$Message.error("请将信息填写完整"))}))},getCampusList:function(){var t=this;Object(l["E"])({}).then((function(e){t.campusList=e.data.list}))}},mounted:function(){},beforeDestroy:function(){},created:function(){}},u=d,h=(a("2887"),a("2877")),m=Object(h["a"])(u,s,c,!1,null,"6097f811",null),p=m.exports,f=p,A={name:"erpIndexPage",components:{iCopyright:r["a"],addWarehouse:f},data:function(){var t=this;return{children:[{btnTitle:"新建",btnClass:"",btnType:"primary",btnHandle:"addShow",btnHandleParams:"",btnIsTable:!1},{btnTitle:"批量删除",btnClass:"ivu-ml-8",btnType:"",btnHandle:"handleDel",btnHandleParams:"",btnIsTable:!1},{btnTitle:"编辑",btnClass:"",btnType:"primary",btnHandle:"editInfo",btnHandleParams:"",btnIsTable:!0},{btnTitle:"删除",btnClass:"",btnType:"error",btnHandle:"handleDelOne",btnHandleParams:"",btnIsTable:!0}],modal:!1,columns:[{type:"selection",minWidth:50},{title:"名称",key:"name",minWidth:100},{title:"编号",key:"number",minWidth:100},{title:"保管员",key:"keeper",minWidth:100},{title:"地址",key:"address",minWidth:100},{title:"操作",key:"action",minWidth:120,render:function(e,a){var n=[];return t.children.forEach((function(i){i.btnIsTable&&n.push(e("Button",{props:{size:"small",type:i.btnType},style:{marginRight:"10px"},on:{click:function(){t.handleEvent(i.btnHandle,a.row)}}},i.btnTitle))})),e("div",n)}}],data:[],searchValidate:{name:"",type:0},selectedArr:[],loading:!1,pageInfo:{pageSize:10,page:1,pageSum:0,count:0}}},computed:{},watch:{},methods:{editInfo:function(t){console.log(t);var e=JSON.parse(JSON.stringify(t));this.$refs.addWarehouse.loadData(e,"edit")},addShow:function(){this.modal=!0,this.$refs.addWarehouse.loadData({},"add")},resetSearch:function(){this.searchValidate={name:"",type:0},this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},search:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},getData:function(){var t=this;this.loading=!0,this.data=[],this.selectedArr=[],Object(o["b"])({page:this.pageInfo.page,pageSize:this.pageInfo.pageSize}).then((function(e){t.loading=!1,t.data=e.data.list,t.pageInfo=e.data.pageInfo,t.selectedArr=[]}))},changeSelect:function(t){var e=this;this.selectedArr=[],console.log(t),t.forEach((function(t){e.selectedArr.push(t.id)}))},changePage:function(t){this.pageInfo.page=t,this.getData()},clearSelectd:function(){this.$refs.tableData.selectAll(!1),this.selectedArr=[]},handleDel:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedArr;0!==e.length?this.$Modal.confirm({title:"提示",content:"<p>确认删除</p>",onOk:function(){Object(o["a"])({houseIds:e}).then((function(e){t.$Message.success("删除成功");var a=t.pageInfo.page;if(a===t.pageInfo.pageSum){var n=t.pageInfo.pageSize,i=t.pageInfo.count,o=i-n*(a-1);o===t.selectedArr.length&&(a=1===a?1:a-1)}t.changePage(a)}))},onCancel:function(){}}):this.$Message.error("请选择仓库")},handleDelOne:function(t){var e=[];e.push(t.id),this.handleDel(e)},handleEvent:function(t,e){this.$emit(t,e)}},mounted:function(){this.resetSearch()},beforeDestroy:function(){},created:function(){var t=this;this.children.forEach((function(e){t.$on(e.btnHandle,t[e.btnHandle])}))}},g=A,b=(a("3078"),Object(h["a"])(g,n,i,!1,null,"156136a4",null));e["default"]=b.exports},"7e1e":function(t,e,a){"use strict";a.d(e,"d",(function(){return o})),a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return c}));var n=a("c276"),i=n["a"].cookies.get("token"),o="/upload/images?token="+i,r="/upload/upload-file?token="+i,s="/staff/staff/staff_export?token="+i,c="/sales/manage/order-export?token="+i},"915b":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"r",(function(){return s})),a.d(e,"s",(function(){return c})),a.d(e,"i",(function(){return l})),a.d(e,"f",(function(){return d})),a.d(e,"h",(function(){return u})),a.d(e,"g",(function(){return h})),a.d(e,"l",(function(){return m})),a.d(e,"j",(function(){return p})),a.d(e,"k",(function(){return f})),a.d(e,"o",(function(){return A})),a.d(e,"m",(function(){return g})),a.d(e,"n",(function(){return b})),a.d(e,"t",(function(){return v})),a.d(e,"u",(function(){return k})),a.d(e,"q",(function(){return I})),a.d(e,"d",(function(){return w})),a.d(e,"p",(function(){return y})),a.d(e,"e",(function(){return C}));var n=a("b6bd");function i(t){return Object(n["a"])({url:"/purchase/ware-house/list",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/purchase/ware-house/save",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/purchase/ware-house/del",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/purchase/stock/goods-list",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/purchase/stock/stock-goods-detail",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/purchase/goods/list-category",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/purchase/goods/add-category",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/purchase/goods/edit-category",method:"post",data:t})}function h(t){return Object(n["a"])({url:"/purchase/goods/del-category",method:"post",data:t})}function m(t){return Object(n["a"])({url:"/purchase/goods/list-goods",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/purchase/goods/add-goods",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/purchase/goods/del-goods",method:"post",data:t})}function A(t){return Object(n["a"])({url:"/purchase/stock-manage/list",method:"post",data:t})}function g(t){return Object(n["a"])({url:"/purchase/stock-manage/add",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/purchase/stock-manage/detail",method:"post",data:t})}function v(t){return Object(n["a"])({url:"/purchase/stock-manage/list-query",method:"post",data:t})}function k(t){return Object(n["a"])({url:"/purchase/stock-manage/stock-statistics",method:"post",data:t})}function I(t){return Object(n["a"])({url:"/purchase/stock-manage/del",method:"post",data:t})}var w="/purchase/goods/export-goods",y="/purchase/goods/import-goods",C="/upload/template/goods.xls"},add2:function(t,e,a){"use strict";var n=a("d723"),i=a.n(n);i.a},c8e2:function(t,e,a){},d723:function(t,e,a){},f5a3:function(t,e,a){},fcf2:function(t,e,a){"use strict";var n=a("c8e2"),i=a.n(n);i.a}}]);