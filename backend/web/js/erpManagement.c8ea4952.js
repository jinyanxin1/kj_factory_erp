(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["erpManagement"],{"0658":function(t,e,a){"use strict";a.d(e,"i",(function(){return i})),a.d(e,"a",(function(){return s})),a.d(e,"v",(function(){return r})),a.d(e,"f",(function(){return l})),a.d(e,"d",(function(){return c})),a.d(e,"l",(function(){return d})),a.d(e,"c",(function(){return u})),a.d(e,"h",(function(){return m})),a.d(e,"g",(function(){return h})),a.d(e,"b",(function(){return f})),a.d(e,"e",(function(){return p})),a.d(e,"k",(function(){return g})),a.d(e,"j",(function(){return b})),a.d(e,"q",(function(){return y})),a.d(e,"p",(function(){return v})),a.d(e,"w",(function(){return I})),a.d(e,"o",(function(){return w})),a.d(e,"n",(function(){return x})),a.d(e,"s",(function(){return k})),a.d(e,"u",(function(){return O})),a.d(e,"r",(function(){return S})),a.d(e,"t",(function(){return V})),a.d(e,"m",(function(){return T}));var n=a("b6bd"),o=a("4328");function i(t){return Object(n["a"])({url:"/client/client/client_list",method:"post",data:o.stringify(t)})}function s(t){return Object(n["a"])({url:"/client/client/client_add",method:"post",data:o.stringify(t)})}function r(t){return Object(n["a"])({url:"/client/client/client_save",method:"post",data:o.stringify(t)})}function l(t){return Object(n["a"])({url:"/client/client/client_info",method:"post",data:o.stringify(t)})}function c(t){return Object(n["a"])({url:"/client/client/client_person_add",method:"post",data:o.stringify(t)})}function d(t){return Object(n["a"])({url:"/client/client/client_person_list",method:"post",data:o.stringify(t)})}function u(t){return Object(n["a"])({url:"/client/client/client_interview_add",method:"post",data:o.stringify(t)})}function m(t){return Object(n["a"])({url:"/client/client/client_interview_list",method:"post",data:o.stringify(t)})}function h(t){return Object(n["a"])({url:"/client/client/client_interview_info",method:"post",data:o.stringify(t)})}function f(t){return Object(n["a"])({url:"/client/client/client_contract_add",method:"post",data:o.stringify(t)})}function p(t){return Object(n["a"])({url:"/client/client/client_contract_list",method:"post",data:o.stringify(t)})}function g(t){return Object(n["a"])({url:"/client/client/client_shift",method:"post",data:o.stringify(t)})}function b(t){return Object(n["a"])({url:"/client/client/select",method:"post",data:o.stringify(t)})}function y(t){return Object(n["a"])({url:"/client/client/person_select",method:"post",data:o.stringify(t)})}function v(t){return Object(n["a"])({url:"/client/client/client_person_info",method:"post",data:o.stringify(t)})}function I(t){return Object(n["a"])({url:"/client/client/client_person_save",method:"post",data:o.stringify(t)})}function w(t){return Object(n["a"])({url:"/client/client/client_person_del",method:"post",data:o.stringify(t)})}function x(t){return Object(n["a"])({url:"/client/client/client_del",method:"post",data:o.stringify(t)})}var k=function(t){return Object(n["a"])({url:"/project/manage/list",method:"post",data:t})},O=function(t){return Object(n["a"])({url:"/project/manage/save",method:"post",data:t})},S=function(t){return Object(n["a"])({url:"/project/manage/info",method:"post",data:t})},V=function(t){return Object(n["a"])({url:"/project/manage/get-report-user",method:"post",data:t})},T=function(t){return Object(n["a"])({url:"/client/client/list",method:"post",data:t})}},"1ecf":function(t,e,a){"use strict";var n=a("ff03"),o=a.n(n);o.a},"20e9":function(t,e,a){"use strict";var n=a("aa7d"),o=a.n(n);o.a},2887:function(t,e,a){"use strict";var n=a("4150"),o=a.n(n);o.a},"386d":function(t,e,a){"use strict";var n=a("cb7c"),o=a("83a1"),i=a("5f1b");a("214f")("search",1,(function(t,e,a,s){return[function(a){var n=t(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,n):new RegExp(a)[e](String(n))},function(t){var e=s(a,t,this);if(e.done)return e.value;var r=n(t),l=String(this),c=r.lastIndex;o(c,0)||(r.lastIndex=0);var d=i(r,l);return o(r.lastIndex,c)||(r.lastIndex=c),null===d?-1:d.index}]}))},"39fd":function(t,e,a){},"3e41":function(t,e,a){"use strict";var n=a("9ba7"),o=a.n(n);o.a},4150:function(t,e,a){},4524:function(t,e,a){"use strict";var n=a("75a7"),o=a.n(n);o.a},"49dc":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",{staticStyle:{"margin-top":"10px"}},[a("Row",{staticStyle:{"font-weight":"bold"}},[a("Col",{attrs:{xs:12,sm:12,md:12,lg:12}},[a("span",[t._v("资产：")])]),a("Col",{staticStyle:{"text-align":"right"},attrs:{xs:12,sm:12,md:12,lg:12}},[a("span",[t._v(t._s(t.tableData.assetsAmount))])])],1)],1),a("Card",{staticStyle:{"margin-top":"10px"}},[a("Row",{staticStyle:{"font-weight":"bold",height:"40px"}},[a("Col",{attrs:{xs:12,sm:12,md:12,lg:12}},[a("span",[t._v("货币资金：")])]),a("Col",{staticStyle:{"text-align":"right"},attrs:{xs:12,sm:12,md:12,lg:12}},[a("span",[t._v(t._s(t.tableData.monetaryAmount))])])],1),t._l(t.tableData.monetaryList,(function(e,n){return a("Row",{key:n,staticStyle:{"border-bottom":"1px solid #ccc",height:"40px","line-height":"40px"}},[a("Col",{staticStyle:{"text-indent":"15px"},attrs:{xs:12,sm:12,md:12,lg:12}},[a("span",[t._v(t._s(e.account))])]),a("Col",{staticStyle:{"text-align":"right"},attrs:{xs:12,sm:12,md:12,lg:12}},[a("span",[t._v(t._s(e.amount))])])],1)}))],2),a("Card",{staticStyle:{"margin-top":"10px"}},[a("Row",{staticStyle:{"font-weight":"bold",height:"40px"}},[a("Col",{attrs:{xs:12,sm:12,md:12,lg:12}},[a("span",[t._v("应收账款：")])]),a("Col",{staticStyle:{"text-align":"right"},attrs:{xs:12,sm:12,md:12,lg:12}},[a("span",[t._v(t._s(t.tableData.receivable))])])],1),t._l(t.tableData.receivableList,(function(e,n){return a("Row",{key:n,staticStyle:{"border-bottom":"1px solid #ccc",height:"40px","line-height":"40px"}},[a("Col",{staticStyle:{"text-indent":"15px"},attrs:{xs:12,sm:12,md:12,lg:12}},[a("span",[t._v(t._s(e.account))])]),a("Col",{staticStyle:{"text-align":"right"},attrs:{xs:12,sm:12,md:12,lg:12}},[a("span",[t._v(t._s(e.amount))])])],1)}))],2),a("Card",{staticStyle:{"margin-top":"10px"}},[a("Row",{staticStyle:{"font-weight":"bold",height:"40px"}},[a("Col",{attrs:{xs:12,sm:12,md:12,lg:12}},[a("span",[t._v("负债：")])]),a("Col",{staticStyle:{"text-align":"right"},attrs:{xs:12,sm:12,md:12,lg:12}},[a("span",[t._v(t._s(t.tableData.liabilities))])])],1),t._l(t.tableData.liabilitiesList,(function(e,n){return a("Row",{key:n,staticStyle:{"border-bottom":"1px solid #ccc",height:"40px","line-height":"40px"}},[a("Col",{staticStyle:{"text-indent":"15px"},attrs:{xs:12,sm:12,md:12,lg:12}},[a("span",[t._v(t._s(e.account))])]),a("Col",{staticStyle:{"text-align":"right"},attrs:{xs:12,sm:12,md:12,lg:12}},[a("span",[t._v(t._s(e.amount))])])],1)}))],2),a("Card",{staticStyle:{"margin-top":"10px"}},[a("Row",{staticStyle:{"font-weight":"bold"}},[a("Col",{attrs:{xs:12,sm:12,md:12,lg:12}},[a("span",[t._v("净资产：")])]),a("Col",{staticStyle:{"text-align":"right"},attrs:{xs:12,sm:12,md:12,lg:12}},[a("span",[t._v(t._s(t.tableData.netAssets))])])],1)],1)],1)},o=[],i=a("a3a8"),s=a("2f08"),r={name:"financeManagement",components:{iCopyright:s["a"]},data:function(){return{searchKey:{},tableData:{}}},computed:{},watch:{},methods:{search:function(){this.pageInfo.page=1,this.pageInfo.pageSize=20,this.dataList()},dataList:function(){var t=this;Object(i["e"])({}).then((function(e){t.tableData=e.data}))}},mounted:function(){},beforeDestroy:function(){},created:function(){this.dataList()}},l=r,c=a("2877"),d=Object(c["a"])(l,n,o,!1,null,null,null);e["default"]=d.exports},"4e0f":function(t,e,a){"use strict";var n=a("bd91"),o=a.n(n);o.a},"4fe5":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("div",[a("Tabs",{attrs:{size:"default"},on:{"on-click":function(e){return t.switchTab(t.tabIndex)}},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[a("TabPane",{directives:[{name:"show",rawName:"v-show",value:2==t.goodsType,expression:"goodsType == 2"}],attrs:{label:"进货",name:"11"}}),a("TabPane",{attrs:{label:"退货",name:"21"}}),a("TabPane",{attrs:{label:"报损",name:"25"}}),a("TabPane",{attrs:{label:"领用",name:"23"}}),a("TabPane",{attrs:{label:"退领",name:"13"}}),a("TabPane",{attrs:{label:"库存调整",name:"31"}})],1)],1),a("Form",{ref:"formCustom",attrs:{"label-width":100}},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{xs:24,md:24,lg:8}},[a("FormItem",{attrs:{label:"经手人"}},[a("Input",{attrs:{type:"text",placeholder:"请输入经手人",clearable:""},model:{value:t.searchValidate.userName,callback:function(e){t.$set(t.searchValidate,"userName",e)},expression:"searchValidate.userName"}})],1)],1),5==t.tabIndex||6==t.tabIndex?a("Col",{attrs:{xs:24,md:24,lg:8}},[a("FormItem",{attrs:{label:"领取人"}},[a("Input",{attrs:{type:"text",placeholder:"请输入领取人",clearable:""},model:{value:t.searchValidate.name,callback:function(e){t.$set(t.searchValidate,"name",e)},expression:"searchValidate.name"}})],1)],1):t._e(),a("Col",{attrs:{xs:24,md:24,lg:8}},[a("FormItem",{attrs:{label:"日期"}},[a("DatePicker",{attrs:{type:"daterange","split-panels":"",options:t.dateOptions,placement:"bottom-end",placeholder:"请选择日期",value:t.searchValidate.time},on:{"on-change":t.handleChangeTime}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:5==t.tabIndex||6==t.tabIndex?24:8}},[a("FormItem",{staticStyle:{"text-align":"right"}},[a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),a("Button",{staticClass:"ivu-ml-8",on:{click:t.resetSearch}},[t._v("重置")])],1)],1)],1)],1),a("div",[t._l(t.children,(function(e,n){return[e.btnIsTable?t._e():a("Button",{key:n,class:e.btnClass,attrs:{icon:"md-add",type:e.btnType?e.btnType:"default"},on:{click:function(a){return t.handleEvent(e.btnHandle,e.btnHandleParams)}}},[t._v(t._s(e.btnTitle))])]})),a("div",{staticClass:"ivu-mt"}),a("div",[a("Table",{ref:"tableData",attrs:{"highlight-row":"",columns:t.columns,data:t.data},on:{"on-current-change":t.currentChange}})],1),a("div",{staticClass:"ivu-mt ivu-text-center"},[a("Page",{attrs:{"page-size":t.pageInfo.pageSize,total:Number(t.pageInfo.count),current:t.pageInfo.page},on:{"on-change":t.changePage}})],1),a("div",{staticClass:"ivu-mt ivu-text-center"},[a("Table",{ref:"infoTableData",attrs:{columns:t.infoColumns,data:t.infoData,"no-data-text":""}})],1)],2)],1),a("addIandeBank",{ref:"addIandeBank",on:{hideModal:function(e){t.modal=!1},handleSubmit:t.getData}})],1)},o=[],i=(a("8e6e"),a("456d"),a("bd86")),s=(a("386d"),a("c5f6"),a("ac6a"),a("915b")),r=a("2f08"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,title:t.tabIndex,width:800},on:{"on-cancel":function(e){return t.handleReset("formValidate")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[a("Row",{attrs:{type:"flex",justify:"start"}},[a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:t.tabIndex+"日期",prop:"date","label-width":110}},[a("DatePicker",{attrs:{type:"date",placeholder:"请选择"+t.tabIndex+"日期",value:t.formValidate.date,format:"yyyy-MM-dd"},on:{"on-change":t.changeData}})],1)],1),t.showArr.showSupplier?a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"供应商",prop:"supplier"}},[a("Input",{attrs:{placeholder:"请输入供应商"},model:{value:t.formValidate.supplier,callback:function(e){t.$set(t.formValidate,"supplier",e)},expression:"formValidate.supplier"}})],1)],1):t._e(),t.showArr.showUseMan?a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"领取人",prop:"borrowName"}},[a("Input",{attrs:{placeholder:"请输入领取人"},model:{value:t.formValidate.borrowName,callback:function(e){t.$set(t.formValidate,"borrowName",e)},expression:"formValidate.borrowName"}})],1)],1):t._e(),t.showArr.showCostomer?a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"客户",prop:"clientId"}},[a("Select",{attrs:{clearable:"",filterable:"",placeholder:"请选择客户"},model:{value:t.formValidate.clientId,callback:function(e){t.$set(t.formValidate,"clientId",e)},expression:"formValidate.clientId"}},t._l(t.clientList,(function(e,n){return a("Option",{key:n,attrs:{value:String(n)}},[t._v(t._s(e))])})),1)],1)],1):t._e(),t.showArr.showHouse?a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"调入仓库",prop:"inHouseId"}},[a("Select",{attrs:{clearable:"",filterable:"",placeholder:"请选择调入仓库"},model:{value:t.formValidate.inHouseId,callback:function(e){t.$set(t.formValidate,"inHouseId",e)},expression:"formValidate.inHouseId"}},t._l(t.houseList,(function(e,n){return a("Option",{key:"house-"+n,attrs:{value:e.houseId+""}},[t._v(t._s(e.name))])})),1)],1)],1):t._e(),a("Col",{attrs:{xs:24,md:24,lg:24}},[a("div",{on:{click:function(e){return t.$refs.chooseMateriel.loadData("",t.goodsType)}}},[a("a",[t._v("选择"+t._s(1==t.goodsType?"产品":"物料")+"···")])]),a("Table",{staticStyle:{margin:"10px 0"},attrs:{columns:t.columns,data:t.formValidate.list,border:"","show-summary":"","min-height":"200"}})],1),a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"备注",prop:"remark"}},[a("Input",{attrs:{placeholder:"请输入备注"},model:{value:t.formValidate.remark,callback:function(e){t.$set(t.formValidate,"remark",e)},expression:"formValidate.remark"}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"经手人",prop:"userName"}},[t._v("\n              "+t._s(t.formValidate.userName)+"\n            ")])],1)],1)],1),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)],1),a("chooseMateriel",{ref:"chooseMateriel",attrs:{houseId:t.formValidate.houseId},on:{handleChoose:t.handleChoose}})],1)},c=[],d=(a("7f7f"),a("c276")),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,title:"选择物品",width:1e3},on:{"on-cancel":function(e){return t.handleReset("formValidate")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"choose-class",class:t.isMobile?"":"wrapper"},[a("Card",{class:t.isMobile?"":"right-content"},[a("Form",{ref:"formCustom",attrs:{"label-width":100}},[a("Row",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{xs:24,md:12,lg:12}},[a("Input",{staticStyle:{width:"95%"},attrs:{type:"text",placeholder:"请输入物品名称",clearabl:""},model:{value:t.searchValidate.goodsName,callback:function(e){t.$set(t.searchValidate,"goodsName",e)},expression:"searchValidate.goodsName"}})],1),a("Col",{attrs:{xs:24,md:12,lg:12}},[a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),a("Button",{staticClass:"ivu-ml-8",on:{click:t.resetSearch}},[t._v("重置")]),t.showMore?t._e():a("a",{staticClass:"ivu-ml-8",attrs:{type:"text"},on:{click:function(e){t.showMore=!t.showMore}}},[t._v("\n              展开\n              "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),t.showMore?a("a",{staticClass:"ivu-ml-8",attrs:{type:"text"},on:{click:function(e){t.showMore=!t.showMore}}},[t._v("\n              收起\n              "),a("Icon",{attrs:{type:"ios-arrow-up"}})],1):t._e()],1)],1),t.showMore?a("Row",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{xs:24,md:12,lg:12}},[a("Select",{staticStyle:{width:"95%"},attrs:{clearable:"",filterable:"",placeholder:"请选择物品类别"},model:{value:t.searchValidate.categoryId,callback:function(e){t.$set(t.searchValidate,"categoryId",e)},expression:"searchValidate.categoryId"}},t._l(t.folderList,(function(e,n){return a("Option",{key:"category-"+n,attrs:{value:e.categoryId}},[t._v(t._s(e.categoryName))])})),1)],1)],1):t._e()],1),a("div",[a("div",[a("Table",{ref:"tableData",attrs:{columns:t.columns,data:t.data},on:{"on-selection-change":t.changeSelect}})],1),a("div",{staticClass:"ivu-mt ivu-text-center"},[a("Page",{attrs:{"page-size":t.pageInfo.pageSize,total:Number(t.pageInfo.count),current:t.pageInfo.page},on:{"on-change":t.changePage}})],1)])],1),t.isMobile?t._e():a("Card",{staticClass:"left-content"},[a("div",{staticClass:"ivu-mt",attrs:{slot:"title"},slot:"title"},[a("Alert",[a("Icon",{staticClass:"ivu-mr-8",attrs:{color:"#2d8cf0",type:"ios-alert"}}),t._v("\n          已选择 "+t._s(t.selectedArr.length)+" 项\n          "),a("a",{staticClass:"ivu-ml-8",on:{click:t.clearSelectd}},[t._v("清空")])],1)],1),t.selectedArr.length>0?a("List",{attrs:{border:""}},[a("Scroll",{staticStyle:{flex:"1"},attrs:{height:415}},t._l(t.selectedArr,(function(e,n){return a("ListItem",{key:n},[a("ListItemMeta",{attrs:{avatar:"",title:e.goodsName,description:""}}),a("template",{slot:"action"},[a("li",{on:{click:function(e){return t.delClass(n)}}},[a("Icon",{attrs:{type:"md-close-circle",size:"19"}})],1)])],2)})),1)],1):t._e()],1)],1),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("取消")])],1)])},m=[],h=a("2f62");function f(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(a,!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var g={name:"chooseGoods",components:{iCopyright:r["a"]},props:{modal:{type:Boolean,default:!1},selected:{type:Array,default:function(){return[]}},houseId:{type:Number,default:function(){return""}}},data:function(){return{columns:[{type:"selection",minWidth:50},{title:"名称",minWidth:100,render:function(t,e){return 1===Number(e.row.isCard)?t("div",{class:"i-name"},[t("div",{},e.row.goodsName),t("div",{class:"chuxu"},"储")]):t("div",[t("div",{},e.row.goodsName)])}},{title:"类别",key:"categoryName",minWidth:100},{title:"单价",key:"price",minWidth:100},{title:"单位",key:"unit",minWidth:100},{title:"库存",key:"stockNum",minWidth:100}],data:[],searchValidate:{goodsName:"",status:0,categoryId:""},showModal:!1,selectedArr:[],showMore:!1,pageInfo:{pageSize:10,page:1,pageSum:0,count:0},folderList:[]}},computed:p({},Object(h["e"])("admin/layout",["isMobile"])),watch:{},methods:{changeSelect:function(t){var e=this;this.selectedArr=[],t.forEach((function(t){e.selectedArr.push(t)}))},clearSelectd:function(){this.$refs.tableData.selectAll(!1),this.selectedArr=[]},handleReset:function(t){this.showModal=!1,this.$emit("hideModal")},handleSubmit:function(t){this.showModal=!1,this.$emit("handleChoose",this.selectedArr)},delClass:function(t){var e=this,a="";this.data.some((function(n,o){n.id===e.selectedArr[t].id&&(a=o)})),this.$refs.tableData.toggleSelect(a)},resetSearch:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.searchValidate={goodsName:"",status:0,categoryId:""},this.getData()},search:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},changePage:function(t){this.pageInfo.page=t,this.getData()},getData:function(){var t=this;this.loading=!0,this.data=[],Object(s["l"])(p({},this.pageInfo,{goodsName:this.searchValidate.goodsName,status:[1],categoryId:this.searchValidate.categoryId})).then((function(e){t.loading=!1,t.data=e.data.showList,t.pageInfo=e.data.pageInfo}))},loadData:function(){this.showModal=!0,this.selectedArr=[],this.resetSearch()},getFolderList:function(){}},mounted:function(){this.getFolderList()},beforeDestroy:function(){},created:function(){}},b=g,y=(a("cc73"),a("2877")),v=Object(y["a"])(b,u,m,!1,null,"52e984d4",null),I=v.exports,w=I,x=a("d9e1"),k=a("0658");function O(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function S(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?O(a,!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):O(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var V={name:"addIandeBank",props:{modal:{type:Boolean}},components:{iCopyright:r["a"],chooseGoods:w,chooseMateriel:x["a"]},data:function(){var t=this;this.$createElement;return{formValidate:{type:"",houseId:"",date:"",supplier:"",userName:"",remark:"",id:0,list:[],inHouseId:"",outHouseId:"",borrowName:"",clientId:""},ruleValidate:{date:[{required:!0,message:"请选择日期",trigger:"blur"}],supplier:[{required:!0,message:"请填写供应商",trigger:"blur"}],borrowName:[{required:!0,message:"请填写领取人",trigger:"blur"}],inHouseId:[{required:!0,message:"请选择调入仓库",trigger:"blur"}],clientId:[{required:!0,message:"请选择客户",trigger:"blur"}]},showModal:!1,columns:[{title:"名称",key:"goodsName",minWidth:100},{title:"单位",key:"unit",minWidth:50},{title:"数量",minWidth:100,align:"center",key:"num",render:function(e,a){return e("Input",{props:{size:"small",value:a.row.num,type:"number",min:0},on:{"on-blur":function(e){var n=Number(e.target.value);n<1&&(n=1),e.target.value=n,a.row.num=n,t.formValidate.list[a.index]=a.row}}})}},{title:"操作",key:"action",minWidth:80,align:"center",render:function(e,a){return e("Icon",{attrs:{type:"md-close-circle",size:"19",title:"删除"},on:{click:function(){t.delGoods(a.index)}}})}}],houseId:"",tabIndex:"",houseList:[],houseName:"",loading:!1,showArr:{showSupplier:!1,showHouse:!1,showUseMan:!1,showCostomer:!1},goodsType:"",clientList:[]}},computed:{},methods:{handleReset:function(t){this.$refs[t].resetFields(),this.showModal=!1,this.loading=!1,this.$emit("hideModal")},handleSubmit:function(t){var e=this;this.loading=!0,this.$refs[t].validate((function(a){if(a){if(e.formValidate.list.length<1)return e.loading=!1,void e.$Message.error("请选择物品");Object(s["m"])(S({goodsType:e.goodsType},e.formValidate)).then((function(a){e.$Message.success("保存成功"),e.handleReset(t),e.$emit("handleSubmit")})).catch((function(){e.loading=!1}))}else e.loading=!1,e.$Message.error("请将信息填写完整")}))},handleChoose:function(t){var e=this.formValidate.list,a=[];e.forEach((function(t){a.push(t.goodsId+"")})),t.forEach((function(t){var n={};-1===a.indexOf(t.id+"")&&(n.num=1,n.amount="",n.price="",n.detailId=0,n.goodsId=t.id,n.goodsName=t.name,n.unit=t.unit,e.push(n))})),this.formValidate.list=e},delGoods:function(t){this.formValidate.list.splice(t,1)},loadData:function(t,e,a,n,o,i){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";this.goodsType=s,"add"===e?this.formValidate={type:n,houseId:a,date:"",supplier:"",userName:d["a"].cookies.get("userName"),remark:"",id:0,list:[],inHouseId:"",outHouseId:"",borrowName:""}:(this.formValidate=JSON.parse(JSON.stringify(t)),console.log(this.formValidate),this.goodsType=this.formValidate.goodsType),this.showArr={showSupplier:!1,showHouse:!1,showUseMan:!1};var r="";switch(Number(n)){case 11:r="进货",this.showArr.showSupplier=!0;break;case 21:r="退货",this.showArr.showCostomer=!0;break;case 41:r="调拨",this.showArr.showHouse=!0,this.formValidate.outHouseId=a;break;case 25:r="报损";break;case 23:r="领用",this.showArr.showUseMan=!0;break;case 13:r="退领",this.showArr.showUseMan=!0;break;case 31:r="库存调整";break;default:break}this.tabIndex=r,this.houseList=o.filter((function(t){return Number(t.houseId)!==Number(a)})),this.houseName=i,this.showModal=!0},changeData:function(t){this.formValidate.date=t},getClientList:function(){var t=this;Object(k["j"])().then((function(e){t.clientList=e.data.select}))}},mounted:function(){console.log(this.user),this.getClientList()},beforeDestroy:function(){},created:function(){}},T=V,C=(a("e113"),Object(y["a"])(T,l,c,!1,null,"660934ac",null)),_=C.exports,j=_;function D(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function N(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?D(a,!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):D(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var P={name:"iandeBankPage",components:{iCopyright:r["a"],addIandeBank:j},data:function(){var t=this;return{children:[{btnTitle:"新建",btnClass:"",btnType:"primary",btnHandle:"addShow",btnHandleParams:"",btnIsTable:!1},{btnTitle:"编辑",btnClass:"",btnType:"primary",btnHandle:"editInfo",btnHandleParams:"",btnIsTable:!0},{btnTitle:"删除",btnClass:"",btnType:"error",btnHandle:"handleDel",btnHandleParams:"",btnIsTable:!0}],modal:!1,columns:[{title:"日期",minWidth:120,render:function(e,a){return e("div",[e("a",{on:{click:function(){t.editInfo(a.row)}}},a.row.date)])}},{title:"供应商",key:"supplier",minWidth:100},{title:"经手人",key:"userName",minWidth:100},{title:"备注",key:"remark",minWidth:100,render:function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.remark}},e.row.remark)])}},{title:"操作时间",key:"createTime",minWidth:100},{title:"操作",key:"action",minWidth:100,render:function(e,a){var n=[];return t.children.forEach((function(o){o.btnIsTable&&n.push(e("Button",{props:{size:"small",type:o.btnType},style:{marginRight:"10px"},on:{click:function(){t.handleEvent(o.btnHandle,a.row)}}},o.btnTitle))})),e("div",n)}}],data:[],infoColumns:[{title:"物品名称",key:"goodsName",minWidth:100},{title:"数量",key:"num",minWidth:100},{title:"单位",key:"unit",minWidth:100}],infoData:[],searchValidate:{name:"",userName:"",startTime:"",endTime:"",time:[]},goodsType:1,houseId:"",houseName:"",tabIndex:"11",dateOptions:{shortcuts:[{text:"近 7 天",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-6048e5),[e,t]}},{text:"近 1 月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-2592e6),[e,t]}},{text:"近 3 月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-7776e6),[e,t]}}]},pageInfo:{pageSize:10,page:1,pageSum:0,count:0},houseList:[]}},computed:{},watch:{},methods:{resetSearch:function(){this.searchValidate={name:"",userName:"",startTime:"",endTime:"",time:[]},this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},search:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},switchTab:function(t){var e=this;switch(this.tabIndex=t,this.columns=[{title:"日期",minWidth:120,render:function(t,a){return t("div",[t("a",{on:{click:function(){e.editInfo(a.row)}}},a.row.date)])}},{title:"经手人",key:"userName",minWidth:100},{title:"备注",key:"remark",minWidth:100,render:function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.remark}},e.row.remark)])}},{title:"操作时间",key:"createTime",minWidth:100},{title:"操作",key:"action",minWidth:100,render:function(t,a){var n=[];return e.children.forEach((function(o){o.btnIsTable&&n.push(t("Button",{props:{size:"small",type:o.btnType},style:{marginRight:"10px"},on:{click:function(){e.handleEvent(o.btnHandle,a.row)}}},o.btnTitle))})),t("div",n)}}],Number(this.tabIndex)){case 11:this.columns.splice(1,0,{title:"供应商",key:"supplier",minWidth:100});break;case 21:this.columns.splice(1,0,{title:"客户",key:"supplier",minWidth:100});break;case 41:this.columns.splice(1,0,{title:"调出仓库",key:"outHouse",minWidth:100}),this.columns.splice(2,0,{title:"调入仓库",key:"inHouse",minWidth:100});break;case 25:break;case 23:this.columns.splice(1,0,{title:"领用人",key:"borrowName",minWidth:100});break;case 13:this.columns.splice(1,0,{title:"领用人",key:"borrowName",minWidth:100});break;case 31:break;default:break}this.search()},currentChange:function(t,e){var a=this,n=this.getId(t);Object(s["n"])({type:this.tabIndex,id:n}).then((function(t){a.infoData=t.data.list||[]}))},getConfig:function(){this.houseId=1,1==this.goodsType?this.switchTab("21"):this.resetSearch()},getData:function(){var t=this;this.loading=!0,this.data=[],this.infoData=[],Object(s["o"])(N({},this.pageInfo,{},this.searchValidate,{houseId:this.houseId,goodsType:this.goodsType,type:this.tabIndex})).then((function(e){t.loading=!1,t.data=e.data.showList,t.pageInfo=e.data.pageInfo}))},changePage:function(t){this.pageInfo.page=t,this.getData()},handleChangeTime:function(t){this.searchValidate.startTime=t[0]||"",this.searchValidate.endTime=t[1]||""},editInfo:function(t){var e=this,a=this.getId(t);console.log(t),Object(s["n"])({type:this.tabIndex,id:a}).then((function(n){var o=n.data;t.list=o.list||[],t.id=a,t.type=e.tabIndex,t.houseId=e.houseId,e.$refs.addIandeBank.loadData(t,"edit",e.houseId,e.tabIndex,e.houseList,e.houseName)}))},getId:function(t){var e=0;switch(Number(this.tabIndex)){case 11:e=t.purchaseId;break;case 21:e=t.returnId;break;case 41:e=t.id;break;case 25:e=t.stockLossId;break;case 23:e=t.borrowId;break;case 13:e=t.borrowId;break;case 31:e=t.adjustmentId;break;default:break}return e},handleDel:function(t){var e=this,a=this.getId(t);this.$Modal.confirm({title:"提示",content:"<p>确认删除吗？</p>",onOk:function(){Object(s["q"])({id:a,type:e.tabIndex}).then((function(t){e.$Message.success("删除成功");var a=e.pageInfo.page;if(a===e.pageInfo.pageSum){var n=e.pageInfo.pageSize,o=e.pageInfo.count,i=o-n*(a-1);1===i&&(a=1===a?1:a-1)}e.changePage(a)}))},onCancel:function(){}})},addShow:function(){this.$refs.addIandeBank.loadData({},"add",this.houseId,this.tabIndex,this.houseList,this.houseName,this.goodsType)},handleEvent:function(t,e){this.$emit(t,e)},changeHouse:function(t){this.houseId=t.value,this.houseName=t.label,this.search(),console.log(t)}},mounted:function(){this.goodsType=Number(this.$route.query.goodsType)||2,this.getConfig()},beforeDestroy:function(){},created:function(){var t=this;this.children.forEach((function(e){t.$on(e.btnHandle,t[e.btnHandle])}))}},M=P,$=(a("4e0f"),Object(y["a"])(M,n,o,!1,null,"1f1633a1",null));e["default"]=$.exports},5597:function(t,e,a){"use strict";var n=a("b545"),o=a.n(n);o.a},5671:function(t,e,a){},"5ad4":function(t,e,a){"use strict";var n=a("7c49"),o=a.n(n);o.a},"5dbc":function(t,e,a){var n=a("d3f4"),o=a("8b97").set;t.exports=function(t,e,a){var i,s=e.constructor;return s!==a&&"function"==typeof s&&(i=s.prototype)!==a.prototype&&n(i)&&o&&o(t,i),t}},"6d41":function(t,e,a){},"6d61":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("div",[t._l(t.children,(function(e,n){return[e.btnIsTable?t._e():a("Button",{key:n,class:e.btnClass,attrs:{icon:"md-add",type:e.btnType?e.btnType:"default"},on:{click:function(a){return t.handleEvent(e.btnHandle,e.btnHandleParmas)}}},[t._v(t._s(e.btnTitle))])]})),a("div",{staticClass:"ivu-mt"},[a("Alert",[a("Icon",{staticClass:"ivu-mr-8",attrs:{color:"#2d8cf0",type:"ios-alert"}}),t._v("\n          已选择 "+t._s(t.selectedArr.length)+" 项\n          "),a("a",{staticClass:"ivu-ml-8",on:{click:t.clearSelectd}},[t._v("清空")])],1)],1),a("div",[a("Table",{ref:"tableData",attrs:{columns:t.columns,data:t.data,loading:t.loading},on:{"on-selection-change":t.changeSelect}})],1),a("div",{staticClass:"ivu-mt ivu-text-center"},[a("Page",{attrs:{"page-size":t.pageInfo.pageSize,total:Number(t.pageInfo.count),current:t.pageInfo.page},on:{"on-change":t.changePage}})],1)],2)]),a("addWarehouse",{ref:"addWarehouse",on:{hideModal:function(e){e&&t.getData()}}})],1)},o=[],i=(a("ac6a"),a("915b")),s=a("2f08"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,title:0==t.formValidate.houseId?"新增仓库":"编辑仓库"},on:{"on-cancel":function(e){return t.handleReset("formValidate")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"仓库名称",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入仓库名称"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),a("FormItem",{attrs:{label:"仓库编号",prop:"number"}},[a("Input",{attrs:{placeholder:"请输入仓库编号"},model:{value:t.formValidate.number,callback:function(e){t.$set(t.formValidate,"number",e)},expression:"formValidate.number"}})],1),a("FormItem",{attrs:{label:"仓库保管员",prop:"keeper"}},[a("Input",{attrs:{placeholder:"请输入仓库保管员"},model:{value:t.formValidate.keeper,callback:function(e){t.$set(t.formValidate,"keeper",e)},expression:"formValidate.keeper"}})],1),a("FormItem",{attrs:{label:"仓库地址",prop:"address"}},[a("Input",{attrs:{placeholder:"请输入仓库地址"},model:{value:t.formValidate.address,callback:function(e){t.$set(t.formValidate,"address",e)},expression:"formValidate.address"}})],1)],1),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)],1)],1)},l=[],c=(a("7f7f"),a("9411")),d={name:"addWarehouse",props:{modal:{type:Boolean,default:!1}},components:{iCopyright:s["a"]},data:function(){return{formValidate:{id:0,name:"",address:"",keeper:"",number:""},ruleValidate:{name:[{required:!0,message:"请输入仓库名称",trigger:"blur"}]},indeterminate:!1,checkAll:!1,campusList:[],showModal:!1,loading:!1}},computed:{},watch:{},methods:{loadData:function(t,e){this.showModal=!0,"add"===e?(this.formValidate={id:0,name:"",address:"",keeper:"",number:""},this.checkAll=!1):this.formValidate=t},handleCheckAll:function(){var t=this;this.indeterminate?this.checkAll=!1:this.checkAll=!this.checkAll,this.indeterminate=!1,this.checkAll?(this.formValidate.cacampusIdsmpus=[],this.campusList.forEach((function(e){t.formValidate.campusIds.push(e.sectionId+"")}))):this.formValidate.campusIds=[]},checkAllGroupChange:function(t){t.length===this.campusList.length?(this.indeterminate=!1,this.checkAll=!0):t.length>0?(this.indeterminate=!0,this.checkAll=!1):(this.indeterminate=!1,this.checkAll=!1)},handleReset:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$refs[t].resetFields(),this.showModal=!1,this.loading=!1,this.$emit("hideModal",e)},handleSubmit:function(t){var e=this;this.loading=!0,this.$refs[t].validate((function(a){a?Object(i["c"])(e.formValidate).then((function(a){e.$Message.success("保存成功"),e.handleReset(t,!0)})).catch((function(){e.loading=!1})):(e.loading=!1,e.$Message.error("请将信息填写完整"))}))},getCampusList:function(){var t=this;Object(c["A"])({}).then((function(e){t.campusList=e.data.list}))}},mounted:function(){},beforeDestroy:function(){},created:function(){}},u=d,m=(a("2887"),a("2877")),h=Object(m["a"])(u,r,l,!1,null,"6097f811",null),f=h.exports,p=f,g={name:"erpIndexPage",components:{iCopyright:s["a"],addWarehouse:p},data:function(){var t=this;return{children:[{btnTitle:"新建",btnClass:"",btnType:"primary",btnHandle:"addShow",btnHandleParams:"",btnIsTable:!1},{btnTitle:"批量删除",btnClass:"ivu-ml-8",btnType:"",btnHandle:"handleDel",btnHandleParams:"",btnIsTable:!1},{btnTitle:"编辑",btnClass:"",btnType:"primary",btnHandle:"editInfo",btnHandleParams:"",btnIsTable:!0},{btnTitle:"删除",btnClass:"",btnType:"error",btnHandle:"handleDelOne",btnHandleParams:"",btnIsTable:!0}],modal:!1,columns:[{type:"selection",minWidth:50},{title:"名称",key:"name",minWidth:100},{title:"编号",key:"number",minWidth:100},{title:"保管员",key:"keeper",minWidth:100},{title:"地址",key:"address",minWidth:100},{title:"操作",key:"action",minWidth:120,render:function(e,a){var n=[];return t.children.forEach((function(o){o.btnIsTable&&n.push(e("Button",{props:{size:"small",type:o.btnType},style:{marginRight:"10px"},on:{click:function(){t.handleEvent(o.btnHandle,a.row)}}},o.btnTitle))})),e("div",n)}}],data:[],searchValidate:{name:"",type:0},selectedArr:[],loading:!1,pageInfo:{pageSize:10,page:1,pageSum:0,count:0}}},computed:{},watch:{},methods:{editInfo:function(t){console.log(t);var e=JSON.parse(JSON.stringify(t));this.$refs.addWarehouse.loadData(e,"edit")},addShow:function(){this.modal=!0,this.$refs.addWarehouse.loadData({},"add")},resetSearch:function(){this.searchValidate={name:"",type:0},this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},search:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},getData:function(){var t=this;this.loading=!0,this.data=[],this.selectedArr=[],Object(i["b"])({page:this.pageInfo.page,pageSize:this.pageInfo.pageSize}).then((function(e){t.loading=!1,t.data=e.data.list,t.pageInfo=e.data.pageInfo,t.selectedArr=[]}))},changeSelect:function(t){var e=this;this.selectedArr=[],console.log(t),t.forEach((function(t){e.selectedArr.push(t.id)}))},changePage:function(t){this.pageInfo.page=t,this.getData()},clearSelectd:function(){this.$refs.tableData.selectAll(!1),this.selectedArr=[]},handleDel:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedArr;0!==e.length?this.$Modal.confirm({title:"提示",content:"<p>确认删除</p>",onOk:function(){Object(i["a"])({houseIds:e}).then((function(e){t.$Message.success("删除成功");var a=t.pageInfo.page;if(a===t.pageInfo.pageSum){var n=t.pageInfo.pageSize,o=t.pageInfo.count,i=o-n*(a-1);i===t.selectedArr.length&&(a=1===a?1:a-1)}t.changePage(a)}))},onCancel:function(){}}):this.$Message.error("请选择仓库")},handleDelOne:function(t){var e=[];e.push(t.id),this.handleDel(e)},handleEvent:function(t,e){this.$emit(t,e)}},mounted:function(){this.resetSearch()},beforeDestroy:function(){},created:function(){var t=this;this.children.forEach((function(e){t.$on(e.btnHandle,t[e.btnHandle])}))}},b=g,y=(a("5ad4"),Object(m["a"])(b,n,o,!1,null,"2783eaf7",null));e["default"]=y.exports},7415:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between","padding-bottom":"20px"}},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.show({},"add")}}},[t._v("新增")])],1),a("Table",{ref:"table",attrs:{loading:t.loading,stripe:"",columns:t.columns,type:"seletion",data:t.tableData},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.row;return[a("Icon",{staticClass:"margin-right-20",attrs:{size:"20",type:"md-create"},on:{click:function(e){return t.show(n,"edit")}}})]}}])})],1)]),a("Modal",{attrs:{"mask-closable":!1,title:t.erTitle,width:600},on:{"on-cancel":function(e){return t.handleReset("formData")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{ref:"formData",attrs:{"label-width":130,model:t.formData,rules:t.ruleInline}},[a("FormItem",{attrs:{label:"名称",prop:"name"}},[a("Input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("FormItem",{attrs:{label:"账号",prop:"accountNumber"}},[a("Input",{staticStyle:{width:"100%"},model:{value:t.formData.accountNumber,callback:function(e){t.$set(t.formData,"accountNumber",e)},expression:"formData.accountNumber"}})],1)],1),a("template",{slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formData")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formData")}}},[t._v("确定")])],1)],2)],1)},o=[],i=(a("7f7f"),a("9411")),s={components:{},data:function(){return{typelist:[{type:1,name:"收入"},{type:2,name:"支出"}],formData:{},showModal:!1,type:"",isShow:!1,loading:!0,erTitle:"",status:"",columns:[{title:"编号",key:"id",width:"250px"},{title:"名称",key:"name",width:"250px"},{title:"账号",key:"accountNumber",width:"250px"},{title:"收入金额",key:"incomeAmount",minWidth:100},{title:"支出金额",key:"expenditureAmount",minWidth:100},{title:"操作",width:"200px",slot:"action"}],tableData:[],list:[],ruleInline:{name:[{required:!0,message:"请填写名称",trigger:"blur"}],accountNumber:[{required:!0,message:"请输入账号",trigger:"change"}]}}},created:function(){this.getList()},methods:{search:function(t){this.type=t,this.getList()},getInfo:function(t){var e=this;Object(i["o"])({id:t}).then((function(t){0===t.ret?e.formData=t.data.info:e.$Message.error(t.msg||"接口错误")}))},getList:function(){var t=this;this.loading=!0,Object(i["p"])({}).then((function(e){t.loading=!1,0===e.ret?t.tableData=e.data.list:t.$Message.error(e.msg||"接口错误")}))},show:function(t,e){this.status=e,"add"===e?(this.erTitle="新增",this.id=0):"edit"===e&&(this.erTitle="编辑",this.id=t.id,this.getInfo(t.id)),this.showModal=!0},handleReset:function(t){this.showModal=!1,this.id=0,this.$refs[t].resetFields()},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(a){a?Object(i["q"])({id:e.id,name:e.formData.name,accountNumber:e.formData.accountNumber}).then((function(a){e.$Message.success("保存成功！"),e.showModal=!1,e.getList(),e.$refs[t].resetFields()})):e.$Message.error("表单验证失败!")}))}}},r=s,l=(a("a048"),a("2877")),c=Object(l["a"])(r,n,o,!1,null,"08e0ede4",null);e["default"]=c.exports},"75a7":function(t,e,a){},"7c49":function(t,e,a){},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},8962:function(t,e,a){"use strict";var n=a("b529"),o=a.n(n);o.a},"8b97":function(t,e,a){var n=a("d3f4"),o=a("cb7c"),i=function(t,e){if(o(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,a){return i(t,a),e?t.__proto__=a:n(t,a),t}}({},!1):void 0),check:i}},"8f7d":function(t,e,a){"use strict";var n=a("5671"),o=a.n(n);o.a},"915b":function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return s})),a.d(e,"r",(function(){return r})),a.d(e,"s",(function(){return l})),a.d(e,"i",(function(){return c})),a.d(e,"f",(function(){return d})),a.d(e,"h",(function(){return u})),a.d(e,"g",(function(){return m})),a.d(e,"l",(function(){return h})),a.d(e,"j",(function(){return f})),a.d(e,"k",(function(){return p})),a.d(e,"o",(function(){return g})),a.d(e,"m",(function(){return b})),a.d(e,"n",(function(){return y})),a.d(e,"t",(function(){return v})),a.d(e,"u",(function(){return I})),a.d(e,"q",(function(){return w})),a.d(e,"d",(function(){return x})),a.d(e,"p",(function(){return k})),a.d(e,"e",(function(){return O}));var n=a("b6bd");function o(t){return Object(n["a"])({url:"/purchase/ware-house/list",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/purchase/ware-house/save",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/purchase/ware-house/del",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/purchase/stock/goods-list",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/purchase/stock/stock-goods-detail",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/purchase/goods/list-category",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/purchase/goods/add-category",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/purchase/goods/edit-category",method:"post",data:t})}function m(t){return Object(n["a"])({url:"/purchase/goods/del-category",method:"post",data:t})}function h(t){return Object(n["a"])({url:"/purchase/goods/list-goods",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/purchase/goods/add-goods",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/purchase/goods/del-goods",method:"post",data:t})}function g(t){return Object(n["a"])({url:"/purchase/stock-manage/list",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/purchase/stock-manage/add",method:"post",data:t})}function y(t){return Object(n["a"])({url:"/purchase/stock-manage/detail",method:"post",data:t})}function v(t){return Object(n["a"])({url:"/purchase/stock-manage/list-query",method:"post",data:t})}function I(t){return Object(n["a"])({url:"/purchase/stock-manage/stock-statistics",method:"post",data:t})}function w(t){return Object(n["a"])({url:"/purchase/stock-manage/del",method:"post",data:t})}var x="/purchase/goods/export-goods",k="/purchase/goods/import-goods",O="/upload/template/goods.xls"},"94fc":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("Form",{ref:"formCustom",attrs:{"label-width":100}},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{xs:24,md:24,lg:8}},[a("FormItem",{attrs:{label:"物品名称"}},[a("Input",{attrs:{type:"text",placeholder:"请输入物品名称",clearable:""},model:{value:t.searchValidate.goodsName,callback:function(e){t.$set(t.searchValidate,"goodsName",e)},expression:"searchValidate.goodsName"}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:8}},[a("FormItem",{attrs:{label:"日期"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{value:t.searchValidate.time,type:"daterange","split-panels":"",placement:"bottom-end",placeholder:"请选择时间"},on:{"on-change":t.handleChangeTime}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:8}},[a("FormItem",{staticStyle:{"text-align":"right"}},[a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),a("Button",{staticClass:"ivu-ml-8",on:{click:t.resetSearch}},[t._v("重置")])],1)],1)],1)],1),a("div",[a("div",[a("Table",{ref:"tableData",attrs:{columns:t.columns,data:t.data,loading:t.loading}})],1),a("div",{staticClass:"ivu-mt ivu-text-center"},[a("Page",{attrs:{"page-size":t.pageInfo.pageSize,total:Number(t.pageInfo.count),current:t.pageInfo.page},on:{"on-change":t.changePage}})],1)])],1)],1)},o=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("c5f6"),a("bd86")),s=a("915b"),r=a("2f08");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(a,!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={name:"iandeBankSearchPage",components:{iCopyright:r["a"]},data:function(){return{modal:!1,columns:[{title:"序号",key:"stockRecordId",minWidth:80},{title:"日期",key:"date",minWidth:120},{title:"操作类型",key:"typeName",minWidth:100},{title:"名称",key:"goodsName",minWidth:100},{title:"单位",key:"unit",minWidth:100},{title:"数量",key:"num",minWidth:100}],data:[],searchValidate:{categoryId:"",type:0,houseId:"",goodsName:"",startTime:"",endTime:"",time:[]},goodsType:1,dateOptions:{shortcuts:[{text:"近 7 天",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-6048e5),[e,t]}},{text:"近 1 月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-2592e6),[e,t]}},{text:"近 3 月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-7776e6),[e,t]}}]},pageInfo:{pageSize:10,page:1,pageSum:0,count:0},categoryList:[],houseList:[],loading:!1}},computed:{},watch:{},methods:{resetSearch:function(){this.searchValidate={categoryId:"",type:0,houseId:"",goodsName:"",startTime:"",endTime:"",time:[]},this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},search:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},changePage:function(t){this.pageInfo.page=t,this.getData()},getData:function(){var t=this;this.loading=!0,this.data=[],this.selectedArr=[],Object(s["t"])(c({page:this.pageInfo.page,pageSize:this.pageInfo.pageSize},this.searchValidate,{goodsType:this.goodsType})).then((function(e){t.loading=!1,t.data=e.data.showList,t.pageInfo=e.data.pageInfo}))},getConfig:function(){this.resetSearch()},handleChangeTime:function(t){this.searchValidate.startTime=t[0]||"",this.searchValidate.endTime=t[1]||""}},mounted:function(){this.goodsType=Number(this.$route.query.goodsType)||2,this.getConfig()},beforeDestroy:function(){},created:function(){}},u=d,m=(a("3e41"),a("2877")),h=Object(m["a"])(u,n,o,!1,null,"25f1f89c",null);e["default"]=h.exports},"9ba7":function(t,e,a){},"9e16":function(t,e,a){"use strict";var n=a("ff72"),o=a.n(n);o.a},"9ff7":function(t,e,a){"use strict";var n=a("fa0b"),o=a.n(n);o.a},a048:function(t,e,a){"use strict";var n=a("6d41"),o=a.n(n);o.a},a2dc:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[[a("Row",{attrs:{gutter:15}},[a("Col",{attrs:{span:"5"}},[a("Card",{attrs:{padding:0}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("Button",{attrs:{icon:"md-add",type:"primary"},on:{click:function(e){return t.$refs.addFolder.loadData({},"add")}}},[t._v("新增")])],1),a("ul",{staticClass:"t-list"},[a("li",{staticClass:"t-item",class:0==t.curIndex?"selected":"",on:{click:function(e){return t.changeCategory(0)}}},[a("div",{staticClass:"i-name"},[t._v("全部")])]),t._l(t.folderList,(function(e,n){return a("li",{key:n,staticClass:"t-item",class:t.curIndex==e.categoryId?"selected":"",on:{click:function(a){return t.changeCategory(e.categoryId)}}},[a("div",{staticClass:"i-name"},[t._v("\n                "+t._s(e.categoryName)+"\n                "),1===e.isStore?a("div",{staticClass:"chuxu"},[t._v("储")]):t._e()]),a("div",{staticClass:"i-icon"},[a("Icon",{attrs:{size:"20",title:"编辑",type:"ios-create"},on:{click:function(a){return a.stopPropagation(),t.$refs.addFolder.loadData(e,"edit")}}}),a("Icon",{attrs:{size:"20",title:"删除",type:"ios-trash"},on:{click:function(a){return a.stopPropagation(),t.handleFolderDel([e.categoryId])}}})],1)])}))],2)])],1),a("Col",{attrs:{span:"19"}},[a("Card",[a("Form",{ref:"formCustom",attrs:{"label-width":100}},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"物品名称"}},[a("Input",{attrs:{type:"text",placeholder:"请输入物品名称",clearable:""},model:{value:t.searchValidate.goodsName,callback:function(e){t.$set(t.searchValidate,"goodsName",e)},expression:"searchValidate.goodsName"}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"启用状态"}},[a("Select",{attrs:{clearable:"",filterable:"",placeholder:"请选择启用状态"},model:{value:t.searchValidate.status,callback:function(e){t.$set(t.searchValidate,"status",e)},expression:"searchValidate.status"}},[a("Option",{attrs:{value:"1"}},[t._v("启用")]),a("Option",{attrs:{value:"2"}},[t._v("停用")])],1)],1)],1),a("Col",{attrs:{xs:24,md:24,lg:24}},[a("FormItem",{staticStyle:{"text-align":"right"}},[a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),a("Button",{staticClass:"ivu-ml-8",on:{click:t.resetSearch}},[t._v("重置")]),a("Button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"ios-download-outline",type:"primary"},on:{click:function(e){return t.exportData()}}},[t._v("导出")]),a("Upload",{staticStyle:{display:"inline"},attrs:{icon:"ios-cloud-upload-outline",action:t.dataImport,"show-upload-list":!1,data:t.uploadData,"on-success":t.handleSuccess,accept:".xls,.xlsx","max-size":10240,"on-exceeded-size":t.handleMaxSize}},[a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"ios-cloud-upload-outline"}},[t._v("导入")])],1),a("Button",{staticClass:"ivu-ml-8",attrs:{icon:"ios-download-outline"},on:{click:function(e){return t.exportData(1)}}},[t._v("下载模板")])],1)],1)],1)],1),a("div",[t._l(t.children,(function(e,n){return[e.btnIsTable?t._e():a("Button",{key:n,class:e.btnClass,attrs:{icon:"md-add",type:e.btnType?e.btnType:"default"},on:{click:function(a){return t.handleEvent(e.btnHandle,e.btnHandleParams)}}},[t._v(t._s(e.btnTitle))])]})),a("div",{staticClass:"ivu-mt"},[a("Table",{ref:"tableData",attrs:{columns:t.columns,data:t.data,loading:t.loading},on:{"on-selection-change":t.changeSelect}})],1),a("div",{staticClass:"ivu-mt ivu-text-center"},[a("Page",{attrs:{"page-size":t.pageInfo.pageSize,total:Number(t.pageInfo.count),current:t.pageInfo.page},on:{"on-change":t.changePage}})],1)],2)],1)],1)],1)],a("addGoods",{ref:"addGoods",on:{hideModal:t.hideModal,submitGoods:t.submitGoods}}),a("addFolder",{ref:"addFolder",on:{hideModal:function(e){return t.getFolderList()}}})],2)},o=[],i=(a("8e6e"),a("456d"),a("7f7f"),a("bd86")),s=(a("386d"),a("c5f6"),a("28a5"),a("ac6a"),a("915b")),r=a("c276"),l=a("2f08"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("Modal",{directives:[{name:"show",rawName:"v-show",value:1!==Number(t.formValidate.isCard),expression:"Number(formValidate.isCard) !== 1"}],attrs:{"mask-closable":!1,"footer-hide":!0,title:0==t.formValidate.goodsId?"新增物品":"编辑物品",width:800},on:{"on-cancel":function(e){return t.handleReset("formValidate")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[1!==Number(t.formValidate.isCard)?a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[a("Row",{attrs:{type:"flex",justify:"start"}},[a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"物品类别",prop:"categoryId"}},[a("Row",[a("Col",{attrs:{span:"20"}},[a("Select",{attrs:{clearable:"",filterable:"",placeholder:"请选择物品类别"},on:{"on-change":t.changeCategory},model:{value:t.formValidate.categoryId,callback:function(e){t.$set(t.formValidate,"categoryId",e)},expression:"formValidate.categoryId"}},t._l(t.folderList,(function(e,n){return a("Option",{key:"category-"+n,attrs:{value:e.categoryId+""}},[t._v(t._s(e.categoryName))])})),1)],1),a("Col",{staticClass:"ivu-text-right",attrs:{span:"4"}},[a("Button",{attrs:{size:"small",icon:"md-add"},on:{click:function(e){return t.$refs.addFolder.loadData({},"add")}}})],1)],1)],1)],1),a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"代码"}},[a("Input",{attrs:{placeholder:"请输入物品代码"},model:{value:t.formValidate.goodsNo,callback:function(e){t.$set(t.formValidate,"goodsNo",e)},expression:"formValidate.goodsNo"}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:24}},[a("FormItem",{attrs:{label:"物品名称",prop:"goodsName"}},[a("Input",{attrs:{placeholder:"请输入物品名称"},model:{value:t.formValidate.goodsName,callback:function(e){t.$set(t.formValidate,"goodsName",e)},expression:"formValidate.goodsName"}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"物品规格"}},[a("Input",{attrs:{placeholder:"请输入物品规格"},model:{value:t.formValidate.attr,callback:function(e){t.$set(t.formValidate,"attr",e)},expression:"formValidate.attr"}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"物品单位",prop:"unit"}},[a("Input",{attrs:{placeholder:"请输入物品单位"},model:{value:t.formValidate.unit,callback:function(e){t.$set(t.formValidate,"unit",e)},expression:"formValidate.unit"}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"采购单价",prop:"purchasePrice"}},[a("Input",{attrs:{placeholder:"请输入采购单价"},model:{value:t.formValidate.purchasePrice,callback:function(e){t.$set(t.formValidate,"purchasePrice",e)},expression:"formValidate.purchasePrice"}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"销售单价",prop:"price"}},[a("Input",{attrs:{placeholder:"请输入销售单价"},model:{value:t.formValidate.price,callback:function(e){t.$set(t.formValidate,"price",e)},expression:"formValidate.price"}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"加盟单价",prop:"joinInPrice"}},[a("Input",{attrs:{placeholder:"请输入加盟单价"},model:{value:t.formValidate.joinInPrice,callback:function(e){t.$set(t.formValidate,"joinInPrice",e)},expression:"formValidate.joinInPrice"}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"状态"}},[a("RadioGroup",{model:{value:t.formValidate.status,callback:function(e){t.$set(t.formValidate,"status",e)},expression:"formValidate.status"}},[a("Radio",{attrs:{label:"1"}},[t._v("启用")]),a("Radio",{attrs:{label:"2"}},[t._v("停用")])],1)],1)],1),a("Col",{attrs:{xs:24,md:24,lg:24}},[a("FormItem",{attrs:{label:"描述"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入物品描述"},model:{value:t.formValidate.description,callback:function(e){t.$set(t.formValidate,"description",e)},expression:"formValidate.description"}})],1)],1)],1)],1):t._e(),a("div",[a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("取消")])],1)],1)],1),a("div",[a("Modal",{directives:[{name:"show",rawName:"v-show",value:1===Number(t.formValidate.isCard),expression:"Number(formValidate.isCard) === 1"}],attrs:{"mask-closable":!1,"footer-hide":!0,title:0==t.formValidate.goodsId?"新增物品":"编辑物品",width:800},on:{"on-cancel":function(e){return t.handleReset("formValidate")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{ref:"formValidate2",attrs:{model:t.formValidate,rules:t.ruleValidate2,"label-width":80}},[a("Row",{attrs:{type:"flex",justify:"start"}},[a("Col",{attrs:{xs:24,md:24,lg:24}},[a("FormItem",{attrs:{label:"物品类别",prop:"categoryId"}},[a("Row",[a("Col",{attrs:{span:"20"}},[a("Select",{attrs:{clearable:"",filterable:"",placeholder:"请选择物品类别"},on:{"on-change":t.changeCategory},model:{value:t.formValidate.categoryId,callback:function(e){t.$set(t.formValidate,"categoryId",e)},expression:"formValidate.categoryId"}},t._l(t.folderList,(function(e,n){return a("Option",{key:"category-"+n,attrs:{value:e.categoryId+""}},[t._v(t._s(e.categoryName))])})),1)],1),a("Col",{staticClass:"ivu-text-right",attrs:{span:"4"}},[a("Button",{attrs:{size:"small",icon:"md-add"},on:{click:function(e){return t.$refs.addFolder.loadData({},"add")}}})],1)],1)],1)],1),a("Col",{attrs:{xs:24,md:24,lg:24}},[a("FormItem",{attrs:{label:"物品名称",prop:"goodsName"}},[a("Input",{attrs:{placeholder:"请输入物品名称"},model:{value:t.formValidate.goodsName,callback:function(e){t.$set(t.formValidate,"goodsName",e)},expression:"formValidate.goodsName"}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"物品单位",prop:"unit"}},[a("Input",{attrs:{placeholder:"请输入物品单位"},model:{value:t.formValidate.unit,callback:function(e){t.$set(t.formValidate,"unit",e)},expression:"formValidate.unit"}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"销售单价",prop:"price"}},[a("Input",{attrs:{placeholder:"请输入销售单价"},model:{value:t.formValidate.price,callback:function(e){t.$set(t.formValidate,"price",e)},expression:"formValidate.price"}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"状态"}},[a("RadioGroup",{model:{value:t.formValidate.status,callback:function(e){t.$set(t.formValidate,"status",e)},expression:"formValidate.status"}},[a("Radio",{attrs:{label:"1"}},[t._v("启用")]),a("Radio",{attrs:{label:"2"}},[t._v("停用")])],1)],1)],1),a("Col",{attrs:{xs:24,md:24,lg:24}},[a("FormItem",{attrs:{label:"描述"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入物品描述"},model:{value:t.formValidate.description,callback:function(e){t.$set(t.formValidate,"description",e)},expression:"formValidate.description"}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:24}},[a("div",{staticClass:"title"},[t._v("适用规则")])]),a("Col",{attrs:{xs:19,md:19,lg:19}},[a("FormItem",{attrs:{label:"适用课程"}},[t.unlimit.course?a("div",[t._v("不限课程")]):t._e(),t.unlimit.course?t._e():a("div",{on:{click:function(e){return t.$refs.chooseClass.DrawerToShow()}}},[a("a",[t._v("添加")])]),t.formValidate.courseList.length>0&&!t.unlimit.course?a("List",{attrs:{border:""}},t._l(t.formValidate.courseList,(function(e,n){return a("ListItem",{key:"courseName1-"+e.courseId},[a("ListItemMeta",{attrs:{avatar:"",title:e.courseName,description:""}}),a("template",{slot:"action"},[a("li",{on:{click:function(e){return t.delClass(n)}}},[a("Icon",{attrs:{type:"md-close-circle",size:"19"}})],1)])],2)})),1):t._e()],1)],1),a("Col",{attrs:{xs:5,md:5,lg:5}},[a("FormItem",{attrs:{label:""}},[a("Checkbox",{on:{"on-change":t.cliclUnlimt1},model:{value:t.unlimit.course,callback:function(e){t.$set(t.unlimit,"course",e)},expression:"unlimit.course"}},[t._v("不限")])],1)],1),a("Col",{attrs:{xs:24,md:24,lg:24}},[a("FormItem",{attrs:{label:""}},[a("Checkbox",{model:{value:t.formValidate.applyGoods,callback:function(e){t.$set(t.formValidate,"applyGoods",e)},expression:"formValidate.applyGoods"}},[t._v("适用物品")])],1)],1),a("Col",{attrs:{xs:19,md:19,lg:19}},[a("FormItem",{attrs:{label:"适用校区"}},[a("Select",{attrs:{multiple:"","max-tag-count":2,"max-tag-placeholder":t.maxCampusPlaceholder,disabled:t.unlimit.campus},model:{value:t.formValidate.campusIds,callback:function(e){t.$set(t.formValidate,"campusIds",e)},expression:"formValidate.campusIds"}},[t.unlimit.campus?a("Option",{attrs:{value:-1}},[t._v("不限")]):t._e(),t._l(t.campusList,(function(e){return a("Option",{key:e.sectionId,attrs:{value:e.sectionId+""}},[t._v(t._s(e.title))])}))],2)],1)],1),a("Col",{attrs:{xs:5,md:5,lg:5}},[a("FormItem",{attrs:{label:""}},[a("Checkbox",{on:{"on-change":t.cliclUnlimt2},model:{value:t.unlimit.campus,callback:function(e){t.$set(t.unlimit,"campus",e)},expression:"unlimit.campus"}},[t._v("不限")])],1)],1),a("Col",{attrs:{xs:19,md:19,lg:19}},[a("FormItem",{attrs:{label:"课程类型"}},[a("Select",{attrs:{multiple:"","max-tag-count":2,"max-tag-placeholder":t.maxChargeinTypePlaceholder,disabled:t.unlimit.courseType},model:{value:t.formValidate.courseType,callback:function(e){t.$set(t.formValidate,"courseType",e)},expression:"formValidate.courseType"}},[t.unlimit.courseType?a("Option",{attrs:{value:-1}},[t._v("不限")]):t._e(),t._l(t.courseTypeList,(function(e){return a("Option",{key:e.basicsId,attrs:{value:e.basicsId+""}},[t._v(t._s(e.name))])}))],2)],1)],1),a("Col",{attrs:{xs:5,md:5,lg:5}},[a("FormItem",{attrs:{label:""}},[a("Checkbox",{on:{"on-change":t.cliclUnlimt3},model:{value:t.unlimit.courseType,callback:function(e){t.$set(t.unlimit,"courseType",e)},expression:"unlimit.courseType"}},[t._v("不限")])],1)],1),a("Col",{attrs:{xs:19,md:19,lg:19}},[a("FormItem",{attrs:{label:"班型"}},[a("Select",{attrs:{multiple:"","max-tag-count":2,"max-tag-placeholder":t.maxClassTypePlaceholder,disabled:t.unlimit.classType},model:{value:t.formValidate.classType,callback:function(e){t.$set(t.formValidate,"classType",e)},expression:"formValidate.classType"}},[t.unlimit.classType?a("Option",{attrs:{value:-1}},[t._v("不限")]):t._e(),t._l(t.classType,(function(e){return a("Option",{key:e.basicsId,attrs:{value:e.basicsId+""}},[t._v(t._s(e.name))])}))],2)],1)],1),a("Col",{attrs:{xs:5,md:5,lg:5}},[a("FormItem",{attrs:{label:""}},[a("Checkbox",{on:{"on-change":t.cliclUnlimt4},model:{value:t.unlimit.classType,callback:function(e){t.$set(t.unlimit,"classType",e)},expression:"unlimit.classType"}},[t._v("不限")])],1)],1),a("Col",{attrs:{xs:19,md:19,lg:19}},[a("FormItem",{attrs:{label:"所属科目"}},[a("Select",{attrs:{multiple:"","max-tag-count":2,"max-tag-placeholder":t.maxSubjectPlaceholder,disabled:t.unlimit.subjectId},model:{value:t.formValidate.subjectId,callback:function(e){t.$set(t.formValidate,"subjectId",e)},expression:"formValidate.subjectId"}},[t.unlimit.subjectId?a("Option",{attrs:{value:-1}},[t._v("不限")]):t._e(),t._l(t.subject,(function(e){return a("Option",{key:e.basicsId,attrs:{value:e.basicsId+""}},[t._v(t._s(e.name))])}))],2)],1)],1),a("Col",{attrs:{xs:5,md:5,lg:5}},[a("FormItem",{attrs:{label:""}},[a("Checkbox",{on:{"on-change":t.cliclUnlimt5},model:{value:t.unlimit.subjectId,callback:function(e){t.$set(t.unlimit,"subjectId",e)},expression:"unlimit.subjectId"}},[t._v("不限")])],1)],1),a("Col",{attrs:{xs:19,md:19,lg:19}},[a("FormItem",{attrs:{label:"期段"}},[a("Select",{attrs:{multiple:"","max-tag-count":2,"max-tag-placeholder":t.maxStageTypePlaceholder,disabled:t.unlimit.stageType},model:{value:t.formValidate.stageType,callback:function(e){t.$set(t.formValidate,"stageType",e)},expression:"formValidate.stageType"}},[t.unlimit.stageType?a("Option",{attrs:{value:-1}},[t._v("不限")]):t._e(),t._l(t.classTerm,(function(e){return a("Option",{key:e.basicsId,attrs:{value:e.basicsId+""}},[t._v(t._s(e.name))])}))],2)],1)],1),a("Col",{attrs:{xs:5,md:5,lg:5}},[a("FormItem",{attrs:{label:""}},[a("Checkbox",{on:{"on-change":t.cliclUnlimt6},model:{value:t.unlimit.stageType,callback:function(e){t.$set(t.unlimit,"stageType",e)},expression:"unlimit.stageType"}},[t._v("不限")])],1)],1),a("Col",{attrs:{xs:19,md:19,lg:19}},[a("FormItem",{attrs:{label:"所属年级"}},[a("Select",{attrs:{multiple:"","max-tag-count":2,"max-tag-placeholder":t.maxGradePlaceholder,disabled:t.unlimit.gradeId},model:{value:t.formValidate.gradeId,callback:function(e){t.$set(t.formValidate,"gradeId",e)},expression:"formValidate.gradeId"}},[t.unlimit.gradeId?a("Option",{attrs:{value:-1}},[t._v("不限")]):t._e(),t._l(t.shiftGrade,(function(e){return a("Option",{key:e.basicsId,attrs:{value:e.basicsId+""}},[t._v(t._s(e.name))])}))],2)],1)],1),a("Col",{attrs:{xs:5,md:5,lg:5}},[a("FormItem",{attrs:{label:""}},[a("Checkbox",{on:{"on-change":t.cliclUnlimt7},model:{value:t.unlimit.gradeId,callback:function(e){t.$set(t.unlimit,"gradeId",e)},expression:"unlimit.gradeId"}},[t._v("不限")])],1)],1),a("Col",{attrs:{xs:19,md:19,lg:19}},[a("FormItem",{attrs:{label:"类型"}},[a("Select",{attrs:{multiple:"","max-tag-count":2,"max-tag-placeholder":t.maxCourseTypePlaceholder,disabled:t.unlimit.type},model:{value:t.formValidate.type,callback:function(e){t.$set(t.formValidate,"type",e)},expression:"formValidate.type"}},[t.unlimit.type?a("Option",{attrs:{value:-1}},[t._v("不限")]):t._e(),t._l(t.shiftCat,(function(e){return a("Option",{key:e.basicsId,attrs:{value:e.basicsId+""}},[t._v(t._s(e.name))])}))],2)],1)],1),a("Col",{attrs:{xs:5,md:5,lg:5}},[a("FormItem",{attrs:{label:""}},[a("Checkbox",{on:{"on-change":t.cliclUnlimt8},model:{value:t.unlimit.type,callback:function(e){t.$set(t.unlimit,"type",e)},expression:"unlimit.type"}},[t._v("不限")])],1)],1),a("Col",{attrs:{xs:19,md:19,lg:19}},[a("FormItem",{attrs:{label:"销售日期",prop:"saleTime"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange","split-panels":"",placement:"bottom-end",placeholder:"请选择日期",value:t.formValidate.saleTime,disabled:t.unlimit.saleTime},on:{"on-change":t.changeSaleTime}})],1)],1),a("Col",{attrs:{xs:5,md:5,lg:5}},[a("FormItem",{attrs:{label:""}},[a("Checkbox",{on:{"on-change":t.cliclUnlimt9},model:{value:t.unlimit.saleTime,callback:function(e){t.$set(t.unlimit,"saleTime",e)},expression:"unlimit.saleTime"}},[t._v("不限")])],1)],1),a("Col",{attrs:{xs:19,md:19,lg:19}},[a("FormItem",{attrs:{label:"使用日期",prop:"useTime"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange","split-panels":"",placement:"bottom-end",placeholder:"请选择日期",value:t.formValidate.useTime,disabled:t.unlimit.useTime},on:{"on-change":t.changeUseTime}})],1)],1),a("Col",{attrs:{xs:5,md:5,lg:5}},[a("FormItem",{attrs:{label:""}},[a("Checkbox",{on:{"on-change":t.cliclUnlimt10},model:{value:t.unlimit.useTime,callback:function(e){t.$set(t.unlimit,"useTime",e)},expression:"unlimit.useTime"}},[t._v("不限")])],1)],1),a("Col",{attrs:{xs:12,md:12,lg:12}},[a("FormItem",{attrs:{label:"折扣",prop:"discount"}},[a("Input",{attrs:{placeholder:"请输入折扣"},model:{value:t.formValidate.discount,callback:function(e){t.$set(t.formValidate,"discount",e)},expression:"formValidate.discount"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("%")])])],1)],1)],1)],1),a("div",[a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.handleSubmit("formValidate2")}}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formValidate2")}}},[t._v("取消")])],1)],1)],1),a("addFolder",{ref:"addFolder",on:{hideModal:function(e){return t.getFolderList()}}}),a("chooseClass",{ref:"chooseClass",on:{handleChoose:t.handleChooseClass}})],1)},d=[],u=a("9411"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,title:"选择课程",width:1e3},on:{"on-cancel":function(e){return t.handleReset("formValidate")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"choose-class",class:t.isMobile?"":"wrapper"},[a("Card",{class:t.isMobile?"":"right-content"},[a("Form",{ref:"formCustom",attrs:{"label-width":100}},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{attrs:{label:"课程名称"}},[a("Input",{attrs:{type:"text",placeholder:"请输入课程名称",clearable:""},model:{value:t.searchValidate.name,callback:function(e){t.$set(t.searchValidate,"name",e)},expression:"searchValidate.name"}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:12}},[a("FormItem",{staticStyle:{"text-align":"right"}},[a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),a("Button",{staticClass:"ivu-ml-8",attrs:{type:"primary"},on:{click:t.resetSearch}},[t._v("重置")])],1)],1)],1)],1),a("div",[a("div",[a("Table",{ref:"tableData",attrs:{columns:t.columns,data:t.data},on:{"on-selection-change":t.changeSelect}})],1),a("div",{staticClass:"ivu-mt ivu-text-center"},[a("Page",{attrs:{"page-size":t.pageInfo.pageSize,total:Number(t.pageInfo.count),current:t.pageInfo.page},on:{"on-change":t.changePage}})],1)])],1),t.isMobile?t._e():a("Card",{staticClass:"left-content"},[a("div",{staticClass:"ivu-mt",attrs:{slot:"title"},slot:"title"},[a("Alert",[a("Icon",{staticClass:"ivu-mr-8",attrs:{color:"#2d8cf0",type:"ios-alert"}}),t._v("\n          已选择 "+t._s(t.selectedArr.length)+" 项\n          "),a("a",{staticClass:"ivu-ml-8",on:{click:t.clearSelected}},[t._v("清空")])],1)],1),t.selectedArr.length>0?a("List",{attrs:{border:""}},[a("Scroll",{staticStyle:{flex:"1"},attrs:{height:415}},t._l(t.selectedArr,(function(e,n){return a("ListItem",{key:n},[a("ListItemMeta",{attrs:{avatar:"",title:e.courseName,description:""}}),a("template",{slot:"action"},[a("li",{on:{click:function(e){return t.delClass(n)}}},[a("Icon",{attrs:{type:"md-close-circle",size:"19"}})],1)])],2)})),1)],1):t._e()],1)],1),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("取消")])],1)])},h=[],f=a("b6bd");function p(t){return Object(f["a"])({url:"/common/classes/course-list",method:"post",data:t})}var g=a("2f62");function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(a,!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var v={name:"chooseClass",components:{iCopyright:l["a"]},props:{modal:{type:Boolean,default:!1},isShowCurrent:{type:String},selected:{type:Array,default:function(){return[]}}},data:function(){return{pageInfo:{page:1},columns:[{type:"selection",minWidth:80},{title:"课程名称",key:"courseName",minWidth:100},{title:"年级/科目/类型",key:"gradeName",minWidth:100},{title:"价格",key:"unitPrice",minWidth:100}],data:[],formValidate:{name:"",type:"0",gender:"",desc:"",campus:[]},searchValidate:{name:"",type:0},showModal:!1,selectedArr:[]}},computed:y({},Object(g["e"])("admin/layout",["isMobile"])),methods:{changePage:function(t){this.pageInfo.page=t,this.classList()},DrawerToShow:function(){this.showModal=!0,this.selectedArr=[],this.classList()},classList:function(){var t=this;console.log(this.isShowCurrent,"是否当前校区"),p({name:this.searchValidate.name,courseStatus:2,showCurrent:this.isShowCurrent,page:this.pageInfo.page}).then((function(e){t.data=e.data.list,t.pageInfo=e.data.pageInfo})).catch((function(t){console.log(t)}))},resetSearch:function(){this.searchValidate={name:"",type:0},this.pageInfo.page=1,this.classList()},search:function(){this.pageInfo.page=1,this.classList()},changeSelect:function(t){var e=this;this.selectedArr=[],t.forEach((function(t){e.selectedArr.push(t)}))},clearSelected:function(){this.$refs.tableData.selectAll(!1),this.selectedArr=[]},handleReset:function(t){this.showModal=!1},handleSubmit:function(t){this.$emit("handleChoose",this.selectedArr),this.showModal=!1},delClass:function(t){var e=this,a="";this.data.some((function(n,o){n.courseId===e.selectedArr[t].courseId&&(a=o)})),this.$refs.tableData.toggleSelect(a)}},mounted:function(){},beforeDestroy:function(){},created:function(){}},I=v,w=(a("9ff7"),a("2877")),x=Object(w["a"])(I,m,h,!1,null,"43714e8c",null),k=x.exports,O=k,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,title:("add"===t.method?"新增":"修改")+"物品类别",width:600},on:{"on-cancel":function(e){return t.handleReset("formValidate")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[a("Row",{attrs:{type:"flex",justify:"start"}},[a("Col",{attrs:{xs:24,md:24,lg:24}},[a("div",[a("Alert",[a("div",{staticStyle:{display:"flex"}},[a("Icon",{staticClass:"ivu-mr-8",attrs:{color:"#2d8cf0",type:"ios-alert"}}),a("div",[t._v("提示：")]),"add"===t.method?a("div",[a("div",[t._v("1、支持批量添加类别，类别只能用换行隔开，每行表示一个类别；")]),a("div",{staticStyle:{"margin-top":"16px"}},[t._v("2、添加的物品类别不能重复。")])]):t._e(),"add"!==t.method?a("div",[a("div",[t._v("添加的物品类别不能重复。")])]):t._e()],1)])],1)]),a("Col",{attrs:{xs:24,md:24,lg:24}},[a("FormItem",{attrs:{label:"类别名称",prop:"categoryName"}},[a("Input",{attrs:{placeholder:"请输入类别名称",type:"textarea",autosize:{minRows:4,maxRows:5}},model:{value:t.formValidate.categoryName,callback:function(e){t.$set(t.formValidate,"categoryName",e)},expression:"formValidate.categoryName"}})],1)],1)],1)],1),a("div",[a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("取消")])],1)],1)],1)},V=[];function T(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function C(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?T(a,!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):T(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var _={name:"addFolder",props:{modal:{type:Boolean,default:!1}},components:{iCopyright:l["a"]},data:function(){return{formValidate:{categoryName:"",categoryId:0,isStore:"0"},ruleValidate:{categoryName:[{required:!0,message:"请输入类别名称",trigger:"blur"}]},showModal:!1,method:"add",loading:!1}},computed:{},methods:{handleReset:function(t){this.$refs[t].resetFields(),this.showModal=!1,this.loading=!1,this.$emit("hideModal")},handleSubmit:function(t){var e=this;this.loading=!0,this.$refs[t].validate((function(a){if(a)if("add"===e.method){var n=e.formValidate.categoryName.split("\n"),o=n.filter((function(t){return t&&t.trim()}));if(o.length<1)return e.loading=!1,void e.$Message.error("请至少填写一个类别");Object(s["f"])({categoryId:e.formValidate.categoryId,isStore:e.formValidate.isStore,categoryName:o}).then((function(a){e.$Message.success("保存成功"),e.handleReset(t)})).catch((function(){e.loading=!1}))}else Object(s["h"])(C({},e.formValidate,{name:e.formValidate.categoryName})).then((function(a){e.$Message.success("保存成功"),e.handleReset(t)})).catch((function(){e.loading=!1}));else e.loading=!1,e.$Message.error("请将信息填写完整")}))},loadData:function(t,e){this.showModal=!0,this.method=e,"add"===e?(this.formValidate={categoryName:"",categoryId:0,isStore:"0"},this.checkAll=!1):this.formValidate=JSON.parse(JSON.stringify(t))}},mounted:function(){},beforeDestroy:function(){},created:function(){}},j=_,D=(a("1ecf"),Object(w["a"])(j,S,V,!1,null,"a292d2da",null)),N=D.exports,P=N;function M(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function $(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?M(a,!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):M(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var F={name:"addGoods",props:{modal:{type:Boolean,default:!1}},components:{iCopyright:l["a"],chooseClass:O,addFolder:P},data:function(){var t=this,e=function(e,a,n){t.formValidate.saleTime.length<1?n(new Error("请选择销售时间")):n()},a=function(e,a,n){t.formValidate.useTime.length<1?n(new Error("请选择使用时间")):n()};return{formValidate:{goodsId:"",goodsNo:"",goodsName:"",categoryId:"",subjectId:[-1],gradeId:[-1],attr:"",unit:"",purchasePrice:"",price:"",joinInPrice:"",status:"1",description:"",courseIds:[],courseList:[-1],campusIds:[],campusList:[-1],courseType:[-1],classType:[-1],stageType:[-1],type:[-1],subject:[-1],saleTime:[-1],saleStartTime:"",saleEndTime:"",useTime:[-1],useStartTime:"",useEndTime:"",isUseOne:!1,isUseTwo:!1,discount:"",applyGoods:!1,isCard:2},ruleValidate:{categoryId:[{required:!0,message:"请选择物品分类",trigger:"change"}],goodsName:[{required:!0,message:"请输入物品名称",trigger:"change"}],unit:[{required:!0,message:"请输入单位",trigger:"change"}],purchasePrice:[{required:!0,message:"请输入采购单价",trigger:"change"},{message:"请输入正确价格",trigger:"change",pattern:/^(([1-9]\d{0,9})|0)(\.\d{0,2})?$/}],price:[{required:!0,message:"请输入销售单价",trigger:"change"},{message:"请输入正确价格",trigger:"change",pattern:/^(([1-9]\d{0,9})|0)(\.\d{0,2})?$/}],joinInPrice:[{message:"请输入正确价格",trigger:"change",pattern:/^(([1-9]\d{0,9})|0)(\.\d{0,2})?$/}]},ruleValidate2:{categoryId:[{required:!0,message:"请选择物品分类",trigger:"change"}],goodsName:[{required:!0,message:"请输入物品名称",trigger:"change"}],unit:[{required:!0,message:"请输入单位",trigger:"change"}],price:[{required:!0,message:"请输入销售单价",trigger:"change"},{message:"请输入正确价格",trigger:"change",pattern:/^(([1-9]\d{0,9})|0)(\.\d{0,2})?$/}],discount:[{required:!0,message:"请输入折扣",trigger:"change"},{message:"请输入正确折扣",trigger:"change",pattern:/^(([1-9]\d{0,9})|0)?$/}],saleTime:[{required:!0,validator:e,trigger:"change"}],useTime:[{required:!0,validator:a,trigger:"change"}]},showModal:!1,method:"",folderList:[],loading:!1,isStore:0,campusList:[]}},computed:$({},Object(g["e"])("admin/global",["shiftGrade","subject","classType","classTerm","shiftCat","chargeinTypeList","courseTypeList"]),{unlimit:function(){var t={course:!1,campus:!1,courseType:!1,classType:!1,subjectId:!1,stageType:!1,gradeId:!1,type:!1,saleTime:!1,useTime:!1};return console.log(1),this.formValidate.courseList[0]&&-1===Number(this.formValidate.courseList[0])&&(t.course=!0),console.log(2),this.formValidate.campusIds[0]&&-1===Number(this.formValidate.campusIds[0])&&(t.campus=!0),console.log(3),this.formValidate.courseType[0]&&-1===Number(this.formValidate.courseType[0])&&(t.courseType=!0),console.log(4),this.formValidate.classType[0]&&-1===Number(this.formValidate.classType[0])&&(t.classType=!0),console.log(5),this.formValidate.subjectId[0]&&-1===Number(this.formValidate.subjectId[0])&&(t.subjectId=!0),console.log(6),this.formValidate.stageType[0]&&-1===Number(this.formValidate.stageType[0])&&(t.stageType=!0),console.log(7),this.formValidate.gradeId[0]&&-1===Number(this.formValidate.gradeId[0])&&(t.gradeId=!0),console.log(8),this.formValidate.type[0]&&-1===Number(this.formValidate.type[0])&&(t.type=!0),console.log(9),this.formValidate.saleTime[0]&&-1===Number(this.formValidate.saleTime[0])&&(t.saleTime=!0),console.log(10),this.formValidate.useTime[0]&&-1===Number(this.formValidate.useTime[0])&&(t.useTime=!0),t}}),methods:{handleReset:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.showModal=!1,this.loading=!1,e?this.$emit("submitGoods",this.folderList):this.$emit("hideModal",this.folderList),this.$refs[t].resetFields()},handleSubmit:function(t){var e=this;this.loading=!0,this.$refs[t].validate((function(a){if(a){var n=JSON.parse(JSON.stringify(e.formValidate));console.log(n);var o=n.courseList;n.courseIds=[],e.unlimit.course?n.courseIds=[-1]:o.forEach((function(t){n.courseIds.push(t.courseId)})),n.applyGoods=n.applyGoods?1:0,n.subject=n.subjectId,1===Number(n.isCard)?(n.purchasePrice=n.price,n.saleStartTime=2===n.saleTime.length?n.saleTime[0]:"",n.saleEndTime=2===n.saleTime.length?n.saleTime[1]:"",n.useStartTime=2===n.useTime.length?n.useTime[0]:"",n.useEndTime=2===n.useTime.length?n.useTime[1]:""):n.isCard=2,Object(s["j"])($({},n)).then((function(a){e.$Message.success("保存成功"),e.handleReset(t,!0)})).catch((function(){e.loading=!1}))}else e.loading=!1,e.$Message.error("请将信息填写完整")}))},maxGradePlaceholder:function(t){return"等 "+(t+2)+"个年级"},maxSubjectPlaceholder:function(t){return"等 "+(t+2)+"个科目"},maxCourseTypePlaceholder:function(t){return"等 "+(t+2)+"项"},maxChargeinTypePlaceholder:function(t){return"等 "+(t+2)+"项"},maxClassTypePlaceholder:function(t){return"等 "+(t+2)+"项"},maxStageTypePlaceholder:function(t){return"等 "+(t+2)+"项"},maxCampusPlaceholder:function(t){return"等 "+(t+2)+"项"},selectAllSubject:function(t){console.log(t)},delClass:function(t){console.log(t),this.formValidate.courseList.splice(t,1)},handleChooseClass:function(t){var e=this.formValidate.courseList,a=[];-1===e[0]&&(e=[]),e.forEach((function(t){a.push(t.courseId+"")})),console.log(a),t.forEach((function(t){-1===a.indexOf(t.courseId+"")&&e.push(t)})),this.formValidate.courseList=e},getFolderList:function(){var t=this;Object(s["i"])().then((function(e){t.folderList=e.data.showList}))},loadData:function(t,e,a){this.folderList=a,this.showModal=!0,this.method=e,console.log(1111111111),this.formValidate="add"===e?{goodsId:0,subjectId:[-1],gradeId:[-1],attr:"",unit:"",purchasePrice:"",price:"",joinInPrice:"",status:"1",description:"",courseIds:[-1],courseList:[-1],campusIds:[-1],campusList:[-1],courseType:[-1],classType:[-1],stageType:[-1],type:[-1],subject:[-1],saleTime:[-1],saleStartTime:"",saleEndTime:"",useTime:[-1],useStartTime:"",useEndTime:"",isUseOne:!1,isUseTwo:!1,discount:"",applyGoods:!1,isCard:2}:JSON.parse(JSON.stringify(t))},cliclUnlimt1:function(t){this.formValidate.courseList=t?[-1]:[]},cliclUnlimt2:function(t){this.formValidate.campusIds=t?[-1]:[]},cliclUnlimt3:function(t){console.log(t),this.formValidate.courseType=t?[-1]:[],console.log(this.formValidate.courseType)},cliclUnlimt4:function(t){this.formValidate.classType=t?[-1]:[]},cliclUnlimt5:function(t){this.formValidate.subjectId=t?[-1]:[]},cliclUnlimt6:function(t){this.formValidate.stageType=t?[-1]:[]},cliclUnlimt7:function(t){this.formValidate.gradeId=t?[-1]:[]},cliclUnlimt8:function(t){this.formValidate.type=t?[-1]:[]},cliclUnlimt9:function(t){this.formValidate.saleTime=t?[-1]:[]},cliclUnlimt10:function(t){this.formValidate.useTime=t?[-1]:[]},cliclUnlimt11:function(t){console.log(this.formValidate.isUseOne)},cliclUnlimt12:function(t){console.log(this.formValidate.isUseTwo)},changeCategory:function(t){var e=this;this.folderList.forEach((function(a){Number(a.categoryId)===Number(t)&&(e.isStore=Number(a.isStore),e.formValidate.isCard=1===Number(a.isStore)?1:2)}))},getCampusList:function(){var t=this;Object(u["A"])({}).then((function(e){t.campusList=e.data.list}))},changeUseTime:function(t){this.formValidate.useTime=t,console.log(t)},changeSaleTime:function(t){console.log(t),this.formValidate.saleTime=t}},mounted:function(){this.getCampusList()},beforeDestroy:function(){},created:function(){}},L=F,E=(a("cada"),Object(w["a"])(L,c,d,!1,null,"44baa3b2",null)),A=E.exports,R=A;function W(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function z(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?W(a,!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):W(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var B={name:"goodsPage",components:{iCopyright:l["a"],addGoods:R,addFolder:P},data:function(){var t=this;return{children:[{btnTitle:"新建",btnClass:"marginRight-20",btnType:"primary",btnHandle:"addShow",btnHandleParmas:"",btnIsTable:!1},{btnTitle:"修改",btnClass:"marginRight-20",btnType:"primary",btnHandle:"editGoods",btnHandleParmas:"",btnIsTable:!0},{btnTitle:"删除",btnClass:"",btnType:"error",btnHandle:"handleDel",btnHandleParmas:"",btnIsTable:!0}],modal:!1,columns:[{title:"名称",minWidth:120,render:function(e,a){return e("div",[e("a",{on:{click:function(){t.editGoods(a.row)}}},a.row.goodsName)])}},{title:"类别",key:"categoryName",minWidth:100},{title:"代码",key:"goodsNo",minWidth:100},{title:"规格",key:"attr",minWidth:100},{title:"状态",key:"statusName",minWidth:100},{title:"采购单价",key:"purchasePrice",minWidth:100},{title:"销售单价",key:"price",minWidth:100},{title:"加盟单价",key:"joinInPrice",minWidth:100},{title:"单位",key:"unit",minWidth:100},{title:"描述",key:"description",minWidth:100},{title:"操作",key:"action",minWidth:150,render:function(e,a){var n=[];return t.children.forEach((function(o){o.btnIsTable&&n.push(e("Button",{props:{size:"small",type:o.btnType},style:{marginRight:"10px"},on:{click:function(){t.handleEvent(o.btnHandle,a.row)}}},o.btnTitle))})),e("div",n)}}],data:[],searchValidate:{goodsName:"",status:0},pageInfo:{pageSize:10,page:1,pageSum:0,count:0},loading:!1,selectedArr:[],folderList:[],curIndex:"",goodsImportTemplate:s["d"],goodsExortTemplate:s["e"],dataImport:s["p"],uploadData:{token:r["a"].cookies.get("token")}}},computed:{},watch:{},methods:{addShow:function(){this.$refs.addGoods.loadData({},"add",this.folderList)},editGoods:function(t){console.log(t),t=JSON.parse(JSON.stringify(t));var e=t.courseIds||[],a=t.courseName?t.courseName.split(","):[],n=[];e=e.filter((function(t){return""!==t})),e[0]&&-1===Number(e[0])?n=[-1]:e.forEach((function(t,e){a[e]&&n.push({courseId:t,courseName:a[e]})})),t.campusIds=t.campusIds?(t.campusIds+"").split(","):[],t.courseType=t.courseType?(t.courseType+"").split(","):[],t.classType=t.classType?t.classType.split(","):[],t.type=t.type?t.type.split(","):[],t.stageType=t.stageType?t.stageType.split(","):[],t.status=t.status+"",t.courseList=n,t.saleTime=t.saleStartTime?[t.saleStartTime,t.saleEndTime]:[-1],t.useTime=t.useStartTime?[t.useStartTime,t.useEndTime]:[-1],t.subjectId=t.subjectId||[],t.gradeId=t.gradeId||[],t.isUseOne=1===t.isUseOne,t.isUseTwo=1===t.isUseTwo,t.discount=t.discount+"",t.categoryId=t.categoryId+"",t.applyGoods=1===Number(t.applyGoods),console.log(t),this.$refs.addGoods.loadData(t,"edit",this.folderList)},resetSearch:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.searchValidate={goodsName:"",status:0},this.getData()},search:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},changePage:function(t){this.pageInfo.page=t,this.getData()},changeSelect:function(t){var e=this;this.selectedArr=[],console.log(t),t.forEach((function(t){e.selectedArr.push(t.id)}))},clearSelectd:function(){this.$refs.tableData.selectAll(!1),this.selectedArr=[]},getFolderList:function(){var t=this;Object(s["i"])().then((function(e){t.folderList=e.data.showList}))},changeCategory:function(t){this.curIndex=t,this.search()},getData:function(){var t=this;this.loading=!0,this.data=[];var e=Number(this.searchValidate.status);Object(s["l"])(z({},this.pageInfo,{goodsName:this.searchValidate.goodsName,status:0===e?[1,2]:[e],categoryId:this.curIndex})).then((function(e){t.loading=!1,t.data=e.data.showList,t.pageInfo=e.data.pageInfo}))},handleDel:function(t){var e=this,a=[];a.push(t.goodsId),0!==a.length?this.$Modal.confirm({title:"提示",content:"<p>确认删除物品吗？</p>",onOk:function(){Object(s["k"])({goodsIds:a}).then((function(t){e.$Message.success("删除成功");var n=e.pageInfo.page;if(n===e.pageInfo.pageSum){var o=e.pageInfo.pageSize,i=e.pageInfo.count,s=i-o*(n-1);s===a.length&&(n=1===n?1:n-1)}e.changePage(n)}))},onCancel:function(){}}):this.$Message.error("请选择物品")},handleFolderDel:function(t){var e=this;0!==t.length?this.$Modal.confirm({title:"提示",content:"<p>确认删除分类吗？</p>",onOk:function(){Object(s["g"])({categoryIds:t}).then((function(t){e.$Message.success("删除成功"),e.getFolderList()}))},onCancel:function(){}}):this.$Message.error("请选择类别")},handleChangeTime:function(t){console.log(t)},hideModal:function(t){this.folderList=t},submitGoods:function(t){this.folderList=t,this.getData()},exportData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(0===t){var e=0===Number(this.searchValidate.status)?[1,2]:[this.searchValidate.status],a="";e.forEach((function(t){a=a+"&status[]="+t})),window.open(this.goodsImportTemplate+"?goodsName="+this.searchValidate.goodsName+a+"&token="+r["a"].cookies.get("token"))}else window.open(this.goodsExortTemplate+"?token="+r["a"].cookies.get("token")+"&schoolId="+r["a"].cookies.get("schoolId"))},handleSuccess:function(t,e){0!==t.ret?this.$Notice.warning({title:"导入失败",desc:t.msg||""}):(this.$Notice.success({title:"导入成功"}),this.getData())},exportError:function(){this.$Message.error("导入失败")},handleMaxSize:function(t){this.$Notice.warning({title:"超出文件大小限制",desc:"文件  "+t.name+"太大, 不能大于10M"})},handleEvent:function(t,e){this.$emit(t,e)}},mounted:function(){this.getFolderList(),this.curIndex=0,this.resetSearch()},beforeDestroy:function(){},created:function(){var t=this;this.children.forEach((function(e){t.$on(e.btnHandle,t[e.btnHandle])}))}},H=B,U=(a("8962"),Object(w["a"])(H,n,o,!1,null,"111ff013",null));e["default"]=U.exports},aa77:function(t,e,a){var n=a("5ca1"),o=a("be13"),i=a("79e5"),s=a("fdef"),r="["+s+"]",l="​",c=RegExp("^"+r+r+"*"),d=RegExp(r+r+"*$"),u=function(t,e,a){var o={},r=i((function(){return!!s[t]()||l[t]()!=l})),c=o[t]=r?e(m):s[t];a&&(o[a]=c),n(n.P+n.F*r,"String",o)},m=u.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(d,"")),t};t.exports=u},aa7d:function(t,e,a){},aae4:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("div",[a("Form",{staticClass:"form-box",class:t.isShow?"":"none",attrs:{model:t.searchKey,inline:""}},[a("Row",[a("FormItem",{attrs:{label:"类型","label-position":"top","label-width":50}},[a("RadioGroup",{on:{"on-change":t.getList},model:{value:t.searchKey.type,callback:function(e){t.$set(t.searchKey,"type",e)},expression:"searchKey.type"}},[a("Radio",{attrs:{label:"1"}},[t._v("收入")]),a("Radio",{attrs:{label:"2"}},[t._v("支出")])],1)],1)],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"space-between","padding-bottom":"20px"}},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.show({},"add")}}},[t._v("新增")])],1),a("Table",{staticStyle:{"font-size":"14px"},attrs:{loading:t.loading,"expand-key":"title",selectable:!1,"expand-type":!1,columns:t.columns,data:t.tableData},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.row;return[a("Icon",{staticClass:"margin-right-20",attrs:{size:"20",type:"md-create"},on:{click:function(e){return t.show(n,"edit")}}})]}}])})],1)]),a("Modal",{attrs:{"mask-closable":!1,title:t.erTitle,width:600},on:{"on-cancel":function(e){return t.handleReset("formData")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{ref:"formData",attrs:{"label-width":130,model:t.formData,rules:t.ruleInline}},[a("FormItem",{attrs:{label:"名称",prop:"name"}},[a("Input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("FormItem",{attrs:{label:"类型",prop:"type"}},[a("Select",{model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},t._l(t.typelist,(function(e){return a("Option",{key:e.type,attrs:{value:e.type}},[t._v(t._s(e.name))])})),1)],1)],1),a("template",{slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formData")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formData")}}},[t._v("确定")])],1)],2)],1)},o=[],i=(a("7f7f"),a("9411")),s={components:{},data:function(){return{searchKey:{type:"1"},typelist:[{type:1,name:"收入"},{type:2,name:"支出"}],formData:{},showModal:!1,type:"",isShow:!1,loading:!0,erTitle:"",status:"",columns:[{title:"编号",key:"id",width:"250px"},{title:"名称",key:"name",width:"250px"},{title:"类型",key:"typeName",width:"250px",sortable:!0},{title:"操作",width:"200px",type:"template",slot:"action"}],tableData:[],list:[],ruleInline:{name:[{required:!0,message:"请填写名称",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change",type:"number"}]}}},created:function(){this.getList()},methods:{getInfo:function(t){var e=this;Object(i["s"])({id:t}).then((function(t){0===t.ret?e.formData=t.data.info:e.$Message.error(t.msg||"接口错误")}))},getList:function(){var t=this;this.loading=!0,Object(i["t"])({type:this.searchKey.type}).then((function(e){0===e.ret?(t.tableData=e.data.list,t.loading=!1):(t.$Message.error(e.msg||"接口错误"),t.loading=!1)}))},show:function(t,e){this.status=e,"add"===e?(this.erTitle="新增",this.id=0):"edit"===e&&(this.erTitle="编辑",this.id=t.id,this.getInfo(t.id)),this.showModal=!0},handleReset:function(t){this.showModal=!1,this.id=0,this.$refs[t].resetFields()},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(a){a?Object(i["u"])({id:e.id,name:e.formData.name,type:e.formData.type}).then((function(a){e.$Message.success("保存成功！"),e.showModal=!1,e.getList(),e.$refs[t].resetFields()})):e.$Message.error("表单验证失败!")}))}}},r=s,l=(a("5597"),a("2877")),c=Object(l["a"])(r,n,o,!1,null,"9b02ea28",null);e["default"]=c.exports},ac78:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("Form",{ref:"formCustom",attrs:{"label-width":100}},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{xs:24,md:24,lg:8}},[a("FormItem",{attrs:{label:"物品名称"}},[a("Input",{attrs:{type:"text",placeholder:"请输入物品名称",clearable:""},model:{value:t.searchValidate.goodsName,callback:function(e){t.$set(t.searchValidate,"goodsName",e)},expression:"searchValidate.goodsName"}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:8}},[a("FormItem",{attrs:{label:"日期"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{value:t.searchValidate.time,type:"daterange","split-panels":"",placement:"bottom-end",placeholder:"请选择时间"},on:{"on-change":t.handleChangeTime}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:8}},[a("FormItem",{staticStyle:{"text-align":"right"}},[a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),a("Button",{staticClass:"ivu-ml-8",on:{click:t.resetSearch}},[t._v("重置")])],1)],1)],1)],1),a("div",[a("div",[a("Table",{ref:"tableData",attrs:{"highlight-row":"",border:"",columns:t.columns,data:t.data,loading:t.loading}})],1),a("div",{staticClass:"ivu-mt ivu-text-center"},[a("Page",{attrs:{"page-size":t.pageInfo.pageSize,total:Number(t.pageInfo.count),current:t.pageInfo.page},on:{"on-change":t.changePage}})],1)])],1)],1)},o=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("c5f6"),a("bd86")),s=a("915b"),r=a("2f08");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(a,!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={name:"stockChangePage",components:{iCopyright:r["a"]},data:function(){return{modal:!1,columns:[{title:"名称",key:"goodsName",minWidth:80},{title:"单位",key:"unit",minWidth:80},{title:"入库",align:"center",children:[{title:"进货",align:"center",minWidth:80,render:function(t,e){return t("div",[t("div",{},e.row.inHouse.purchase.num)])}},{title:"拨入",key:"cname",align:"center",minWidth:80,render:function(t,e){return t("div",[t("div",{},e.row.inHouse.allocation.num)])}},{title:"退领",key:"caddress",align:"center",minWidth:80,render:function(t,e){return t("div",[t("div",{},e.row.inHouse.withdrawalOfCollar.num)])}},{title:"销售退回",key:"cname",align:"center",minWidth:80,render:function(t,e){return t("div",[t("div",{},e.row.inHouse.saleReturn.num)])}}]},{title:"出库",align:"center",children:[{title:"退货",key:"caddress",align:"center",minWidth:80,render:function(t,e){return t("div",[t("div",{},e.row.outHouse.returnGoods.num)])}},{title:"拨出",key:"cname",align:"center",minWidth:80,render:function(t,e){return t("div",[t("div",{},e.row.outHouse.allocation.num)])}},{title:"领用",key:"caddress",align:"center",minWidth:80,render:function(t,e){return t("div",[t("div",{},e.row.outHouse.collarUse.num)])}},{title:"销售",key:"cname",align:"center",minWidth:80,render:function(t,e){return t("div",[t("div",{},e.row.outHouse.sale.num)])}},{title:"报损",key:"cname",align:"center",minWidth:80,render:function(t,e){return t("div",[t("div",{},e.row.outHouse.reportLoss.num)])}}]},{title:"调整",key:"city",minWidth:80,render:function(t,e){return t("div",[t("div",{},e.row.inva.num)])}}],data:[],formValidate:{name:"",type:"0",gender:"",desc:"",campus:[]},searchValidate:{categoryId:"",goodsName:"",startTime:"",endTime:"",time:[]},goodsType:"",dateOptions:{shortcuts:[{text:"近 7 天",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-6048e5),[e,t]}},{text:"近 1 月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-2592e6),[e,t]}},{text:"近 3 月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-7776e6),[e,t]}}]},pageInfo:{pageSize:10,page:1,pageSum:0,count:0},houseId:"",categoryList:[],houseList:[],loading:!1}},computed:{},watch:{},methods:{resetSearch:function(){this.searchValidate={categoryId:"",goodsName:"",startTime:"",endTime:"",time:[]},this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},search:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},changePage:function(t){this.pageInfo.page=t,this.getData()},getData:function(){var t=this;this.loading=!0,this.data=[],this.selectedArr=[],Object(s["u"])(c({page:this.pageInfo.page,pageSize:this.pageInfo.pageSize},this.searchValidate,{houseId:this.houseId,goodsType:this.goodsType})).then((function(e){t.loading=!1,t.data=e.data.showList,t.pageInfo=e.data.pageInfo}))},getConfig:function(){this.houseId=1,this.resetSearch()},handleChangeTime:function(t){this.searchValidate.startTime=t[0]||"",this.searchValidate.endTime=t[1]||""}},mounted:function(){this.goodsType=Number(this.$route.query.goodsType)||2,this.getConfig()},beforeDestroy:function(){},created:function(){}},u=d,m=(a("4524"),a("2877")),h=Object(m["a"])(u,n,o,!1,null,"629417c8",null);e["default"]=h.exports},b1c3:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("Form",{ref:"formCustom",attrs:{"label-width":100}},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{xs:24,md:24,lg:8}},[a("FormItem",{attrs:{label:"物品名称"}},[a("Input",{attrs:{type:"text",placeholder:"请输入物品名称",clearable:""},model:{value:t.searchValidate.goodsName,callback:function(e){t.$set(t.searchValidate,"goodsName",e)},expression:"searchValidate.goodsName"}})],1)],1),a("Col",{attrs:{xs:24,md:24,lg:8}},[a("FormItem",{attrs:{label:"启用状态"}},[a("Select",{attrs:{clearable:"",filterable:"",placeholder:"请选择启用状态"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("Option",{attrs:{value:"1"}},[t._v("启用")]),a("Option",{attrs:{value:"2"}},[t._v("停用")])],1)],1)],1),a("Col",{attrs:{xs:24,md:24,lg:8}},[a("FormItem",{staticStyle:{"text-align":"right"}},[a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),a("Button",{staticClass:"ivu-ml-8",on:{click:t.resetSearch}},[t._v("重置")])],1)],1)],1)],1),a("div",[a("div",[a("Table",{ref:"tableData",attrs:{columns:t.columns,data:t.data},on:{"on-selection-change":t.changeSelect}})],1),a("div",{staticClass:"ivu-mt ivu-text-center"},[a("Page",{attrs:{"page-size":t.pageInfo.pageSize,total:Number(t.pageInfo.count),current:t.pageInfo.page},on:{"on-change":t.changePage}})],1)])],1),a("stockInfo",{ref:"stockInfo"})],1)},o=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("c5f6"),a("bd86")),s=(a("7f7f"),a("915b")),r=a("2f08"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,title:"库存分布-"+t.goodsName},on:{"on-cancel":t.handleReset},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",[a("Table",{ref:"tableData",attrs:{columns:t.columns,data:t.data},on:{"on-selection-change":t.changeSelect}})],1),a("div",{staticClass:"ivu-mt ivu-text-center"},[a("Page",{attrs:{"page-size":t.pageInfo.pageSize,total:Number(t.pageInfo.count),current:t.pageInfo.page},on:{"on-change":t.changePage}})],1)])],1)},c=[];function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(a,!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var m={name:"stockInfo",components:{iCopyright:r["a"]},data:function(){return{data:[],showModal:!1,pageInfo:{pageSize:10,page:1,pageSum:0,count:0},columns:[{title:"库存名称",key:"houseName",minWidth:100,sortable:!0,align:"center"},{title:"当前库存",key:"stockNum",minWidth:100,sortable:!0,align:"center"}],goodsId:0,goodsName:""}},computed:{},methods:{loadData:function(t,e){this.showModal=!0,this.goodsName=e,this.goodsId=t,this.getStockInfo()},getStockInfo:function(){var t=this;this.data=[],console.log(1111),Object(s["s"])(u({goodsId:this.goodsId},this.pageInfo)).then((function(e){t.data=e.data.showList,t.data.length>0&&t.data.push({houseName:"合计",stockNum:e.data.stockNum}),t.pageInfo=e.data.pageInfo}))},handleReset:function(){this.showModal=!1,this.$emit("hideModal")},changePage:function(t){this.pageInfo.page=t,this.getStockInfo()},changeSelect:function(){}},mounted:function(){},beforeDestroy:function(){},created:function(){}},h=m,f=(a("9e16"),a("2877")),p=Object(f["a"])(h,l,c,!1,null,"7629bb91",null),g=p.exports;function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(a,!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var v={name:"stockPage",components:{iCopyright:r["a"],stockInfo:g},data:function(){var t=this;return{modal:!1,columns:[{title:"名称",minWidth:120,render:function(e,a){return e("div",[e("a",{on:{click:function(){t.$refs.stockInfo.loadData(a.row.id,a.row.name)}}},a.row.name)])}},{title:"编号",key:"number",minWidth:100},{title:"单位",key:"unit",minWidth:100},{title:"当前库存",key:"stockNum",minWidth:100}],data:[],searchValidate:{goodsName:"",categoryId:""},goodsType:1,pageInfo:{pageSize:10,page:1,pageSum:0,count:0},houseId:"",status:"1",houseList:[],categoryList:[]}},computed:{},watch:{},methods:{resetSearch:function(){this.searchValidate={goodsName:"",categoryId:""},this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},search:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},changePage:function(t){this.pageInfo.page=t,this.getData()},getData:function(){var t=this;this.loading=!0,this.data=[],this.selectedArr=[],Object(s["r"])(y({page:this.pageInfo.page,pageSize:this.pageInfo.pageSize},this.searchValidate,{houseId:this.houseId,goodsType:this.goodsType,status:this.status})).then((function(e){t.loading=!1,t.data=e.data.showList,t.pageInfo=e.data.pageInfo}))},getConfig:function(){this.houseId=1,this.resetSearch()},changeSelect:function(){}},mounted:function(){this.goodsType=Number(this.$route.query.goodsType)||2,this.getConfig()},beforeDestroy:function(){},created:function(){}},I=v,w=(a("20e9"),Object(f["a"])(I,n,o,!1,null,"15e33030",null));e["default"]=w.exports},b529:function(t,e,a){},b545:function(t,e,a){},bd91:function(t,e,a){},c4c8:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return l})),a.d(e,"d",(function(){return c})),a.d(e,"a",(function(){return d}));var n=a("c276"),o=a("b6bd"),i=n["a"].cookies.get("token"),s=a("4328");function r(t){return Object(o["a"])({url:"/goods/manage/list?token="+i,method:"post",data:s.stringify(t)})}function l(t){return Object(o["a"])({url:"/goods/manage/info?token="+i,method:"post",data:t})}function c(t){return Object(o["a"])({url:"/goods/manage/save?token="+i,method:"post",data:t})}function d(t){return Object(o["a"])({url:"/goods/manage/del?token="+i,method:"post",data:t})}},c5f6:function(t,e,a){"use strict";var n=a("7726"),o=a("69a8"),i=a("2d95"),s=a("5dbc"),r=a("6a99"),l=a("79e5"),c=a("9093").f,d=a("11e9").f,u=a("86cc").f,m=a("aa77").trim,h="Number",f=n[h],p=f,g=f.prototype,b=i(a("2aeb")(g))==h,y="trim"in String.prototype,v=function(t){var e=r(t,!1);if("string"==typeof e&&e.length>2){e=y?e.trim():m(e,3);var a,n,o,i=e.charCodeAt(0);if(43===i||45===i){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+e}for(var s,l=e.slice(2),c=0,d=l.length;c<d;c++)if(s=l.charCodeAt(c),s<48||s>o)return NaN;return parseInt(l,n)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof f&&(b?l((function(){g.valueOf.call(a)})):i(a)!=h)?s(new p(v(e)),a,f):v(e)};for(var I,w=a("9e1e")?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)o(p,I=w[x])&&!o(f,I)&&u(f,I,d(p,I));f.prototype=g,g.constructor=f,a("2aba")(n,h,f)}},cada:function(t,e,a){"use strict";var n=a("39fd"),o=a.n(n);o.a},cc73:function(t,e,a){"use strict";var n=a("d071"),o=a.n(n);o.a},d071:function(t,e,a){},d52c:function(t,e,a){},d9e1:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,title:"选择"+(2==t.type?"物料":2==t.isFinished?"半成品":"产品"),width:1e3},on:{"on-cancel":function(e){return t.handleReset("formValidate")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"choose-class",class:t.isMobile?"":"wrapper"},[a("Card",{class:t.isMobile?"":"right-content"},[a("Form",{ref:"formCustom",attrs:{"label-width":100}},[a("Row",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{xs:24,md:12,lg:12}},[a("Input",{staticStyle:{width:"95%"},attrs:{type:"text",placeholder:"请输入"+(2==t.type?"物料":2==t.isFinished?"半成品":"产品")+"名称",clearabl:""},model:{value:t.searchValidate.name,callback:function(e){t.$set(t.searchValidate,"name",e)},expression:"searchValidate.name"}})],1),a("Col",{attrs:{xs:24,md:12,lg:12}},[a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),a("Button",{staticClass:"ivu-ml-8",on:{click:t.resetSearch}},[t._v("重置")]),t.showMore||1!=t.type||t.isFinished?t._e():a("a",{staticClass:"ivu-ml-8",attrs:{type:"text"},on:{click:function(e){t.showMore=!t.showMore}}},[t._v("\n              展开\n              "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),t.showMore?a("a",{staticClass:"ivu-ml-8",attrs:{type:"text"},on:{click:function(e){t.showMore=!t.showMore}}},[t._v("\n              收起\n              "),a("Icon",{attrs:{type:"ios-arrow-up"}})],1):t._e()],1)],1),t.showMore?a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{xs:24,md:12,lg:12}},[a("FormItem",{attrs:{label:"产品类型：","label-position":"top","label-width":90}},[a("RadioGroup",{model:{value:t.searchValidate.isFinished,callback:function(e){t.$set(t.searchValidate,"isFinished",e)},expression:"searchValidate.isFinished"}},[a("Radio",{attrs:{label:0}},[t._v("全部")]),a("Radio",{attrs:{label:2}},[t._v("半成品")]),a("Radio",{attrs:{label:1}},[t._v("成品")])],1)],1)],1)],1):t._e()],1),a("div",[a("div",[a("Table",{ref:"tableData",attrs:{columns:t.columns,data:t.data,loading:t.loading},on:{"on-selection-change":t.changeSelect}})],1),a("div",{staticClass:"ivu-mt ivu-text-center"},[a("Page",{attrs:{"page-size":t.pageInfo.pageSize,total:Number(t.pageInfo.count),current:t.pageInfo.page},on:{"on-change":t.changePage}})],1)])],1),t.isMobile?t._e():a("Card",{staticClass:"left-content"},[a("div",{staticClass:"ivu-mt",attrs:{slot:"title"},slot:"title"},[a("Alert",[a("Icon",{staticClass:"ivu-mr-8",attrs:{color:"#2d8cf0",type:"ios-alert"}}),t._v("\n          已选择 "+t._s(t.selectedArr.length)+" 项\n          "),a("a",{staticClass:"ivu-ml-8",on:{click:t.clearSelectd}},[t._v("清空")])],1)],1),a("List",{attrs:{border:""}},[a("Scroll",{staticStyle:{flex:"1"},attrs:{height:415}},t._l(t.selectedArr,(function(e,n){return a("ListItem",{key:n},[a("ListItemMeta",{attrs:{avatar:"",title:e.name,description:""}}),a("template",{slot:"action"},[a("li",{on:{click:function(e){return t.delClass(n)}}},[a("Icon",{attrs:{type:"md-close-circle",size:"19"}})],1)])],2)})),1)],1)],1)],1),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)])},o=[],i=(a("8e6e"),a("456d"),a("386d"),a("ac6a"),a("bd86")),s=a("c4c8"),r=a("2f08"),l=a("2f62");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(a,!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u={name:"chooseMateriel",components:{iCopyright:r["a"]},props:{modal:{type:Boolean,default:!1},selected:{type:Array,default:function(){return[]}}},data:function(){return{columns:[{type:"selection",minWidth:50},{title:"名称",minWidth:100,key:"name"},{title:"单位",key:"unit",minWidth:100},{title:"库存",key:"stock",minWidth:100}],data:[],searchValidate:{name:"",isFinished:0,type:""},showModal:!1,selectedArr:[],showMore:!1,pageInfo:{pageSize:10,page:1,pageSum:0,count:0},type:"",isFinished:"",loading:!0}},computed:d({},Object(l["e"])("admin/layout",["isMobile"])),watch:{},methods:{changeSelect:function(t){var e=this;this.selectedArr=[],t.forEach((function(t){e.selectedArr.push(t)}))},clearSelectd:function(){this.$refs.tableData.selectAll(!1),this.selectedArr=[]},handleReset:function(t){this.showModal=!1,this.$emit("hideModal")},handleSubmit:function(t){this.showModal=!1,this.$emit("handleChoose",this.selectedArr)},delClass:function(t){var e=this,a="";this.data.some((function(n,o){n.id===e.selectedArr[t].id&&(a=o)})),this.$refs.tableData.toggleSelect(a)},resetSearch:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.searchValidate={name:"",isFinished:this.isFinished,type:this.type},this.getData()},search:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},changePage:function(t){this.pageInfo.page=t,this.getData()},getData:function(){var t=this;this.loading=!0,this.data=[],Object(s["c"])(d({},this.pageInfo,{},this.searchValidate)).then((function(e){t.loading=!1,t.data=e.data.list,t.pageInfo=e.data.pageInfo}))},loadData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;console.log(111111111111),2==e?(this.isFinished="",this.type=2):(this.isFinished=t||0,this.type=1),this.searchValidate.isFinished=this.isFinished,this.searchValidate.type=this.type,this.searchValidate.name="",this.showModal=!0,this.selectedArr=[],this.search()}},mounted:function(){},beforeDestroy:function(){},created:function(){}},m=u,h=(a("8f7d"),a("2877")),f=Object(h["a"])(m,n,o,!1,null,"77a3ce5e",null);e["a"]=f.exports},e113:function(t,e,a){"use strict";var n=a("d52c"),o=a.n(n);o.a},fa0b:function(t,e,a){},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},ff03:function(t,e,a){},ff72:function(t,e,a){}}]);