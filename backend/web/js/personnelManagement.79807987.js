(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["personnelManagement"],{"0c23":function(t,e,a){},"10b4":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Drawer",{attrs:{title:"修改权限",width:"820","mask-closable":!1,styles:t.styles},on:{"on-close":function(e){return t.cancel("formatData")}},model:{value:t.showAdd,callback:function(e){t.showAdd=e},expression:"showAdd"}},[t.loading?t._e():a("Tree",{ref:"listTree",attrs:{data:t.treeList,"show-checkbox":""},on:{"on-check-change":t.selectValue}}),t.loading?a("div",[a("Spin",{attrs:{size:"large"}})],1):t._e(),a("div",{staticClass:"demo-drawer-footer"},[a("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.cancel("formatData")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.btLoding},on:{click:function(e){return t.handleSubmit("formatData")}}},[t._v("确定")])],1)],1)],1)},o=[],n=a("580a"),s={name:"addContractor",data:function(){return{loading:!0,editData:{groupName:""},twoList:[],btLoding:!1,headers:{"Access-Control-Allow-Origin":"*"},showAdd:!1,styles:{height:"calc(100% - 55px)",overflow:"auto",paddingBottom:"53px",position:"static"},checkFormData:{groupName:[{required:!0,message:"角色名称不能为空",trigger:"blur"}]},groupId:"",treeList:[],type:2}},watch:{},props:{erTitle:{type:String}},methods:{selectValue:function(t){var e=[];e=this.$refs.listTree.getCheckedAndIndeterminateNodes(),console.log(e,"===");var a=function t(a){for(var i=0;i<a.length;i++){a[i].isChecked=!1;for(var o=0;o<e.length;o++)e[o].menuId==a[i].menuId&&(a[i].isChecked=!0);a[i].children&&a[i].children.length>0&&t(a[i].children)}};a(this.treeList)},DrawerToShow:function(t){this.type=t,this.showAdd=!0},handleSubmit:function(t){var e=this;Object(n["f"])({groupId:this.groupId,list:this.treeList,type:this.type}).then((function(t){e.$Message.success("保存成功"),e.showAdd=!1,e.$emit("callback")}))},cancel:function(t){this.showAdd=!1},loadData:function(t){this.groupId=t.value,this.editData.groupId=t.value||"",this.editData.groupName=t.title||"",this.getTreeList()},showHide:function(t){t.expand=!t.expand},changeCheck:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]},getTreeList:function(){var t=this;this.loading=!0,Object(n["e"])({groupId:this.groupId,type:this.type}).then((function(e){t.treeList=e.data.list,t.loading=!1}))}},created:function(){},mounted:function(){}},r=s,l=(a("e323"),a("2877")),c=Object(l["a"])(r,i,o,!1,null,null,null),d=c.exports;e["a"]=d},"18e2":function(t,e,a){},"1b22":function(t,e,a){},"22bf":function(t,e,a){},"264c":function(t,e,a){},"2f21":function(t,e,a){"use strict";var i=a("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},3298:function(t,e,a){},3560:function(t,e,a){"use strict";var i=a("264c"),o=a.n(i);o.a},3579:function(t,e,a){},"3b2b":function(t,e,a){var i=a("7726"),o=a("5dbc"),n=a("86cc").f,s=a("9093").f,r=a("aae3"),l=a("0bfb"),c=i.RegExp,d=c,m=c.prototype,u=/a/g,f=/a/g,p=new c(u)!==u;if(a("9e1e")&&(!p||a("79e5")((function(){return f[a("2b4c")("match")]=!1,c(u)!=u||c(f)==f||"/a/i"!=c(u,"i")})))){c=function(t,e){var a=this instanceof c,i=r(t),n=void 0===e;return!a&&i&&t.constructor===c&&n?t:o(p?new d(i&&!n?t.source:t,e):d((i=t instanceof c)?t.source:t,i&&n?l.call(t):e),a?this:m,c)};for(var h=function(t){t in c||n(c,t,{configurable:!0,get:function(){return d[t]},set:function(e){d[t]=e}})},b=s(d),g=0;b.length>g;)h(b[g++]);m.constructor=c,c.prototype=m,a("2aba")(i,"RegExp",c)}a("7a56")("RegExp")},"3b37":function(t,e,a){},"40cb":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[""!=t.picArr.picName?i("div",{staticClass:"demo-upload-list"},[[i("img",{attrs:{src:t.demainUrl+t.picArr.pic}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(e){return t.handleView(t.picArr.pic)}}}),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(e){return t.handleRemove(e)}}})],1)]],2):t._e(),i("Upload",{directives:[{name:"show",rawName:"v-show",value:"view"!=t.status&&""==t.picArr.picName,expression:"status!='view' && picArr.picName == ''"}],ref:"upload",staticStyle:{display:"inline-block",width:"100px",height:"100px"},attrs:{name:"img","show-upload-list":!1,"on-success":t.handleSuccess,format:["jpg","jpeg","png","gif"],"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.beforeUpload,type:"drag",action:t.uploadImg}},[i("Modal",{attrs:{title:"图片预览"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.visible?i("img",{staticStyle:{width:"100%"},attrs:{src:t.imgName}}):t._e()]),i("div",{staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[t.loadingImg?t._e():i("Icon",{attrs:{type:"ios-camera",size:"30"}}),t.loadingImg?i("img",{staticStyle:{display:"inline-block",width:"50px",height:"50px","margin-top":"25px"},attrs:{src:a("12ae")}}):t._e()],1)],1)],1)},o=[],n=(a("7f7f"),a("ba9f")),s=a("7e1e"),r=a("c276"),l={data:function(){return{loadingImg:!1,picName:"",uploadImg:s["b"],demainUrl:r["a"].cookies.get("domainUrl"),headers:{"Access-Control-Allow-Origin":"*"},visible:!1,imgName:""}},props:{status:{type:String},picArr:{type:Object}},computed:{},methods:{beforeUpload:function(t){return this.loadingImg=!0,new Promise((function(e,a){console.log("压缩前",t),n["compressAccurately"](t,1e3).then((function(a){a=new File([a],t.name,{type:a.type,lastModified:Date.now()}),console.log("压缩后",a),e(a)}))}))},handleSuccess:function(t,e){this.loadingImg=!1,0==t.ret?(this.picArr.picName=t.data.imgUrl,this.picArr.pic=t.data.url,this.$emit("uploadSuccess",this.picArr)):this.$Notice.warning({title:"上传失败",desc:t.msg})},handleFormatError:function(t){this.loadingImg=!1,this.loadingSmall=!1,this.$Notice.warning({title:"图片格式上传错误",desc:"文件 "+t.name+" 格式错误, 请选择图片格式例jpg,png,gif"})},handleMaxSize:function(t){this.loadingImg=!1,this.loadingSmall=!1,this.$Notice.warning({title:"超出文件大小限制",desc:"文件  "+t.name+"太大, 不能大于2M"})},handleRemove:function(){this.loadingImg=!0,this.$set(this.picArr,"picName",""),this.$set(this.picArr,"pic",""),this.loadingImg=!1,this.$emit("uploadSuccess",this.picArr)},handleView:function(t){this.imgName=this.demainUrl+t,this.visible=!0}},created:function(){},mounted:function(){}},c=l,d=(a("5ee3"),a("2877")),m=Object(d["a"])(c,i,o,!1,null,"cef48bb6",null);e["a"]=m.exports},4156:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-bottom":"10px"}},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.show({},"addNew")}}},[t._v("新增")])],1),a("tree-table",{staticStyle:{"font-size":"14px"},attrs:{loading:t.loading,"expand-key":"title","expand-type":!1,selectable:!1,columns:t.columns,data:t.tableData},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.row;return[a("Icon",{staticClass:"margin-right-20",attrs:{size:"20",type:"md-add"},on:{click:function(e){return t.show(i,"add")}}}),a("Icon",{staticClass:"margin-right-20",attrs:{size:"20",type:"md-create"},on:{click:function(e){return t.show(i,"edit")}}}),a("Icon",{staticClass:"margin-right-20",attrs:{size:"20",type:"ios-trash"},on:{click:function(e){return t.onDelete(i,"")}}})]}}])})],1),a("addOrganization",{ref:"Drawer",attrs:{erTitle:t.erTitle,status:t.status},on:{getList:t.getList}})],1)},o=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,title:t.erTitle+"组织",width:600},on:{"on-cancel":function(e){return t.handleReset("formData")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{ref:"formData",attrs:{"label-width":130,model:t.formData,rules:t.ruleInline}},[a("FormItem",{attrs:{label:"组织名称","label-position":"top",prop:"name"}},[a("Input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("FormItem",{attrs:{label:"组织代码","label-position":"top",prop:"code"}},[a("Input",{model:{value:t.formData.code,callback:function(e){t.$set(t.formData,"code",e)},expression:"formData.code"}})],1),a("FormItem",{attrs:{label:"组织简称","label-position":"top",prop:"abbreviation"}},[a("Input",{model:{value:t.formData.abbreviation,callback:function(e){t.$set(t.formData,"abbreviation",e)},expression:"formData.abbreviation"}})],1),a("FormItem",{attrs:{label:"组织类型","label-position":"top",prop:"isCompany"}},[a("Select",{model:{value:t.formData.isCompany,callback:function(e){t.$set(t.formData,"isCompany",e)},expression:"formData.isCompany"}},[a("Option",{attrs:{value:"0"}},[t._v("部门")]),a("Option",{attrs:{value:"1"}},[t._v("公司")])],1)],1),a("FormItem",{attrs:{label:"上级组织","label-position":"top"}},[a("Cascader",{attrs:{value:t.ids,data:t.organizationList,"change-on-select":""},on:{"on-change":t.change,"update:value":function(e){t.ids=e}}})],1),a("FormItem",{attrs:{label:"组织负责人","label-position":"top",prop:"staffId"}},[a("Select",{attrs:{filterable:""},model:{value:t.formData.staffId,callback:function(e){t.$set(t.formData,"staffId",e)},expression:"formData.staffId"}},t._l(t.staffList,(function(e,i){return a("Option",{key:i,attrs:{value:i}},[t._v(t._s(e))])})),1)],1),a("FormItem",{attrs:{label:"启用日期","label-position":"top",prop:"startTime"}},[a("Date-picker",{attrs:{value:t.formData.startTime,type:"date",placeholder:"选择日期"},on:{"on-change":function(e){t.formData.startTime=e}}})],1)],1),a("template",{slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formData")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formData")}}},[t._v("确定")])],1)],2)},s=[],r=(a("7f7f"),a("580a")),l={components:{},props:{erTitle:String,status:String},data:function(){return{loading:!0,sectionList:[],showModal:!1,formData:{name:"",startTime:"",parentId:0},staffList:{},organizationList:[],ruleInline:{name:[{required:!0,message:"请填写组织名称",trigger:"blur"}]},ids:[]}},computed:{},watch:{},methods:{getDetail:function(t){var e=this;Object(r["p"])({sectionId:t}).then((function(t){e.formData=t.data}))},getList:function(){var t=this;this.loading=!0,Object(r["q"])().then((function(e){if(t.loading=!1,0===e.ret){var a=e.data.list;t.organizationList=a.map((function(t,e){return{value:t.sectionId,label:t.title,children:t.children.map((function(t){return{value:t.sectionId,label:t.title}}))}}))}else t.$Message.error(e.msg||"接口错误")}))},getStaff:function(){var t=this;Object(r["C"])().then((function(e){t.staffList=e.data.select}))},DrawerToShow:function(t,e){this.ids=[],this.getStaff(),this.getList(),"add"===e?(this.ids=t.pids,this.ids.push(t.sectionId),this.formData.parentId=t.sectionId,console.log(this.ids,"ddddd")):"edit"===e&&(this.ids=t.pids,this.getDetail(t.sectionId)),this.showModal=!0},handleReset:function(t){this.organizationList=[],this.formData.parentId="",this.$refs[t].resetFields(),this.ids=[],this.showModal=!1},handleSubmit:function(t){var e=this;"add"===this.status||"addNew"===this.status?this.$refs[t].validate((function(a){a?Object(r["c"])(e.formData).then((function(a){e.$Message.success("保存成功！"),e.showModal=!1,e.$emit("getList"),e.organizationList=[],e.formData.parentId="",e.ids=[],e.$refs[t].resetFields()})):e.$Message.error("表单验证失败!")})):this.$refs[t].validate((function(a){a?Object(r["n"])(e.formData).then((function(a){e.$Message.success("修改成功！"),e.showModal=!1,e.$emit("getList"),e.organizationList=[],e.formData.parentId="",e.ids=[],e.$refs[t].resetFields()})):e.$Message.error("表单验证失败!")}))},change:function(t){this.ids=t;var e=t.length-1;this.formData.parentId=t[e],console.log(t,"9999999")}},mounted:function(){},beforeDestroy:function(){},created:function(){}},c=l,d=(a("3560"),a("2877")),m=Object(d["a"])(c,n,s,!1,null,"1b5b7556",null),u=m.exports,f={components:{addOrganization:u},data:function(){return{loading:!0,erTitle:"",status:"",curRow:{},formItem:"",userTypeList:[],columns:[{title:"组织名称",key:"title",minWidth:"250px"},{title:"职工数",key:"count"},{title:"组织类型",key:"company"},{title:"负责人",key:"staff"},{title:"操作",minWidth:"200px",type:"template",template:"action"}],tableData:[],pageination:{page:1,pageSize:10,count:1},page:1,userStatusList:[]}},created:function(){this.getList()},methods:{search:function(){this.getList()},clear:function(){this.userName="",this.userType="",this.userTel="",this.getList()},getList:function(){var t=this;this.loading=!0,Object(r["q"])().then((function(e){if(t.loading=!1,0===e.ret){t.tableData=e.data.list;var a=e.data.list,i=a.map((function(t,e){return{value:t.sectionId,label:t.title,pids:t.pids,children:t.children.map((function(t){return{value:t.sectionId,label:t.title,pids:t.pids,children:t.children.map((function(t){return{value:t.sectionId,label:t.title,pids:t.pids}}))}}))}}));sessionStorage.setItem("departMentList",JSON.stringify(i))}else t.$Message.error(e.data.msg||"接口错误")}))},changePage:function(t){this.page=t,this.getList()},show:function(t,e){console.log(t,"oop----"),this.status=e,"add"===e||"addNew"===e?this.erTitle="新增":"edit"===e&&(this.erTitle="编辑"),this.$refs.Drawer.DrawerToShow(t,e)},onDelete:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"<p>确认删除</p>",onOk:function(){Object(r["i"])({sectionId:t.sectionId}).then((function(t){0===t.ret?(e.$Message.success("删除成功"),e.getList()):e.$Message.error(t.msg)}))},onCancel:function(){}})}}},p=f,h=(a("450e"),Object(d["a"])(p,i,o,!1,null,"70dd4607",null));e["default"]=h.exports},"42e5e":function(t,e,a){"use strict";var i=a("42fc"),o=a.n(i);o.a},"42fc":function(t,e,a){},"450e":function(t,e,a){"use strict";var i=a("18e2"),o=a.n(i);o.a},"488d":function(t,e,a){"use strict";var i=a("0c23"),o=a.n(i);o.a},"4b0e":function(t,e,a){},"4be9":function(t,e,a){"use strict";var i=a("3579"),o=a.n(i);o.a},"4eb4":function(t,e,a){"use strict";var i=a("6b2b"),o=a.n(i);o.a},"55dd":function(t,e,a){"use strict";var i=a("5ca1"),o=a("d8e8"),n=a("4bf8"),s=a("79e5"),r=[].sort,l=[1,2,3];i(i.P+i.F*(s((function(){l.sort(void 0)}))||!s((function(){l.sort(null)}))||!a("2f21")(r)),"Array",{sort:function(t){return void 0===t?r.call(n(this)):r.call(n(this),o(t))}})},"59a3":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,title:"选择成员",width:600},on:{"on-cancel":function(e){return t.handleReset()}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Card",[t.loading?t._e():a("Tree",{attrs:{data:t.treeDataList,"show-checkbox":"",render:t.renderContent},on:{"on-check-change":t.changeSelect}}),t.loading?a("div",[a("Spin",{attrs:{size:"large"}})],1):t._e()],1),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("Form",{attrs:{inline:""}},[a("FormItem",{attrs:{label:""}},[a("Icon",{attrs:{type:"ios-folder-outline"}}),t._v("校区\n            ")],1),a("FormItem",{attrs:{label:""}},[a("Icon",{attrs:{type:"ios-paper-outline"}}),t._v("部门\n            ")],1)],1),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit()}}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v("取消")])],1)],1)},o=[],n=(a("c5f6"),{components:{},props:{},data:function(){return{loading:!0,treeDataList:[],showModal:!1,selectedArr:[],sectionList:[]}},computed:{},watch:{},methods:{DrawerToShow:function(){var t=this;this.showModal=!0,this.loading=!0,listType({type:"campus",status:0}).then((function(e){t.treeDataList=e.data,t.loading=!1}))},resetSearch:function(){},search:function(){},changeSelect:function(t){console.log(t),this.selectedArr=t},handleReset:function(){this.showModal=!1},handleSubmit:function(){this.showModal=!1,this.$emit("handleChoose",this.selectedArr)},renderContent:function(t,e){var a,i=this,o=(e.root,e.node,e.data);return a=1===Number(o.isCampus)?t("span",{on:{click:function(){o.expand?i.$set(o,"expand",!1):i.$set(o,"expand",!0)}}},[t("Icon",{props:{type:"ios-folder-outline"},style:{marginRight:"8px",cursor:"pointer"}}),t("span",{style:{cursor:"pointer"}},o.title)]):0===Number(o.isCampus)?t("span",{on:{click:function(){o.expand?i.$set(o,"expand",!1):i.$set(o,"expand",!0)}}},[t("Icon",{props:{type:"ios-paper-outline"},style:{marginRight:"8px",cursor:"pointer"}}),t("span",{style:{cursor:"pointer"}},o.title)]):t("span",[t("span",{style:{},on:{click:function(){}}},o.title)]),a}},mounted:function(){},beforeDestroy:function(){},created:function(){}}),s=n,r=(a("42e5e"),a("2877")),l=Object(r["a"])(s,i,o,!1,null,"c4601d5c",null),c=l.exports;e["a"]=c},"5b78":function(t,e,a){"use strict";var i=a("1b22"),o=a.n(i);o.a},"5dbc":function(t,e,a){var i=a("d3f4"),o=a("8b97").set;t.exports=function(t,e,a){var n,s=e.constructor;return s!==a&&"function"==typeof s&&(n=s.prototype)!==a.prototype&&i(n)&&o&&o(t,n),t}},"5ee3":function(t,e,a){"use strict";var i=a("f061"),o=a.n(i);o.a},"684d":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{"class-name":"vertical-center-modal","mask-closable":!1,"footer-hide":!0,width:600,title:"add"===t.mode?"新增":"编辑权限组"},on:{"on-cancel":function(e){return t.cancel("formValidate")}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Form",{ref:"formValidate",staticClass:"ivu-mb-8",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"组名",prop:"groupName"}},[a("Input",{model:{value:t.formValidate.groupName,callback:function(e){t.$set(t.formValidate,"groupName","string"===typeof e?e.trim():e)},expression:"formValidate.groupName"}})],1),a("FormItem",{attrs:{label:"说明",prop:"describe"}},[a("Input",{model:{value:t.formValidate.describe,callback:function(e){t.$set(t.formValidate,"describe",e)},expression:"formValidate.describe"}})],1),a("FormItem",{attrs:{label:"角色",prop:"roleType"}},[a("RadioGroup",{model:{value:t.formValidate.roleType,callback:function(e){t.$set(t.formValidate,"roleType",e)},expression:"formValidate.roleType"}},[a("Radio",{attrs:{label:"1"}},[t._v("员工")]),a("Radio",{attrs:{label:"2"}},[t._v("部门主管")]),a("Radio",{attrs:{label:"3"}},[t._v("超级管理员")])],1)],1)],1),a("div",{staticClass:"ivu-mt ivu-text-right"},[a("Button",{on:{click:function(e){return t.cancel("formValidate")}}},[t._v("取消")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)],1)],1)},o=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),s=(a("7f7f"),a("4b0e"),a("580a"));function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(a,!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var c={props:{},data:function(){return{formValidate:{groupName:"",describe:"",role:[],roleType:1},ruleValidate:{groupName:[{required:!0,message:"请填写组名",trigger:"blur"},{type:"string",max:20,message:"组名最长20个字符",trigger:"blur"}],describe:[{type:"string",max:20,message:"说明最长20个字符",trigger:"blur"}],roleType:[{required:!0,message:"请选择角色",trigger:"change"}]},modal:!1,mode:"add"}},computed:{},methods:{DrawerToShow:function(t,e,a){this.mode=t,this.formValidate=e?{groupId:e.groupId,groupName:e.groupName,describe:e.describe,roleType:e.roleType,type:a}:{groupName:"",describe:"",roleType:[],type:a},this.$refs["formValidate"].resetFields(),this.modal=!0},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t&&("add"===e.mode?Object(s["a"])(l({},e.formValidate)).then((function(t){e.modal=!1,e.$emit("onSubmit"),e.$Message.success("新增成功")})):Object(s["j"])(l({},e.formValidate)).then((function(t){e.modal=!1,e.$emit("onSubmit"),e.$Message.success("修改成功")})))}))},cancel:function(t){this.modal=!1,this.$refs[t].resetFields()},handleReset:function(t){this.$refs[t].resetFields()}},mounted:function(){},watch:{}},d=c,m=a("2877"),u=Object(m["a"])(d,i,o,!1,null,null,null),f=u.exports;e["a"]=f},"6b2b":function(t,e,a){},"6db6":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",{staticClass:"sx"},[a("Form",{ref:"formData",attrs:{model:t.formData,inline:""}},[a("FormItem",{attrs:{label:"姓名：","label-position":"top","label-width":80}},[a("Input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("FormItem",{attrs:{label:"部门：","label-position":"top","label-width":80}},[a("chooseDepartMent",{attrs:{ids:t.ids},on:{change:t.changeDepartmentId}})],1),a("FormItem",{attrs:{label:"","label-position":"top","label-width":20}},[a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),a("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"default"},on:{click:function(e){return t.clear("formData")}}},[t._v("重置")])],1),a("div",{class:t.isShow?"":"none"},[a("FormItem",{attrs:{label:"性别：","label-position":"top","label-width":80}},[a("RadioGroup",{model:{value:t.formData.sex,callback:function(e){t.$set(t.formData,"sex",e)},expression:"formData.sex"}},[a("Radio",{attrs:{label:-1}},[t._v("所有")]),a("Radio",{attrs:{label:0}},[t._v("女")]),a("Radio",{attrs:{label:1}},[t._v("男")])],1)],1),a("FormItem",{attrs:{label:"状态：","label-position":"top","label-width":80}},[a("RadioGroup",{model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[a("Radio",{attrs:{label:-1}},[t._v("所有")]),a("Radio",{attrs:{label:0}},[t._v("在职")]),a("Radio",{attrs:{label:1}},[t._v("离职")])],1)],1)],1),a("div",{staticClass:"sx-box",on:{click:t.screen}},[t._v("\n        "+t._s(t.isShow?"收起":"更多筛选")+" "),a("Icon",{class:t.isShow?"turn":"",attrs:{type:"ios-arrow-down"}})],1)],1)],1),a("Card",[a("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-bottom":"10px"}},[a("div",[a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.showExport()}}},[t._v("导出")])],1),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.show({},"add")}}},[t._v("新增")])],1),a("Table",{attrs:{loading:t.loading,stripe:"",columns:t.tableColumns,data:t.tableData},on:{"on-selection-change":t.chooseStaff}}),a("div",{staticStyle:{margin:"10px 0",overflow:"hidden","line-height":"32px"}},[a("div",{staticStyle:{float:"left"}},[a("span",[t._v("共 "+t._s(t.pageination.count)+" 条记录")]),a("span",{staticStyle:{"margin-left":"5px"}},[t._v("第"+t._s(t.pageination.page)+"页")])]),a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:Number(t.pageination.count),"page-size":Number(t.pageination.pageSize),current:Number(t.pageination.page),"show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)])],1),a("addStaff",{ref:"Drawer",on:{getData:t.getStaff}}),a("staffDetail",{ref:"detail",attrs:{erTitle:t.erTitle},on:{getData:t.getStaff}}),a("staffLeave",{ref:"leave",attrs:{erTitle:t.erTitle},on:{getData:t.getData}}),a("addAdminUser",{ref:"admin"}),a("exportStaff",{ref:"export"}),a("viewDetail",{ref:"view"})],1)},o=[],n=(a("8e6e"),a("456d"),a("bd86")),s=(a("ac6a"),a("7f7f"),a("c276")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Drawer",{attrs:{styles:t.styles,"mask-closable":!1,title:"新增职工",width:95},on:{"on-cancel":function(e){return t.handleReset("formData")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{ref:"formData",attrs:{"label-width":130,model:t.formData,rules:t.ruleInline}},[a("Row",[a("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("基本信息")]),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"姓名","label-position":"top",prop:"name"}},[a("Input",{on:{"on-blur":t.changeName},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"性别","label-position":"top",prop:"sex"}},[a("Select",{model:{value:t.formData.sex,callback:function(e){t.$set(t.formData,"sex",e)},expression:"formData.sex"}},[a("Option",{attrs:{value:"0"}},[t._v("女")]),a("Option",{attrs:{value:"1"}},[t._v("男")])],1)],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"工号","label-position":"top"}},[a("Input",{model:{value:t.formData.jobNumber,callback:function(e){t.$set(t.formData,"jobNumber",e)},expression:"formData.jobNumber"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"手机号","label-position":"top",prop:"phone"}},[a("Input",{model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"岗位","label-position":"top"}},[a("choosePosition",{attrs:{ids:t.ids},on:{change:t.changeId}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"部门","label-position":"top"}},[a("chooseDepartMent",{attrs:{ids:t.departmentIds},on:{change:t.changeDepartmentId}})],1)],1),a("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("工作信息")]),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"入职日期","label-position":"top",prop:"entryTime"}},[a("Date-picker",{attrs:{value:t.formData.entryTime,type:"date",placeholder:"选择日期"},on:{"on-change":function(e){t.formData.entryTime=e}}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"试用期","label-position":"top"}},[a("Input",{model:{value:t.formData.probation,callback:function(e){t.$set(t.formData,"probation",e)},expression:"formData.probation"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"合同日期","label-position":"top"}},[a("Date-picker",{attrs:{type:"daterange",value:t.formData.contractDate},on:{"on-change":t.handleChangeTime}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"培训时间","label-position":"top"}},[a("Date-picker",{attrs:{value:t.formData.trainTime,type:"date",placeholder:"选择日期"},on:{"on-change":function(e){t.formData.trainTime=e}}})],1)],1)],1),a("Row",[a("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("个人信息")]),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"身份证姓名","label-position":"top"}},[a("Input",{model:{value:t.formData.idName,callback:function(e){t.$set(t.formData,"idName",e)},expression:"formData.idName"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"身份证号","label-position":"top",prop:"idCard"}},[a("Input",{on:{"on-blur":function(e){return t.getBirthdayFromIdCard(t.formData.idCard)}},model:{value:t.formData.idCard,callback:function(e){t.$set(t.formData,"idCard",e)},expression:"formData.idCard"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"出生日期","label-position":"top"}},[a("Date-picker",{attrs:{value:t.formData.birthday,type:"date",placeholder:"选择出生日期"},on:{"on-change":function(e){t.formData.birthday=e}}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"是否农历","label-position":"top"}},[a("Select",{model:{value:t.formData.isLunarCalendar,callback:function(e){t.$set(t.formData,"isLunarCalendar",e)},expression:"formData.isLunarCalendar"}},[a("Option",{attrs:{value:"0"}},[t._v("农历")]),a("Option",{attrs:{value:"1"}},[t._v("阳历")])],1)],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"民族","label-position":"top"}},[a("Input",{model:{value:t.formData.nation,callback:function(e){t.$set(t.formData,"nation",e)},expression:"formData.nation"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"住址","label-position":"top"}},[a("Input",{model:{value:t.formData.address,callback:function(e){t.$set(t.formData,"address",e)},expression:"formData.address"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"婚姻状况","label-position":"top"}},[a("Select",{model:{value:t.formData.maritalStatus,callback:function(e){t.$set(t.formData,"maritalStatus",e)},expression:"formData.maritalStatus"}},t._l(t.maritalStatusList,(function(e,i){return a("Option",{key:i,attrs:{value:e.id}},[t._v(t._s(e.value))])})),1)],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"政治面貌","label-position":"top"}},[a("Select",{model:{value:t.formData.politicalStatus,callback:function(e){t.$set(t.formData,"politicalStatus",e)},expression:"formData.politicalStatus"}},t._l(t.politicalStatusList,(function(e,i){return a("Option",{key:i,attrs:{value:e.id}},[t._v(t._s(e.value))])})),1)],1)],1)],1),a("Row",[a("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("保险&公积金")]),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"社保账号","label-position":"top"}},[a("Input",{model:{value:t.formData.socialSecurityAccount,callback:function(e){t.$set(t.formData,"socialSecurityAccount",e)},expression:"formData.socialSecurityAccount"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"公积金账号","label-position":"top"}},[a("Input",{model:{value:t.formData.providentFundAccount,callback:function(e){t.$set(t.formData,"providentFundAccount",e)},expression:"formData.providentFundAccount"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"是否第一次买社保","label-position":"top"}},[a("Select",{model:{value:t.formData.first,callback:function(e){t.$set(t.formData,"first",e)},expression:"formData.first"}},[a("Option",{attrs:{value:"0"}},[t._v("是")]),a("Option",{attrs:{value:"1"}},[t._v("否")])],1)],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"社保","label-position":"top"}},[a("Select",{attrs:{multiple:""},model:{value:t.formData.socialSecurity,callback:function(e){t.$set(t.formData,"socialSecurity",e)},expression:"formData.socialSecurity"}},t._l(t.baseList,(function(e,i){return a("Option",{key:i,attrs:{value:String(e.basisId)}},[t._v(t._s(e.name))])})),1)],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"商业险购买","label-position":"top"}},[a("Input",{model:{value:t.formData.commercialInsurance,callback:function(e){t.$set(t.formData,"commercialInsurance",e)},expression:"formData.commercialInsurance"}})],1)],1)],1),a("Row",[a("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("银行卡信息")]),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"开户银行","label-position":"top"}},[a("Input",{model:{value:t.formData.bank,callback:function(e){t.$set(t.formData,"bank",e)},expression:"formData.bank"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"银行卡号","label-position":"top"}},[a("Input",{model:{value:t.formData.bankCard,callback:function(e){t.$set(t.formData,"bankCard",e)},expression:"formData.bankCard"}})],1)],1)],1),a("Row",[a("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("学历信息")]),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"学历","label-position":"top"}},[a("Select",{model:{value:t.formData.education,callback:function(e){t.$set(t.formData,"education",e)},expression:"formData.education"}},t._l(t.educationList,(function(e,i){return a("Option",{key:i,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"所属专业","label-position":"top"}},[a("Input",{model:{value:t.formData.profession,callback:function(e){t.$set(t.formData,"profession",e)},expression:"formData.profession\t"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"毕业院校","label-position":"top"}},[a("Input",{model:{value:t.formData.finishSchool,callback:function(e){t.$set(t.formData,"finishSchool",e)},expression:"formData.finishSchool"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"毕业时间","label-position":"top"}},[a("Date-Picker",{attrs:{value:t.formData.finishTime,type:"date"},on:{"on-change":function(e){t.formData.finishTime=e}}})],1)],1)],1),a("Row",[a("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("紧急联系人")]),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"紧急联系人姓名","label-position":"top"}},[a("Input",{model:{value:t.formData.personName,callback:function(e){t.$set(t.formData,"personName",e)},expression:"formData.personName"}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"紧急联系人关系","label-position":"top"}},[a("Select",{model:{value:t.formData.personType,callback:function(e){t.$set(t.formData,"personType",e)},expression:"formData.personType"}},t._l(t.personTypeList,(function(e,i){return a("Option",{key:i,attrs:{value:Number(e.id)}},[t._v(t._s(e.name))])})),1)],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"联系人手机号","label-position":"top"}},[a("Input",{model:{value:t.formData.personTell,callback:function(e){t.$set(t.formData,"personTell",e)},expression:"formData.personTell"}})],1)],1)],1),a("Row",[a("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("个人资料")]),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"身份证","label-position":"top"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"center"},[a("uploadImgCom",{attrs:{picArr:{pic:t.formData.idCardPositivePic,picName:t.formData.idCardPositivePic}},on:{uploadSuccess:t.handleSuccess}}),a("div",[t._v("人像面")])],1),a("div",{staticClass:"center",staticStyle:{"margin-left":"20px"}},[a("uploadImgCom",{attrs:{picArr:{pic:t.formData.idCardReversePic,picName:t.formData.idCardReversePic}},on:{uploadSuccess:t.handleSuccess0}}),a("div",[t._v("国徽面")])],1)])])],1),a("Col",{attrs:{xs:24}},[a("FormItem",{attrs:{label:"学历证书","label-position":"top"}},[a("div",{staticStyle:{color:"#bbb"}},[t._v("建议尺寸: 800*1100px")]),a("uploadImgList",{attrs:{id:"educationPic",picArr:t.formData.educationPic||[]},on:{uploadSuccess:t.handleSuccess1}})],1)],1),a("Col",{attrs:{xs:24}},[a("FormItem",{attrs:{label:"学位证书","label-position":"top"}},[a("div",{staticStyle:{color:"#bbb"}},[t._v("建议尺寸: 800*1100px")]),a("uploadImgList",{attrs:{id:"academicDegreePic",picArr:t.formData.academicDegreePic||[]},on:{uploadSuccess:t.handleSuccess2}})],1)],1)],1),a("Row",[a("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("其他信息")]),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"推荐人","label-position":"top"}},[a("chooseStaff",{attrs:{id:"staffId",staffId:String(t.formData.staffId)},on:{handleSubmit:t.getStaffId}})],1)],1),a("Col",{attrs:{xs:24,md:12}},[a("FormItem",{attrs:{label:"渠道","label-position":"top"}},[a("chooseBaseData",{attrs:{id:"channelId",channel:"CHANNEL_MODE",basisId:String(t.formData.channelId)},on:{handleSubmit:t.getId}})],1)],1)],1),a("Row",[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"备注","label-position":"top"}},[a("Input",{attrs:{maxlength:"300",type:"textarea",rows:4},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],1)],1)],1),a("div",{staticClass:"demo-drawer-footer"},[a("Button",{on:{click:function(e){return t.handleReset("formData")}}},[t._v("取消")]),a("Button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formData")}}},[t._v("确定")])],1)],1)},l=[],c=(a("a481"),a("40cb")),d=a("a46c"),m=a("b42f"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Cascader",{attrs:{data:t.list,value:t.newArr,"change-on-select":""},on:{"update:value":function(e){t.newArr=e},"on-change":t.change}})],1)},f=[],p=a("9411"),h={components:{},props:{ids:Array},data:function(){return{showModal:!1,list:[],newArr:[]}},computed:{},watch:{ids:function(t){this.newArr=t}},methods:{change:function(t){this.$emit("change",t),console.log(t,"department")},getList:function(){var t=this;Object(p["v"])().then((function(e){var a=e.data.list;t.list=a.map((function(t,e){return{value:t.sectionId,label:t.title,children:t.children.map((function(t){return{value:t.sectionId,label:t.title,children:t.children.map((function(t){return{value:t.sectionId,label:t.title}}))}}))}})),sessionStorage.setItem("departMentList",JSON.stringify(t.list))}))}},mounted:function(){},beforeDestroy:function(){},created:function(){JSON.parse(sessionStorage.getItem("departMentList"))?this.list=JSON.parse(sessionStorage.getItem("departMentList")):this.getList()}},b=h,g=a("2877"),v=Object(g["a"])(b,u,f,!1,null,"689f859a",null),I=v.exports,y=a("e6a1"),D=a("54d9"),S=a("580a"),C={components:{uploadImgCom:c["a"],choosePosition:m["a"],chooseDepartMent:I,chooseStaff:y["a"],uploadImgList:d["a"],chooseBaseData:D["a"]},props:{},data:function(){var t={idCard:function(t,e,a){e&&(!/\d{17}[\d|x]|\d{15}/.test(e)||15!==e.length&&18!==e.length)?a(new Error("身份证号码不符合规范")):a()}};return{styles:{height:"calc(100% - 55px)",overflow:"auto",paddingBottom:"53px",position:"static"},loading:!0,showModal:!1,formData:{groupId:1,jobNumber:"",phone:"",sectionId:"",positionId:"",entryTime:"",seniority:"",probation:"",startTime:"",endTime:"",trainTime:"",idName:"",idCard:"",birthday:"",isLunarCalendar:"",nation:"",maritalStatus:"",address:"",politicalStatus:"",socialSecurityAccount:"",providentFundAccount:"",first:"",commercialInsurance:"",bank:"",bankCard:"",education:"",profession:"",finishSchool:"",finishTime:"",personName:"",personType:"",personTell:"",idCardPositivePic:"",idCardReversePic:"",educationPic:"",academicDegreePic:"",Referrer:"",channelId:"",remark:"",sex:"",name:"",clientId:""},ids:[],departmentIds:[],ruleInline:{name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],phone:[{required:!0,message:"手机号码不能为空",trigger:"blur"}],entryTime:[{required:!0,message:"请选择入职日期",trigger:"change"}],idCard:[{validator:t.idCard,trigger:"blur"}]},educationList:[{id:"1",name:"初中及以下"},{id:"2",name:"中专/中技"},{id:"3",name:"高中"},{id:"4",name:"大专"},{id:"5",name:"本科"},{id:"6",name:"硕士"},{id:"7",name:"博士"}],personTypeList:[{id:"1",name:"父母"},{id:"2",name:"配偶"},{id:"3",name:"子女"},{id:"4",name:"其他"}],maritalStatusList:[{id:1,value:"未婚"},{id:2,value:"已婚"},{id:3,value:"离异"},{id:4,value:"丧偶"},{id:5,value:"分居"}],politicalStatusList:[{id:1,value:"团员"},{id:2,value:"党员"},{id:3,value:"群众"},{id:4,value:"其他"}],cycleList:[{id:1,name:"一个月"},{id:2,name:"三个月"},{id:3,name:"六个月"},{id:4,name:"九个月"},{id:5,name:"十二个月"},{id:6,name:"按照合同周期"}],baseList:[]}},computed:{},watch:{},methods:{getEducation:function(){var t=this;console.log("aaaaa"),Object(p["p"])({type:"EDUCATION"}).then((function(e){t.educationList=e.data.educationList}))},getBase:function(){var t=this;Object(p["h"])({type:"SOCIAL_SECURITY"}).then((function(e){t.baseList=e.data}))},changeId:function(t){var e=t.length-1;this.formData.positionId=t[e]},changeDepartmentId:function(t){var e=t.length-1;this.formData.sectionId=t[e]},handleSuccess:function(t){this.formData.idCardPositivePic=t.pic},handleSuccess0:function(t){this.formData.idCardReversePic=t.pic},DrawerToShow:function(){this.showModal=!0,this.loading=!0,this.getBase(),this.getEducation()},handleReset:function(t){for(var t in this.showModal=!1,this.formData)this.formData[t]="";this.departmentIds=[],this.ids=[],this.formData.contractDate=[]},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?Object(S["x"])(e.formData).then((function(t){for(var a in e.$Message.success("保存成功！"),e.$emit("getData"),e.showModal=!1,e.formData)e.formData[a]="";e.departmentIds=[],e.ids=[],e.formData.contractDate=[]})):e.$Message.error("表单验证失败!")}))},handleChangeTime:function(t){this.formData.startTime=t[0]||"",this.formData.endTime=t[1]||""},getStaffId:function(t){this.formData.Referrer=t,console.log(t,"++++++")},handleSuccess1:function(t){this.formData.educationPic=t},handleSuccess2:function(t){this.formData.academicDegreePic=t},getId:function(t,e){this.formData[e]=t},changeName:function(){this.formData.idName=this.formData.name},getBirthdayFromIdCard:function(t){var e="";return null!=t&&""!=t&&(15==t.length?e="19"+t.substr(6,6):18==t.length&&(e=t.substr(6,8)),this.formData.birthday=e.replace(/(.{4})(.{2})/,"$1-$2-")),e},format:function(t){if(""===t)return"";var e=new Date(t),a=e.getFullYear(),i=e.getMonth()+1,o=e.getDate();return i<10&&(i="0"+i),o<10&&(o="0"+o),a+"-"+i+"-"+o}},mounted:function(){},beforeDestroy:function(){},created:function(){}},w=C,x=(a("488d"),Object(g["a"])(w,r,l,!1,null,"d9ef1762",null)),_=x.exports,k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Modal",{attrs:{title:t.erTitle,width:"1000"},on:{"on-cancel":function(e){return t.cancel("formData")}},model:{value:t.showAdd,callback:function(e){t.showAdd=e},expression:"showAdd"}},[i("div",{staticStyle:{display:"flex","justify-content":"space-between","padding-bottom":"20px","font-size":"12px"}},[i("div",{staticStyle:{display:"flex"}},[i("div",{staticClass:"staff-head"},[i("img",{attrs:{src:a("f66a")}})]),i("div",{staticStyle:{"margin-left":"20px"}},[i("div",[t._v(t._s(t.formData.name))]),i("div",[t._v("岗位 "+t._s(t.formData.positionName))]),i("div",[t._v(t._s(t.formData.phone))])])]),i("div",[t.hasBtn?i("Button",{attrs:{type:"primary"},on:{click:function(e){return t.staffLeave()}}},[t._v("离职")]):t._e()],1)]),i("Tabs",{model:{value:t.curTab,callback:function(e){t.curTab=e},expression:"curTab"}},[i("Tab-pane",{key:"0",attrs:{label:"职工信息"}}),i("Tab-pane",{key:"1",attrs:{label:"合同管理"}}),i("Tab-pane",{key:"2",attrs:{label:"离职信息"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.curTab,expression:"curTab === 0"}]},[i("Form",{ref:"formData",staticClass:"detail",attrs:{"label-width":130,model:t.formData}},[i("Row",[i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("基本信息")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"姓名","label-position":"top",prop:"name"}},[i("editInput",{attrs:{id:"name",empty:"",text:t.formData.name},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"性别","label-position":"top"}},[i("editSelect",{attrs:{id:"sex",iptId:String(t.formData.sex)||"",list:t.sexList},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"工号","label-position":"top"}},[i("editInput",{attrs:{id:"jobNumber",text:t.formData.jobNumber},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"手机号","label-position":"top"}},[i("editInput",{attrs:{id:"phone",empty:"",text:t.formData.phone},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"岗位","label-position":"top"}},[i("choosePosition",{attrs:{ids:t.positionIds},on:{change:t.changeId}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"部门","label-position":"top"}},[i("chooseDepartMent",{attrs:{ids:t.departmentIds},on:{change:t.changeDepartmentId}})],1)],1),i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("工作信息")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"入职日期","label-position":"top"}},[i("editDate",{attrs:{id:"entryTime",empty:"",text:t.formData.entryTime},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"试用期","label-position":"top"}},[i("editInput",{attrs:{id:"probation",empty:"",text:t.formData.probation},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"合同日期","label-position":"top"}},[i("Date-picker",{attrs:{type:"daterange",value:t.contractDate},on:{"on-change":t.handleChangeTime}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"培训时间","label-position":"top"}},[i("editDate",{attrs:{id:"trainTime",text:t.formData.trainTime},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"工龄","label-position":"top"}},[t._v("\n            "+t._s(t.formData.seniority)+"\n            ")])],1)],1),i("Row",[i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("个人信息")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"身份证姓名","label-position":"top"}},[i("editInput",{attrs:{id:"idName",text:t.formData.idName},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"身份证号","label-position":"top"}},[i("editInput",{attrs:{id:"idCard",text:t.formData.idCard},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"出生日期","label-position":"top"}},[i("editDate",{attrs:{id:"birthday",text:t.formData.birthday},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"是否农历","label-position":"top"}},[i("editSelect",{attrs:{id:"isLunarCalendar",iptId:String(t.formData.isLunarCalendar)||"",list:[{id:"0",name:"农历"},{id:"1",name:"阳历"}]},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"民族","label-position":"top"}},[i("editInput",{attrs:{id:"nation",text:t.formData.nation},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"住址","label-position":"top"}},[i("editInput",{attrs:{id:"address",text:t.formData.address},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"婚姻状况","label-position":"top"}},[i("editSelect",{attrs:{id:"maritalStatus",iptId:String(t.formData.maritalStatus)||"",list:t.maritalStatusList},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"政治面貌","label-position":"top"}},[i("editSelect",{attrs:{id:"politicalStatus",iptId:String(t.formData.politicalStatus)||"",list:t.politicalStatusList},on:{handleSubmit:t.callback}})],1)],1)],1),i("Row",[i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("保险&公积金")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"社保账号","label-position":"top"}},[i("editInput",{attrs:{id:"socialSecurityAccount",text:t.formData.socialSecurityAccount},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"公积金账号","label-position":"top"}},[i("editInput",{attrs:{id:"providentFundAccount",text:t.formData.providentFundAccount},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"是否第一次买社保","label-position":"top"}},[i("editSelect",{attrs:{id:"first",iptId:String(t.formData.first)||"",list:t.firstList},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"社保","label-position":"top"}},[i("Select",{attrs:{multiple:""},on:{"on-open-change":t.changeSocial},model:{value:t.formData.socialSecurity,callback:function(e){t.$set(t.formData,"socialSecurity",e)},expression:"formData.socialSecurity"}},t._l(t.baseList,(function(e,a){return i("Option",{key:a,attrs:{value:String(e.basisId)}},[t._v(t._s(e.name))])})),1)],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"商业险购买","label-position":"top"}},[i("editInput",{attrs:{id:"commercialInsurance",text:t.formData.commercialInsurance},on:{handleSubmit:t.callback}})],1)],1)],1),i("Row",[i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("银行卡信息")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"开户银行","label-position":"top"}},[i("editInput",{attrs:{id:"bank",text:t.formData.bank},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"银行卡号","label-position":"top"}},[i("editInput",{attrs:{id:"bankCard",text:t.formData.bankCard},on:{handleSubmit:t.callback}})],1)],1)],1),i("Row",[i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("学历信息")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"学历","label-position":"top"}},[i("editSelect",{attrs:{id:"education",iptId:t.formData.education,list:t.educationList},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"所属专业","label-position":"top"}},[i("editInput",{attrs:{id:"profession",text:t.formData.profession},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"毕业院校","label-position":"top"}},[i("editInput",{attrs:{id:"finishSchool",text:t.formData.finishSchool},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"毕业时间","label-position":"top"}},[i("editDate",{attrs:{id:"finishTime",text:t.formData.finishTime},on:{handleSubmit:t.callback}})],1)],1)],1),i("Row",[i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("紧急联系人")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"紧急联系人姓名","label-position":"top"}},[i("editInput",{attrs:{id:"personName",text:t.formData.personName},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"紧急联系人关系","label-position":"top"}},[i("editSelect",{attrs:{id:"personType",iptId:String(t.formData.personType)||"",list:t.personTypeList},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"联系人手机号","label-position":"top"}},[i("editInput",{attrs:{id:"personTell",text:t.formData.personTell},on:{handleSubmit:t.callback}})],1)],1)],1),i("Row",[i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("个人资料")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"身份证","label-position":"top"}},[i("div",{staticStyle:{display:"flex"}},[i("div",{staticClass:"center"},[i("uploadImg",{attrs:{picArr:{pic:t.formData.idCardPositivePic||"",picName:t.idCardPositiveUrl||""}},on:{uploadSuccess:t.handleSuccess}}),i("div",[t._v("人像面")])],1),i("div",{staticClass:"center",staticStyle:{"margin-left":"20px"}},[i("uploadImg",{attrs:{picArr:{pic:t.formData.idCardReversePic||"",picName:t.idCardReverseUrl||""}},on:{uploadSuccess:t.handleSuccess0}}),i("div",[t._v("国徽面")])],1)])])],1),i("Col",{attrs:{xs:24}},[i("FormItem",{attrs:{label:"学历证书","label-position":"top"}},[i("div",{staticStyle:{color:"#bbb"}},[t._v("建议尺寸: 800*1100px")]),t.showAdd?i("uploadImgList",{attrs:{id:"education",picArr:t.formData.educationPic||[]},on:{uploadSuccess:t.handleSuccess1}}):t._e()],1)],1),i("Col",{attrs:{xs:24}},[i("FormItem",{attrs:{label:"学位证书","label-position":"top"}},[i("div",{staticStyle:{color:"#bbb"}},[t._v("建议尺寸: 800*1100px")]),t.showAdd?i("uploadImgList",{attrs:{id:"academicDegree",picArr:t.formData.academicDegreePic||[]},on:{uploadSuccess:t.handleSuccess2}}):t._e()],1)],1)],1),i("Row",[i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("其他信息")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"推荐人","label-position":"top"}},[i("chooseStaff",{attrs:{id:"Referrer",staffId:String(t.formData.Referrer)},on:{handleSubmit:t.getStaffId}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"渠道","label-position":"top"}},[i("chooseBaseData",{attrs:{id:"channelId",channel:"CHANNEL_MODE",basisId:String(t.formData.channelId)},on:{handleSubmit:t.getId}})],1)],1)],1),i("Row",[i("Col",{attrs:{span:"24"}},[i("FormItem",{attrs:{label:"备注","label-position":"top"}},[i("editTextarea",{attrs:{id:"remark",text:t.formData.remark},on:{handleSubmit:t.callback}})],1)],1)],1)],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.curTab,expression:"curTab === 1"}]},[i("div",{staticClass:"list"},[t.contractData.length>0?t._l(t.contractData,(function(e,o){return i("div",{key:o,staticClass:"item"},[i("div",{staticClass:"head"},[i("div",[i("div",[t._v("标题："+t._s(e.title))]),i("div",[t._v("合同期限："+t._s(e.startTime)+" 至 "+t._s(e.endTime))]),i("div",{staticClass:"time"},[t._v("创建时间："+t._s(e.createTime)+" ")])]),i("Button",{attrs:{type:"primary"},on:{click:function(a){return t.showContract(e,"edit")}}},[t._v("编辑")])],1),i("div",{staticStyle:{"margin-top":"10px"}},[t._v("劳动合同： "),e.laborContractPic&&0!==e.laborContractPic.length?t._e():i("span",[t._v("没有上传图片！")])]),e.laborContractPic&&e.laborContractPic.length>0?i("div",{staticClass:"album",attrs:{id:"images1"+o}},t._l(e.laborContractPic,(function(e,a){return i("div",{key:a,staticClass:"photo"},[i("img",{attrs:{src:t.demainUrl+e}}),i("div",{staticClass:"r-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView(a,"images1"+o)}}})],1)])})),0):t._e(),e.laborContractFile?i("div",{staticStyle:{"margin-top":"10px"}},[i("div",[t._v("劳动合同附件：")]),i("div",{staticClass:"file-img"},[i("img",{attrs:{src:a("b9de")}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){return t.viewFile(e.laborContractFile)}}})],1)])]):t._e(),i("div",{staticStyle:{"margin-top":"10px"}},[t._v("竞业协议： "),e.competitionAgreementPic&&0!==e.competitionAgreementPic.length?t._e():i("span",[t._v("没有上传图片！")])]),e.competitionAgreementPic&&e.competitionAgreementPic.length>0?i("div",{staticClass:"album",attrs:{id:"images2"+o}},t._l(e.competitionAgreementPic,(function(e,a){return i("div",{key:a,staticClass:"photo"},[i("img",{attrs:{src:t.demainUrl+e}}),i("div",{staticClass:"r-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView(a,"images2"+o)}}})],1)])})),0):t._e(),e.competitionAgreementFile?i("div",{staticStyle:{"margin-top":"10px"}},[i("div",[t._v("竞业协议附件：")]),i("div",{staticClass:"file-img"},[i("img",{attrs:{src:a("b9de")}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){return t.viewFile(e.competitionAgreementFile)}}})],1)])]):t._e(),i("div",{staticStyle:{"margin-top":"10px"}},[t._v("保密合同： "),e.confidentialityContract&&0!==e.confidentialityContract.length?t._e():i("span",[t._v("没有上传图片！")])]),e.confidentialityContract&&e.confidentialityContract.length>0?i("div",{staticClass:"album",attrs:{id:"images3"+o}},t._l(e.confidentialityContract,(function(e,a){return i("div",{key:a,staticClass:"photo"},[i("img",{attrs:{src:t.demainUrl+e}}),i("div",{staticClass:"r-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView(a,"images3"+o)}}})],1)])})),0):t._e(),e.confidentialityContractFile?i("div",{staticStyle:{"margin-top":"10px"}},[i("div",[t._v("保密合同附件：")]),i("div",{staticClass:"file-img"},[i("img",{attrs:{src:a("b9de")}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){return t.viewFile(e.confidentialityContractFile)}}})],1)])]):t._e()])})):i("div",{staticStyle:{"text-align":"center"}},[t._v("暂无合同")]),i("div",{staticClass:"item",staticStyle:{"text-align":"center",border:"0"},on:{click:function(e){return t.showContract({},"add")}}},[i("Button",{staticStyle:{margin:"0 auto",width:"100%"},attrs:{type:"primary",icon:"ios-add"}},[t._v("添加合同")])],1)],2)]),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.curTab,expression:"curTab === 2"}]},[0===t.leaveData.length?i("div",{staticStyle:{"text-align":"center",padding:"20px"}},[t._v("\n        暂无离职信息\n      ")]):t._l(t.leaveData,(function(e,a){return i("div",{key:a,staticStyle:{"border-bottom":"solid 1px #e8eaec"}},[i("Form",[i("FormItem",{attrs:{label:"离职时间"}},[t._v("\n            "+t._s(e.time)+"\n          ")]),i("FormItem",{attrs:{label:"离职原因"}},[t._v("\n            "+t._s(e.leaveReason)+"\n          ")]),i("FormItem",{attrs:{label:"解除劳动合同协议","label-width":150}},[i("div",{staticClass:"img-list",attrs:{id:"images"}},t._l(JSON.parse(e.leavePic),(function(e,a){return i("div",{key:a,staticClass:"img-item"},[i("img",{staticStyle:{object:"cover"},attrs:{src:t.demainUrl+e}}),i("div",{staticClass:"r-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView(a,"images")}}})],1)])})),0)])],1)],1)})),i("staffLeave",{ref:"leave",attrs:{erTitle:t.erTitle},on:{getData:t.cancel}})],2),i("addContract",{ref:"contract",on:{getData:t.getContract}}),i("div",{staticClass:"demo-drawer-footer",attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.cancel("formData")}}},[t._v("取消")])],1)],1)],1)},T=[],F=a("c82c"),O=a.n(F),$=(a("0808"),a("0bec")),V=a("d31b"),P=a("4bc3"),j=a("6bcd"),N=a("a5ae"),L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,title:t.erTitle,width:600},on:{"on-cancel":function(e){return t.handleReset("formData")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{ref:"formData",staticClass:"contract",attrs:{model:t.formData,rules:t.ruleInline,"label-width":130}},[a("FormItem",{attrs:{label:"标题","label-position":"top",prop:"title"}},[a("Input",{attrs:{maxlength:"30"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),a("FormItem",{attrs:{label:"合同期限","label-position":"top",prop:"contractDate"}},[a("Date-picker",{staticStyle:{width:"100%"},attrs:{value:t.formData.contractDate,type:"daterange",placeholder:"选择日期"},on:{"on-change":t.handleChangeTime}})],1),a("FormItem",{attrs:{label:"劳动合同","label-position":"top"}},[a("div",{staticStyle:{color:"#bbb"}},[t._v("建议尺寸: 800*1100px")]),a("uploadImgList",{attrs:{id:"laborContractPic",picArr:t.formData.laborContractPic||[]},on:{uploadSuccess:t.handleSuccess}})],1),a("FormItem",{attrs:{label:"合同附件","label-position":"top"}},[a("div",{staticStyle:{color:"#bbb"}},[t._v("pdf/doc/docx格式文件，图片大小不超过3M。")]),a("uploadFile",{attrs:{picArr:{pic:t.formData.laborContractFile,picName:t.formData.laborContractFile}},on:{uploadSuccess:t.handleSuccessFile1}})],1),a("FormItem",{attrs:{label:"竞业协议","label-position":"top"}},[a("div",{staticStyle:{color:"#bbb"}},[t._v("建议尺寸: 800*1100px")]),a("uploadImgList",{attrs:{id:"competitionAgreementPic",picArr:t.formData.competitionAgreementPic||[]},on:{uploadSuccess:t.handleSuccess2}})],1),a("FormItem",{attrs:{label:"竞业协议附件","label-position":"top"}},[a("div",{staticStyle:{color:"#bbb"}},[t._v("pdf/doc/docx格式文件，图片大小不超过3M。")]),a("uploadFile",{attrs:{picArr:{pic:t.formData.competitionAgreementFile,picName:t.formData.competitionAgreementFile}},on:{uploadSuccess:t.handleSuccessFile2}})],1),a("FormItem",{attrs:{label:"保密合同","label-position":"top"}},[a("div",{staticStyle:{color:"#bbb"}},[t._v("建议尺寸: 800*1100px")]),a("uploadImgList",{attrs:{id:"confidentialityContract",picArr:t.formData.confidentialityContract||[]},on:{uploadSuccess:t.handleSuccess3}})],1),a("FormItem",{attrs:{label:"保密合同附件","label-position":"top"}},[a("div",{staticStyle:{color:"#bbb"}},[t._v("pdf/doc/docx格式文件，图片大小不超过3M。")]),a("uploadFile",{attrs:{picArr:{pic:t.formData.confidentialityContractFile,picName:t.formData.confidentialityContractFile}},on:{uploadSuccess:t.handleSuccessFile3}})],1)],1),a("template",{slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formData")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formData")}}},[t._v("确定")])],1)],2)},A=[],M=a("fbcf");function R(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function E(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?R(a,!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):R(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var H={components:{uploadImgList:d["a"],uploadFile:M["a"]},props:{},data:function(){return{loading:!0,showModal:!1,formData:{title:"",startTime:"",endTime:"",staffId:"",contractId:"",laborContractPic:[],competitionAgreementPic:[],confidentialityContract:[],contractDate:[],laborContractFile:"",competitionAgreementFile:"",confidentialityContractFile:""},ruleInline:{contractDate:[{required:!0,type:"array",message:"请选择合同期限",trigger:"change"}],title:[{required:!0,message:"请填写合同标题",trigger:"blur"}]},contractDate:[],status:"",erTitle:""}},computed:{},watch:{},methods:{getInfo:function(t,e){var a=this;Object(S["s"])({contractId:t.contractId}).then((function(i){a.formData=i.data.info,a.formData.contractId=t.contractId,a.formData.staffId=e,a.formData.contractDate=[i.data.info.startTime,i.data.info.endTime],i.data.info.laborContractFile?a.formData.laborContractFile=i.data.info.laborContractFile:a.formData.laborContractFile="",i.data.info.competitionAgreementFile?a.formData.competitionAgreementFile=i.data.info.competitionAgreementFile:a.formData.competitionAgreementFile="",i.data.info.confidentialityContractFile?a.formData.confidentialityContractFile=i.data.info.confidentialityContractFile:a.formData.confidentialityContractFile=""}))},DrawerToShow:function(t,e,a){this.formData.staffId=t,console.log(this.formData.staffId,e,"ddd"),this.status=a,"edit"===a?(this.erTitle="编辑合同",this.getInfo(e,t)):this.erTitle="新增合同",this.showModal=!0,this.loading=!0},handleReset:function(t){this.showModal=!1,this.formData={laborContractFile:"",competitionAgreementFile:"",confidentialityContractFile:""},this.$refs[t].resetFields()},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(a){a?"edit"===e.status?Object(S["o"])(E({staffId:e.formData.staffId},e.formData)).then((function(a){e.$Message.success("已保存！"),e.showModal=!1,e.formData={laborContractFile:"",competitionAgreementFile:"",confidentialityContractFile:""},e.$refs[t].resetFields(),e.$emit("getData"),e.$store.dispatch("admin/global/toSum")})):Object(S["d"])(e.formData).then((function(a){e.$Message.success("已保存！"),e.showModal=!1,e.formData={laborContractFile:"",competitionAgreementFile:"",confidentialityContractFile:""},e.$refs[t].resetFields(),e.$emit("getData"),e.$store.dispatch("admin/global/toSum")})):e.$Message.error("表单验证失败!")}))},handleChangeTime:function(t){this.formData.contractDate=t,this.formData.startTime=t[0]||"",this.formData.endTime=t[1]||""},handleSuccess:function(t){this.formData.laborContractPic=t||[]},handleSuccess2:function(t){this.formData.competitionAgreementPic=t||[]},handleSuccess3:function(t){this.formData.confidentialityContract=t||[]},handleSuccessFile1:function(t){this.formData.laborContractFile=t.pic},handleSuccessFile2:function(t){this.formData.competitionAgreementFile=t.pic},handleSuccessFile3:function(t){this.formData.confidentialityContractFile=t.pic}},mounted:function(){},beforeDestroy:function(){},created:function(){}},B=H,z=(a("5b78"),Object(g["a"])(B,L,A,!1,null,"6d5b9e66",null)),U=z.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,title:"职工离职",width:600},on:{"on-cancel":function(e){return t.handleReset("formData")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{ref:"formData",attrs:{"label-width":130,model:t.formData,rules:t.ruleInline}},[a("Row",[a("Col",{attrs:{xs:24}},[a("FormItem",{attrs:{label:"姓名","label-position":"top"}},[t._v("\n        "+t._s(t.staffName)+"\n      ")])],1),a("Col",{attrs:{xs:24}},[a("FormItem",{attrs:{label:"离职时间","label-position":"top",prop:"time"}},[a("DatePicker",{attrs:{type:"date",placeholder:"选择时间"},on:{"on-change":function(e){t.formData.time=e}},model:{value:t.formData.time,callback:function(e){t.$set(t.formData,"time",e)},expression:"formData.time"}})],1)],1),a("Col",{attrs:{xs:24}},[a("FormItem",{attrs:{label:"转移人才、客户、供应商","label-position":"top",prop:"newStaffId"}},[t.showModal?a("chooseStaff",{attrs:{staffId:String(t.formData.newStaffId)},on:{handleSubmit:t.getStaffId}}):t._e()],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"原因","label-position":"top",prop:"leaveReason"}},[a("Input",{attrs:{type:"textarea",rows:6,placeholder:"最多输入200个字符"},model:{value:t.formData.leaveReason,callback:function(e){t.$set(t.formData,"leaveReason",e)},expression:"formData.leaveReason"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"附件","label-position":"top"}},[a("div",[t._v("（可以上传离职协议与离职证明等,不超过20张）")]),a("div",{staticStyle:{color:"#bbb"}},[t._v("建议尺寸: 800*1100px")]),a("uploadImgList",{attrs:{id:"leavePic",picArr:[]},on:{uploadSuccess:t.handleSuccess}})],1)],1)],1)],1),a("template",{slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formData")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formData")}}},[t._v("确定")])],1)],2)},G=[],J={components:{uploadImgList:d["a"],chooseStaff:y["a"]},props:{},data:function(){return{loading:!0,sectionList:[],showModal:!1,formData:{staffId:"",leavePic:[],leaveReason:"",newStaffId:""},staffName:"",ruleInline:{time:[{required:!0,message:"请选择离职时间",trigger:"change"}],leaveReason:[{required:!0,message:"请输入离职原因",trigger:"blur"}],newStaffId:[{required:!0,message:"请选择转移对象",trigger:"blur"}]}}},computed:{},watch:{},methods:{handleSuccess:function(t){this.formData.leavePic=t},DrawerToShow:function(t,e){this.formData.staffId=t,this.staffName=e,this.showModal=!0,this.loading=!0},handleReset:function(t){this.showModal=!1,this.$refs[t].resetFields(),this.formData.leavePic=[]},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(a){a?Object(S["y"])(e.formData).then((function(a){e.$Message.success("已离职！"),e.$emit("getData"),e.showModal=!1,e.$refs[t].resetFields()})):e.$Message.error("表单验证失败!")}))},getStaffId:function(t){this.formData.newStaffId=t}},mounted:function(){},beforeDestroy:function(){},created:function(){}},W=J,Q=(a("4be9"),Object(g["a"])(W,q,G,!1,null,"70663f32",null)),Y=Q.exports,X={name:"detail",components:{editInput:$["a"],editTextarea:V["a"],uploadImg:c["a"],addContract:U,editSelect:j["a"],chooseIndustry:N["a"],choosePosition:m["a"],chooseDepartMent:I,editDate:P["a"],chooseStaff:y["a"],uploadImgList:d["a"],staffLeave:Y,chooseBaseData:D["a"]},data:function(){return{showAdd:!1,tabIndex:0,curTab:0,formData:{},leaveInfo:{},name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],phone:[{required:!0,message:"手机号码不能为空",trigger:"blur"}],educationList:[],personTypeList:[{id:"1",name:"父母"},{id:"2",name:"配偶"},{id:"3",name:"子女"},{id:"4",name:"其他"}],cycleList:[{id:"1",name:"一个月"},{id:"2",name:"三个月"},{id:"3",name:"六个月"},{id:"4",name:"九个月"},{id:"5",name:"十二个月"},{id:"6",name:"按照合同周期"}],sexList:[{id:"0",name:"女"},{id:"1",name:"男"}],firstList:[{id:"0",name:"是"},{id:"1",name:"否"}],maritalStatusList:[{id:"1",name:"未婚"},{id:"2",name:"已婚"},{id:"3",name:"离异"},{id:"4",name:"丧偶"},{id:"5",name:"分居"}],politicalStatusList:[{id:"1",name:"团员"},{id:"2",name:"党员"},{id:"3",name:"群众"},{id:"4",name:"其他"}],albumList:[],isShow:!1,positionIds:[],departmentIds:[],demainUrl:s["a"].cookies.get("domainUrl"),idCardPositiveUrl:"",idCardReverseUrl:"",leaveData:[],contractData:[],contractDate:[],baseList:[],imgName:"",visible:!1,hasBtn:!1}},props:{erTitle:{type:String},status:{type:String}},methods:{getEducation:function(){var t=this;console.log("aaaaa"),Object(p["p"])({type:"EDUCATION"}).then((function(e){t.educationList=e.data.educationList}))},getBase:function(){var t=this;Object(p["h"])({type:"SOCIAL_SECURITY"}).then((function(e){t.baseList=e.data}))},staffLeave:function(){this.$refs.leave.DrawerToShow(this.formData.staffId,this.formData.name)},getContract:function(){var t=this;Object(S["t"])({staffId:this.formData.staffId,pageSize:999}).then((function(e){t.loading=!1,0===e.ret?(console.log("成功"),t.contractData=e.data.list,t.pageination=e.data.pageInfo):t.$Message.error(e.msg||"接口错误")}))},getLeaveData:function(){var t=this;Object(S["A"])({staffId:this.formData.staffId}).then((function(e){t.loading=!1,0===e.ret?(console.log("成功"),t.leaveData=e.data.list,t.pageination=e.data.pageInfo):t.$Message.error(e.msg||"接口错误")}))},getLeaveInfo:function(t){var e=this;Object(S["z"])({staffId:staffId}).then((function(t){0===t.ret&&(e.leaveInfo=t.data.info||{})}))},getInfo:function(t){var e=this;this.loading=!0,Object(S["w"])({staffId:t}).then((function(t){0===t.ret&&(e.formData=t.data.info,e.positionIds=t.data.info.positionId,e.departmentIds=t.data.info.sectionId,e.contractDate=[e.formData.startTime,e.formData.endTime],e.formData.positionId=t.data.info.positionId[t.data.info.positionId.length-1],e.formData.sectionId=t.data.info.sectionId[t.data.info.sectionId.length-1],t.data.info.idCardPositivePic&&(e.idCardPositiveUrl=e.demainUrl+t.data.info.idCardPositivePic),t.data.info.idCardReversePic&&(e.idCardReverseUrl=e.demainUrl+t.data.info.idCardReversePic),e.loading=!1)}))},showContract:function(t,e){this.$refs.contract.DrawerToShow(this.formData.staffId,t,e)},handleSuccess:function(t){this.formData.idCardPositivePic=t.pic,this.handleSubmit()},handleSuccess0:function(t){this.formData.idCardReversePic=t.pic,this.handleSubmit()},handleChangeTime:function(t){this.formData.startTime=t[0]||"",this.formData.endTime=t[1]||"",this.handleSubmit()},show:function(){this.$refs.zhuanyi.DrawerToShow()},DrawerToShow:function(t,e){this.hasBtn=e,this.formData.staffId=t,this.showAdd=!0,this.getBase(),this.getInfo(t),this.getLeaveData(),this.getContract(),this.getEducation()},cancel:function(t){this.showAdd=!1,this.departmentIds=[],this.positionIds=[],this.$refs[t].resetFields(),this.$emit("getData","add")},callback:function(t,e){console.log(t,e,"值"),this.formData[t]=e,this.handleSubmit()},handleSubmit:function(){var t=this;Object(S["D"])(this.formData).then((function(e){0===e.ret?t.$Message.success("修改成功！"):t.$Message.error(e.msg||"接口错误")}))},handleSuccess1:function(t){this.formData.educationPic=t,this.handleSubmit()},handleSuccess2:function(t){this.formData.academicDegreePic=t,this.handleSubmit()},changeId:function(t){this.positionIds=t;var e=t.length-1;this.formData.positionId=t[e],this.handleSubmit()},changeDepartmentId:function(t){this.departmentIds=t;var e=t.length-1;this.formData.sectionId=t[e],this.handleSubmit()},getStaffId:function(t){this.formData.Referrer=t,console.log(t,"++++++"),this.handleSubmit(this.formData.staffId)},handleLeave:function(t){this.leaveInfo.leavePic.push(t)},getId:function(t,e){this.formData[e]=t,this.handleSubmit()},changeSocial:function(){console.log("======"),this.handleSubmit()},handleView:function(t,e){var a=new O.a(document.getElementById(e),{initialViewIndex:t,title:!1,navbar:!1,hidden:function(){a.destroy()}});a.show()},viewFile:function(t){this.imgName=this.demainUrl+t,window.open(this.demainUrl+t,"_blank"),this.visible=!0}},created:function(){},mounted:function(){}},K=X,Z=(a("8441"),Object(g["a"])(K,k,T,!1,null,"2cc1c850",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Modal",{attrs:{title:"职工详情",width:"1000"},on:{"on-cancel":function(e){return t.cancel("formData")}},model:{value:t.showAdd,callback:function(e){t.showAdd=e},expression:"showAdd"}},[i("div",{staticStyle:{display:"flex","justify-content":"space-between","padding-bottom":"20px","font-size":"12px"}},[i("div",{staticStyle:{display:"flex"}},[i("div",{staticClass:"staff-head"},[i("img",{attrs:{src:a("f66a")}})]),i("div",{staticStyle:{"margin-left":"20px"}},[i("div",[t._v(t._s(t.formData.name))]),i("div",[t._v("岗位 "+t._s(t.formData.positionName))]),i("div",[t._v(t._s(t.formData.phone))])])])]),i("Tabs",{model:{value:t.curTab,callback:function(e){t.curTab=e},expression:"curTab"}},[i("Tab-pane",{key:"0",attrs:{label:"职工信息"}}),i("Tab-pane",{key:"1",attrs:{label:"合同管理"}}),i("Tab-pane",{key:"2",attrs:{label:"离职信息"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.curTab,expression:"curTab === 0"}]},[i("Form",{ref:"formData",staticClass:"detail",attrs:{"label-width":130,model:t.formData}},[i("Row",[i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("基本信息")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"姓名","label-position":"top",prop:"name"}},[t._v("\n            "+t._s(t.formData.name)+"\n          ")])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"性别","label-position":"top"}},[i("Select",{model:{value:t.formData.sex,callback:function(e){t.$set(t.formData,"sex",e)},expression:"formData.sex"}},[i("Option",{attrs:{value:"0"}},[t._v("女")]),i("Option",{attrs:{value:"1"}},[t._v("男")])],1)],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"工号","label-position":"top"}},[t.formData.jobNumber?i("span",[t._v(t._s(t.formData.jobNumber))]):i("span",[t._v("暂无")])])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"手机号","label-position":"top"}},[t._v("\n            "+t._s(t.formData.phone)+"\n          ")])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"岗位","label-position":"top"}},[i("choosePosition",{attrs:{ids:t.positionIds},on:{change:t.changeId}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"部门","label-position":"top"}},[i("chooseDepartMent",{attrs:{ids:t.departmentIds},on:{change:t.changeDepartmentId}})],1)],1),i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("工作信息")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"入职日期","label-position":"top"}},[t.formData.entryTime?i("span",[t._v(t._s(t.formData.entryTime))]):i("span",[t._v("暂无")])])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"试用期","label-position":"top"}},[t.formData.probation?i("span",[t._v(t._s(t.formData.probation))]):i("span",[t._v("暂无")])])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"合同日期","label-position":"top"}},[t.formData.startTime?i("span",[t._v(t._s(t.formData.startTime)+" 至 "+t._s(t.formData.endTime))]):i("span",[t._v("暂无")])])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"培训时间","label-position":"top"}},[t.formData.trainTime?i("span",[t._v(t._s(t.formData.trainTime))]):i("span",[t._v("暂无")])])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"工龄","label-position":"top"}},[t.formData.seniority?i("span",[t._v(t._s(t.formData.seniority))]):i("span",[t._v("暂无")])])],1)],1),i("Row",[i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("个人信息")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"身份证姓名","label-position":"top"}},[t._v("\n            "+t._s(t.formData.idName)+"\n          ")])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"身份证号","label-position":"top"}},[t.formData.idCard?i("span",[t._v(t._s(t.formData.idCard))]):i("span",[t._v("暂无")])])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"出生日期","label-position":"top"}},[t.formData.birthday?i("span",[t._v(t._s(t.formData.birthday))]):i("span",[t._v("暂无")])])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"是否农历","label-position":"top"}},[i("editSelect",{attrs:{id:"isLunarCalendar",iptId:String(t.formData.isLunarCalendar)||"",list:[{id:"0",name:"农历"},{id:"1",name:"阳历"}]},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"民族","label-position":"top"}},[t.formData.nation?i("span",[t._v(t._s(t.formData.nation))]):i("span",[t._v("暂无")])])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"住址","label-position":"top"}},[t.formData.address?i("span",[t._v(t._s(t.formData.address))]):i("span",[t._v("暂无")])])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"婚姻状况","label-position":"top"}},[i("editSelect",{attrs:{id:"maritalStatus",iptId:String(t.formData.maritalStatus)||"",list:t.maritalStatusList},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"政治面貌","label-position":"top"}},[i("editSelect",{attrs:{id:"politicalStatus",iptId:String(t.formData.politicalStatus)||"",list:t.politicalStatusList},on:{handleSubmit:t.callback}})],1)],1)],1),i("Row",[i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("保险&公积金")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"社保账号","label-position":"top"}},[t.formData.socialSecurityAccount?i("span",[t._v(t._s(t.formData.socialSecurityAccount))]):i("span",[t._v("暂无")])])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"公积金账号","label-position":"top"}},[t.formData.providentFundAccount?i("span",[t._v(t._s(t.formData.providentFundAccount))]):i("span",[t._v("暂无")])])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"是否第一次买社保","label-position":"top"}},[i("editSelect",{attrs:{id:"first",iptId:String(t.formData.first)||"",list:t.firstList},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"社保","label-position":"top"}},[i("Select",{attrs:{multiple:""},on:{"on-open-change":t.changeSocial},model:{value:t.formData.socialSecurity,callback:function(e){t.$set(t.formData,"socialSecurity",e)},expression:"formData.socialSecurity"}},t._l(t.baseList,(function(e,a){return i("Option",{key:a,attrs:{value:String(e.basisId)}},[t._v(t._s(e.name))])})),1)],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"商业险购买","label-position":"top"}},[t.formData.commercialInsurance?i("span",[t._v(t._s(t.formData.commercialInsurance))]):i("span",[t._v("暂无")])])],1)],1),i("Row",[i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("银行卡信息")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"开户银行","label-position":"top"}},[t.formData.bank?i("span",[t._v(t._s(t.formData.bank))]):i("span",[t._v("暂无")])])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"银行卡号","label-position":"top"}},[t.formData.bankCard?i("span",[t._v(t._s(t.formData.bankCard))]):i("span",[t._v("暂无")])])],1)],1),i("Row",[i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("学历信息")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"学历","label-position":"top"}},[i("editSelect",{attrs:{id:"education",iptId:t.formData.education,list:t.educationList},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"所属专业","label-position":"top"}},[t.formData.profession?i("span",[t._v(t._s(t.formData.profession))]):i("span",[t._v("暂无")])])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"毕业院校","label-position":"top"}},[t.formData.finishSchool?i("span",[t._v(t._s(t.formData.finishSchool))]):i("span",[t._v("暂无")])])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"毕业时间","label-position":"top"}},[t.formData.finishTime?i("span",[t._v(t._s(t.formData.finishTime))]):i("span",[t._v("暂无")])])],1)],1),i("Row",[i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("紧急联系人")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"紧急联系人姓名","label-position":"top"}},[t.formData.personName?i("span",[t._v(t._s(t.formData.personName))]):i("span",[t._v("暂无")])])],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"紧急联系人关系","label-position":"top"}},[i("editSelect",{attrs:{id:"personType",iptId:String(t.formData.personType)||"",list:t.personTypeList},on:{handleSubmit:t.callback}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"联系人手机号","label-position":"top"}},[t.formData.personTell?i("span",[t._v(t._s(t.formData.personTell))]):i("span",[t._v("暂无")])])],1)],1),i("Row",[i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("个人资料")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"身份证","label-position":"top"}},[i("div",{staticStyle:{display:"flex"}},[i("div",{staticClass:"center"},[i("uploadImg",{attrs:{picArr:{pic:t.formData.idCardPositivePic||"",picName:t.idCardPositiveUrl||""}},on:{uploadSuccess:t.handleSuccess}}),i("div",[t._v("人像面")])],1),i("div",{staticClass:"center",staticStyle:{"margin-left":"20px"}},[i("uploadImg",{attrs:{picArr:{pic:t.formData.idCardReversePic||"",picName:t.idCardReverseUrl||""}},on:{uploadSuccess:t.handleSuccess0}}),i("div",[t._v("国徽面")])],1)])])],1),i("Col",{attrs:{xs:24}},[i("FormItem",{attrs:{label:"学历证书","label-position":"top"}},[i("div",{staticStyle:{color:"#bbb"}},[t._v("建议尺寸: 800*1100px")]),t.showAdd?i("uploadImgList",{attrs:{id:"education",picArr:t.formData.educationPic||[]},on:{uploadSuccess:t.handleSuccess1}}):t._e()],1)],1),i("Col",{attrs:{xs:24}},[i("FormItem",{attrs:{label:"学位证书","label-position":"top"}},[i("div",{staticStyle:{color:"#bbb"}},[t._v("建议尺寸: 800*1100px")]),t.showAdd?i("uploadImgList",{attrs:{id:"academicDegree",picArr:t.formData.academicDegreePic||[]},on:{uploadSuccess:t.handleSuccess2}}):t._e()],1)],1)],1),i("Row",[i("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("其他信息")]),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"推荐人","label-position":"top"}},[i("chooseStaff",{attrs:{id:"Referrer",staffId:String(t.formData.Referrer)},on:{handleSubmit:t.getStaffId}})],1)],1),i("Col",{attrs:{xs:24,md:12}},[i("FormItem",{attrs:{label:"渠道","label-position":"top"}},[i("chooseBaseData",{attrs:{id:"channelId",channel:"CHANNEL_MODE",basisId:String(t.formData.channelId)},on:{handleSubmit:t.getId}})],1)],1)],1),i("Row",[i("Col",{attrs:{span:"24"}},[i("FormItem",{attrs:{label:"备注","label-position":"top"}},[t.formData.remark?i("span",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(t.formData.remark))]):i("span",[t._v("暂无")])])],1)],1)],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.curTab,expression:"curTab === 1"}]},[i("div",{staticClass:"list"},[t.contractData.length>0?t._l(t.contractData,(function(e,o){return i("div",{key:o,staticClass:"item"},[i("div",{staticClass:"head"},[i("div",[i("div",[t._v("标题："+t._s(e.title))]),i("div",[t._v("合同期限："+t._s(e.startTime)+" 至 "+t._s(e.endTime))]),i("div",{staticClass:"time"},[t._v("创建时间："+t._s(e.createTime)+" ")])])]),i("div",{staticStyle:{"margin-top":"10px"}},[t._v("劳动合同： "),e.laborContractPic&&0!==e.laborContractPic.length?t._e():i("span",[t._v("没有上传图片！")])]),e.laborContractPic&&e.laborContractPic.length>0?i("div",{staticClass:"album",attrs:{id:"images1"+o}},t._l(e.laborContractPic,(function(e,a){return i("div",{key:a,staticClass:"photo"},[i("img",{attrs:{src:t.demainUrl+e}}),i("div",{staticClass:"r-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView(a,"images1"+o)}}})],1)])})),0):t._e(),e.laborContractFile?i("div",{staticStyle:{"margin-top":"10px"}},[i("div",[t._v("劳动合同附件：")]),i("div",{staticClass:"file-img"},[i("img",{attrs:{src:a("b9de")}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){return t.viewFile(e.laborContractFile)}}})],1)])]):t._e(),i("div",{staticStyle:{"margin-top":"10px"}},[t._v("竞业协议： "),e.competitionAgreementPic&&0!==e.competitionAgreementPic.length?t._e():i("span",[t._v("没有上传图片！")])]),e.competitionAgreementPic&&e.competitionAgreementPic.length>0?i("div",{staticClass:"album",attrs:{id:"images2"+o}},t._l(e.competitionAgreementPic,(function(e,a){return i("div",{key:a,staticClass:"photo"},[i("img",{attrs:{src:t.demainUrl+e}}),i("div",{staticClass:"r-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView(a,"images2"+o)}}})],1)])})),0):t._e(),e.competitionAgreementFile?i("div",{staticStyle:{"margin-top":"10px"}},[i("div",[t._v("竞业协议附件：")]),i("div",{staticClass:"file-img"},[i("img",{attrs:{src:a("b9de")}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){return t.viewFile(e.competitionAgreementFile)}}})],1)])]):t._e(),i("div",{staticStyle:{"margin-top":"10px"}},[t._v("保密合同： "),e.confidentialityContract&&0!==e.confidentialityContract.length?t._e():i("span",[t._v("没有上传图片！")])]),e.confidentialityContract&&e.confidentialityContract.length>0?i("div",{staticClass:"album",attrs:{id:"images3"+o}},t._l(e.confidentialityContract,(function(e,a){return i("div",{key:a,staticClass:"photo"},[i("img",{attrs:{src:t.demainUrl+e}}),i("div",{staticClass:"r-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView(a,"images3"+o)}}})],1)])})),0):t._e(),e.confidentialityContractFile?i("div",{staticStyle:{"margin-top":"10px"}},[i("div",[t._v("保密合同附件：")]),i("div",{staticClass:"file-img"},[i("img",{attrs:{src:a("b9de")}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){return t.viewFile(e.confidentialityContractFile)}}})],1)])]):t._e()])})):i("div",{staticStyle:{"text-align":"center"}},[t._v("暂无合同")])],2)]),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.curTab,expression:"curTab === 2"}]},[0===t.leaveData.length?i("div",{staticStyle:{"text-align":"center",padding:"20px"}},[t._v("\n        暂无离职信息\n      ")]):t._l(t.leaveData,(function(e,a){return i("div",{key:a,staticStyle:{"border-bottom":"solid 1px #e8eaec"}},[i("Form",[i("FormItem",{attrs:{label:"离职时间"}},[t._v("\n            "+t._s(e.time)+"\n          ")]),i("FormItem",{attrs:{label:"离职原因"}},[t._v("\n            "+t._s(e.leaveReason)+"\n          ")]),i("FormItem",{attrs:{label:"解除劳动合同协议","label-width":150}},[i("div",{staticClass:"img-list",attrs:{id:"images"}},t._l(JSON.parse(e.leavePic),(function(e,a){return i("div",{key:a,staticClass:"img-item"},[i("img",{staticStyle:{object:"cover"},attrs:{src:t.demainUrl+e}}),i("div",{staticClass:"r-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView(a,"images")}}})],1)])})),0)])],1)],1)})),i("staffLeave",{ref:"leave",attrs:{erTitle:t.erTitle},on:{getData:t.cancel}})],2),i("addContract",{ref:"contract",on:{getData:t.getContract}}),i("div",{staticClass:"demo-drawer-footer",attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.cancel("formData")}}},[t._v("取消")])],1)],1)],1)},at=[],it={name:"detail",components:{editInput:$["a"],editTextarea:V["a"],uploadImg:c["a"],addContract:U,editSelect:j["a"],chooseIndustry:N["a"],choosePosition:m["a"],chooseDepartMent:I,editDate:P["a"],chooseStaff:y["a"],uploadImgList:d["a"],staffLeave:Y,chooseBaseData:D["a"]},data:function(){return{showAdd:!1,tabIndex:0,curTab:0,formData:{},leaveInfo:{},name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],phone:[{required:!0,message:"手机号码不能为空",trigger:"blur"}],educationList:[{id:"1",name:"初中及以下"},{id:"2",name:"中专/中技"},{id:"3",name:"高中"},{id:"4",name:"大专"},{id:"5",name:"本科"},{id:"6",name:"硕士"},{id:"7",name:"博士"}],personTypeList:[{id:"1",name:"父母"},{id:"2",name:"配偶"},{id:"3",name:"子女"},{id:"4",name:"其他"}],cycleList:[{id:"1",name:"一个月"},{id:"2",name:"三个月"},{id:"3",name:"六个月"},{id:"4",name:"九个月"},{id:"5",name:"十二个月"},{id:"6",name:"按照合同周期"}],sexList:[{id:"0",name:"女"},{id:"1",name:"男"}],firstList:[{id:"0",name:"是"},{id:"1",name:"否"}],maritalStatusList:[{id:"1",name:"未婚"},{id:"2",name:"已婚"},{id:"3",name:"离异"},{id:"4",name:"丧偶"},{id:"5",name:"分居"}],politicalStatusList:[{id:"1",name:"团员"},{id:"2",name:"党员"},{id:"3",name:"群众"},{id:"4",name:"其他"}],albumList:[],isShow:!1,positionIds:[],departmentIds:[],demainUrl:s["a"].cookies.get("domainUrl"),idCardPositiveUrl:"",idCardReverseUrl:"",leaveData:[],contractData:[],contractDate:[],baseList:[],imgName:"",visible:!1,hasBtn:!1}},props:{erTitle:{type:String},status:{type:String}},methods:{getEducation:function(){var t=this;console.log("aaaaa"),Object(p["p"])({type:"EDUCATION"}).then((function(e){t.educationList=e.data.educationList}))},getBase:function(){var t=this;Object(p["h"])({type:"SOCIAL_SECURITY"}).then((function(e){t.baseList=e.data}))},staffLeave:function(){this.$refs.leave.DrawerToShow(this.formData.staffId,this.formData.name)},getContract:function(){var t=this;Object(S["t"])({staffId:this.formData.staffId,pageSize:999}).then((function(e){t.loading=!1,0===e.ret?(console.log("成功"),t.contractData=e.data.list,t.pageination=e.data.pageInfo):t.$Message.error(e.msg||"接口错误")}))},getLeaveData:function(){var t=this;Object(S["A"])({staffId:this.formData.staffId}).then((function(e){t.loading=!1,0===e.ret?(console.log("成功"),t.leaveData=e.data.list,t.pageination=e.data.pageInfo):t.$Message.error(e.msg||"接口错误")}))},getLeaveInfo:function(t){var e=this;Object(S["z"])({staffId:staffId}).then((function(t){0===t.ret&&(e.leaveInfo=t.data.info||{})}))},getInfo:function(t){var e=this;this.loading=!0,Object(S["w"])({staffId:t}).then((function(t){0===t.ret&&(e.formData=t.data.info,e.positionIds=t.data.info.positionId,e.departmentIds=t.data.info.sectionId,e.formData.positionId=t.data.info.positionId[t.data.info.positionId.length-1],e.formData.sectionId=t.data.info.sectionId[t.data.info.sectionId.length-1],t.data.info.idCardPositivePic&&(e.idCardPositiveUrl=e.demainUrl+t.data.info.idCardPositivePic),t.data.info.idCardReversePic&&(e.idCardReverseUrl=e.demainUrl+t.data.info.idCardReversePic),e.loading=!1)}))},showContract:function(t,e){this.$refs.contract.DrawerToShow(this.formData.staffId,t,e)},handleSuccess:function(t){this.formData.idCardPositivePic=t.pic},handleSuccess0:function(t){this.formData.idCardReversePic=t.pic},handleChangeTime:function(t){this.formData.startTime=t[0]||"",this.formData.endTime=t[1]||""},show:function(){this.$refs.zhuanyi.DrawerToShow()},DrawerToShow:function(t,e){this.hasBtn=e,this.formData.staffId=t,this.showAdd=!0,this.getBase(),this.getInfo(t),this.getLeaveData(),this.getContract()},cancel:function(t){this.showAdd=!1,this.departmentIds=[],this.positionIds=[],this.$refs[t].resetFields(),this.$emit("getData","add")},callback:function(t,e){console.log(t,e,"值"),this.formData[t]=e},handleSubmit:function(){var t=this;Object(S["D"])(this.formData).then((function(e){0===e.ret?t.$Message.success("修改成功！"):t.$Message.error(e.msg||"接口错误")}))},handleSuccess1:function(t){this.formData.educationPic=t},handleSuccess2:function(t){this.formData.academicDegreePic=t},changeId:function(t){this.positionIds=t;var e=t.length-1;this.formData.positionId=t[e]},changeDepartmentId:function(t){this.departmentIds=t;var e=t.length-1;this.formData.sectionId=t[e]},getStaffId:function(t){this.formData.Referrer=t,console.log(t,"++++++")},handleLeave:function(t){this.leaveInfo.leavePic.push(t)},getId:function(t,e){this.formData[e]=t},changeSocial:function(){console.log("======")},handleView:function(t,e){var a=new O.a(document.getElementById(e),{initialViewIndex:t,title:!1,navbar:!1,hidden:function(){a.destroy()}});a.show()},viewFile:function(t){this.imgName=this.demainUrl+t,window.open(this.demainUrl+t,"_blank"),this.visible=!0}},created:function(){},mounted:function(){}},ot=it,nt=(a("8d99"),Object(g["a"])(ot,et,at,!1,null,"bfabd12c",null)),st=nt.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{"class-name":"vertical-center-modal","mask-closable":!1,"footer-hide":!0,width:500,title:"修改密码"},on:{"on-cancel":function(e){return t.cancel("formValidate")}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Form",{ref:"formValidate",staticClass:"ivu-mb-8",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"账号",prop:"userAccount"}},[t._v("\n                "+t._s(t.formValidate.userAccount)+"\n            ")]),a("FormItem",{attrs:{label:"密码",prop:"adminPwd"}},[a("Input",{attrs:{maxlength:"24",type:"password"},model:{value:t.formValidate.adminPwd,callback:function(e){t.$set(t.formValidate,"adminPwd",e)},expression:"formValidate.adminPwd"}})],1)],1),a("div",{staticClass:"ivu-mt ivu-text-right"},[a("Button",{on:{click:function(e){return t.cancel("formValidate")}}},[t._v("取消")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)],1)],1)},lt=[],ct=(a("9ec9"),a("b6bd"));function dt(t){return Object(ct["a"])({url:"/auth/group/list",method:"post",data:t})}function mt(t){return Object(ct["a"])({url:"/user/user/info",method:"post",data:t})}function ut(t){return Object(ct["a"])({url:"/user/user/update",method:"post",data:t})}var ft,pt={props:[],data:function(){return{loading:!1,status:[{id:1,value:"启用"},{id:2,value:"停用"}],formValidate:{adminAccount:"",adminPwd:"",groupId:""},ruleValidate:{groupId:[{type:"number",required:!0,message:"请选择用户分组",trigger:"change"}]},modal:!1,mode:"add",groupList:[]}},computed:{},methods:{getList:function(){var t=this;dt({name:this.name,page:this.page,pageSize:this.pageSize}).then((function(e){t.groupList=e.data.list}))},infoDetail:function(t){var e=this;mt({id:t}).then((function(t){e.formValidate=t.data}))},DrawerToShow:function(t){this.infoDetail(t),this.modal=!0},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t&&(e.loading=!0,ut({id:e.formValidate.id,userPwd:e.formValidate.adminPwd,groupId:e.formValidate.groupId}).then((function(t){e.modal=!1,e.$emit("onSubmit"),e.$Message.success("修改成功"),e.loading=!1})).catch((function(t){e.loading=!1})))}))},cancel:function(t){this.modal=!1,this.$refs[t].resetFields()},handleReset:function(t){this.$refs[t].resetFields()}},mounted:function(){},watch:{}},ht=pt,bt=Object(g["a"])(ht,rt,lt,!1,null,null,null),gt=bt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,title:"导出职工",width:620},on:{"on-cancel":function(e){return t.handleReset()}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{ref:"formData",attrs:{model:t.formData}},[a("FormItem",{attrs:{label:"姓名：","label-position":"top","label-width":80}},[a("Input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("FormItem",{attrs:{label:"部门：","label-position":"top","label-width":80}},[a("chooseDepartMent",{attrs:{ids:t.ids},on:{change:t.changeDepartmentId}})],1),a("FormItem",{attrs:{label:"性别：","label-position":"top","label-width":80}},[a("RadioGroup",{model:{value:t.formData.sex,callback:function(e){t.$set(t.formData,"sex",e)},expression:"formData.sex"}},[a("Radio",{attrs:{label:-1}},[t._v("所有")]),a("Radio",{attrs:{label:0}},[t._v("女")]),a("Radio",{attrs:{label:1}},[t._v("男")])],1)],1),a("FormItem",{attrs:{label:"状态：","label-position":"top","label-width":80}},[a("RadioGroup",{model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[a("Radio",{attrs:{label:-1}},[t._v("所有")]),a("Radio",{attrs:{label:0}},[t._v("在职")]),a("Radio",{attrs:{label:1}},[t._v("离职")])],1)],1)],1),a("template",{slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v("关闭")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(e){return t.exportData("formData")}}},[t._v("导出")])],1)],2)},It=[],yt={components:{chooseDepartMent:I},props:{},data:function(){return{loading:!1,staffExport:S["v"],showModal:!1,formData:{name:"",sectionId:"",sex:-1,status:-1},ids:[],isDisable:!1}},computed:{},watch:{},methods:(ft={getId:function(t,e){this.formData[e]=t},DrawerToShow:function(t,e){this.showModal=!0},handleReset:function(){this.formData={name:"",sectionId:"",sex:-1,status:-1},this.ids=[],this.showModal=!1}},Object(n["a"])(ft,"getId",(function(t,e){this.formData[e]=t})),Object(n["a"])(ft,"changeDepartmentId",(function(t){this.ids=t;var e=t.length-1;this.formData.sectionId=t[e],console.log(this.formData.sectionId)})),Object(n["a"])(ft,"exportData",(function(t){console.log("&name="+this.formData.name+"&status="+this.formData.status+"&sex="+this.formData.sex+"&sectionId="+this.formData.sectionId),window.open(this.staffExport+"&name="+this.formData.name+"&status="+this.formData.status+"&sectionId="+this.formData.sectionId+"&sex="+this.formData.sex),this.formData={name:"",sectionId:"",sex:-1,status:-1},this.ids=[]})),Object(n["a"])(ft,"handleChoose",(function(t,e){this.formData.clientId=t,this.formData.clientName=e})),Object(n["a"])(ft,"showCustomer",(function(){this.$refs.customer.DrawerToShow()})),ft),mounted:function(){},beforeDestroy:function(){},created:function(){}},Dt=yt,St=Object(g["a"])(Dt,vt,It,!1,null,"7679a0cc",null),Ct=St.exports;a("2f62");function wt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function xt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?wt(a,!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):wt(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var _t={components:{addStaff:_,staffDetail:tt,staffLeave:Y,chooseDepartMent:I,addAdminUser:gt,exportStaff:Ct,viewDetail:st},data:function(){var t,e=this;return t={children:JSON.parse(sessionStorage.getItem("JurisdictionMenu")),loading:!0,erTitle:"",status:"",staffId:0,staffName:"",tableColumns:[{title:"姓名",key:"name",minWidth:100,render:function(t,a){return t("div",[t("a",{props:{type:"primary",size:"small"},style:{marginRight:"5px",width:"100px",height:"20px",display:"block"},on:{click:function(){e.hasEdit||a.row.staffId==s["a"].cookies.get("staffId")?e.showDetail(a.row,"edit"):e.showViewDetail(a.row)}}},a.row.name)])}},{title:"手机",minWidth:100,key:"phone"},{title:"部门",minWidth:100,key:"sectionName"},{title:"岗位",minWidth:100,key:"positionName"},{title:"性别",minWidth:60,key:"sexName"},{title:"入职日期",minWidth:100,key:"entryTime"},{title:"状态",minWidth:60,key:"statusName"},{title:"操作",key:"action",minWidth:100,render:function(t,a){var i=[];if(e.children.length>1)return e.children.forEach((function(o){0==a.row.status&&"复职"!=o.btnTitle&&o.btnTitle&&("离职"===o.btnTitle&&(e.hasBtn=!0),i.push(t("DropdownItem",{nativeOn:{click:function(){e.handleEvent(o.btnHandle,a.row)}}},o.btnTitle))),1==a.row.status&&"离职"!=o.btnTitle&&o.btnTitle&&(e.hasBtn=!1,i.push(t("DropdownItem",{nativeOn:{click:function(){e.handleEvent(o.btnHandle,a.row)}}},o.btnTitle)))})),t("Dropdown",{props:{trigger:"click",transfer:!0}},[t("a","操作"),t("DropdownMenu",{slot:"list"},i)])}}],tableData:[]},Object(n["a"])(t,"erTitle",""),Object(n["a"])(t,"pageination",{page:1,pageSize:10,count:1}),Object(n["a"])(t,"staffData",[]),Object(n["a"])(t,"curTab",0),Object(n["a"])(t,"formData",{status:-1,sex:-1,sectionId:0}),Object(n["a"])(t,"isShow",!1),Object(n["a"])(t,"staffIds",[]),Object(n["a"])(t,"ids",[]),Object(n["a"])(t,"hasBtn",!1),Object(n["a"])(t,"hasEdit",!1),t},created:function(){var t=this;JSON.parse(sessionStorage.getItem("staffIds"))&&(this.staffIds=JSON.parse(sessionStorage.getItem("staffIds"))),this.getData(),this.children.forEach((function(e){t.$on(e.btnHandle,t[e.btnHandle]),"职工详情编辑"==e.menuName&&(t.hasEdit=!0)})),console.log(this.children,"aaaaaa")},methods:{remove:function(t){var e=this;this.$Modal.confirm({title:"删除",content:"<p>确定删除该职工？</p>",onOk:function(){Object(S["u"])({staffId:t.staffId}).then((function(t){0===t.ret?(e.$Message.success("删除成功"),e.getData()):e.$Message.error(t.msg)}))},onCancel:function(){e.$Message.warning("已取消！")}})},handleEvent:function(t,e){this.$emit(t,e)},backCompany:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"<p>确定该职工复职？</p>",onOk:function(){Object(S["r"])({staffId:t.staffId}).then((function(t){0===t.ret?(e.$Message.success("已复职！"),e.getData()):e.$Message.error(t.msg||"网络错误")}))},onCancel:function(){e.$Message.warning("已取消！")}})},search:function(){this.page=1,this.getData()},clear:function(t){this.page=1,this.formData.status=-1,this.formData.sex=-1,this.formData.name=[],this.formData.sectionId=0,this.staffIds=[],this.ids=[],this.getData()},getStaff:function(){this.getData(),this.$store.dispatch("admin/global/init")},getData:function(){var t=this;this.loading=!0,Object(S["B"])(xt({staffId:this.staffIds,page:this.page,pageSize:this.pageination.pageSize},this.formData)).then((function(e){t.loading=!1,0===e.ret?(console.log("成功"),t.tableData=e.data.list,t.pageination=e.data.pageInfo):t.$Message.error(e.msg||"接口错误")}))},changePage:function(t){this.page=t,this.getData()},showDetail:function(t){this.erTitle="职工详情",this.$refs.detail.DrawerToShow(t.staffId,this.hasBtn)},showViewDetail:function(t){this.erTitle="职工详情",this.$refs.view.DrawerToShow(t.staffId,this.hasBtn)},show:function(t,e){this.status=e,"add"===e?this.erTitle="新增":"edit"===e&&(this.erTitle="编辑"),this.$refs.Drawer.DrawerToShow()},chooseStaff:function(t){this.staffData=t,console.log(t,"list"),1===t.length&&(this.staffId=t[0].staffId,this.staffName=t[0].name)},staffLeave:function(t){this.erTitle="职工离职",this.$refs.leave.DrawerToShow(t.staffId,t.name)},showAdmin:function(t){this.$refs.admin.DrawerToShow(t.staffId,t.name)},screen:function(){this.isShow=!this.isShow},changeDepartmentId:function(t){this.ids=t;var e=t.length-1;this.formData.sectionId=t[e],console.log(this.formData.sectionId)},showExport:function(){this.$refs.export.DrawerToShow()},changePageSize:function(t){this.pageination.pageSize=t,this.getData()}},destroyed:function(){sessionStorage.removeItem("staffIds")}},kt=_t,Tt=(a("4eb4"),Object(g["a"])(kt,i,o,!1,null,"5dc8eaec",null));e["default"]=Tt.exports},"7e1d":function(t,e,a){"use strict";var i=a("8f63"),o=a.n(i);o.a},"7e81":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{staticClass:"no-mb-container  ",attrs:{"class-name":"vertical-center-modal","mask-closable":!1,"footer-hide":!0,width:600,title:"修改权限组"},on:{"on-cancel":t.handleCancel},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Form",{ref:"formCustom",staticClass:"ivu-mb-8",attrs:{inline:""}},[a("FormItem",{attrs:{label:""}},[a("Input")],1),a("FormItem",{attrs:{label:""}},[a("Button",[t._v("查询")])],1)],1),a("div",[a("Tree",{attrs:{data:t.data1,"show-checkbox":""}})],1),a("div",{staticClass:"ivu-mt ivu-text-right"},[a("Button",{on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("取消")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)],1)],1)},o=[],n=(a("7f7f"),a("c5f6"),a("3298"),{props:{test1:{type:String,default:","},test2:{type:Number,default:0},showModal:{type:Boolean,default:!1},test4:{type:Array,default:function(){return[]}}},data:function(){return{formValidate:{name:"",mail:"",city:"",gender:"",interest:[],date:"",time:"",desc:""},ruleValidate:{name:[{required:!0,message:"",trigger:"blur"}],mail:[{required:!0,message:"",trigger:"blur"},{type:"email",message:"",trigger:"blur"}],city:[{required:!0,message:"",trigger:"change"}],gender:[{required:!0,message:"",trigger:"change"}],interest:[{required:!0,type:"array",min:1,message:"",trigger:"change"},{type:"array",max:2,message:"",trigger:"change"}],date:[{required:!0,type:"date",message:"",trigger:"change"}],time:[{required:!0,type:"string",message:"",trigger:"change"}],desc:[{required:!0,message:"",trigger:"blur"},{type:"string",min:20,message:"",trigger:"blur"}]},data1:[{title:"招生管理",expand:!1,children:[]},{title:"招生管理",expand:!1,children:[{title:"parent 1-1",expand:!1,children:[{title:"leaf 1-1-1"},{title:"leaf 1-1-2"}]},{title:"parent 1-2",expand:!1,children:[{title:"leaf 1-2-1"},{title:"leaf 1-2-1"}]}]}],modal:!1,typeModal:!1}},computed:{},methods:{handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?e.$Message.success("Success!"):e.$Message.error("Fail!")}))},handleReset:function(t){this.$refs[t].resetFields()},handleCancel:function(){this.$emit("onCancel")}},mounted:function(){},watch:{showModal:function(t){this.modal=t}}}),s=n,r=a("2877"),l=Object(r["a"])(s,i,o,!1,null,null,null),c=l.exports;e["a"]=c},8441:function(t,e,a){"use strict";var i=a("d15d"),o=a.n(i);o.a},"8b97":function(t,e,a){var i=a("d3f4"),o=a("cb7c"),n=function(t,e){if(o(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,a){return n(t,a),e?t.__proto__=a:i(t,a),t}}({},!1):void 0),check:n}},"8d99":function(t,e,a){"use strict";var i=a("c63b"),o=a.n(i);o.a},"8f63":function(t,e,a){},"9ec9":function(t,e,a){},a5ae:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Cascader",{attrs:{data:t.tmpArr,value:t.ids,"change-on-select":""},on:{"update:value":function(e){t.ids=e},"on-change":t.change}})],1)},o=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),s=a("2f62"),r=a("9411");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(a,!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={components:{},props:{ids:Array},data:function(){return{showModal:!1,list:[],tmpArr:[]}},computed:c({},Object(s["e"])("admin/global",["industry","region","personnelSize"])),watch:{},methods:{change:function(t){this.$emit("change",t),console.log(t,"industry")},getIndustryList:function(){var t=this;Object(r["q"])().then((function(e){var a=e.data.list;t.list=a.map((function(t,e){return{value:t.value,label:t.title,children:t.children.map((function(t){return{value:t.value,label:t.title,children:t.children.map((function(t){return{value:t.value,label:t.title}}))}}))}}))}))}},mounted:function(){},beforeDestroy:function(){},created:function(){var t=this.industry;this.tmpArr=t.map((function(t,e){return{value:t.value,label:t.title,children:t.children.map((function(t){return{value:t.value,label:t.title,children:t.children.map((function(t){return{value:t.value,label:t.title}}))}}))}}))}},m=d,u=a("2877"),f=Object(u["a"])(m,i,o,!1,null,"00e5aca0",null);e["a"]=f.exports},a6d3:function(t,e,a){},aa77:function(t,e,a){var i=a("5ca1"),o=a("be13"),n=a("79e5"),s=a("fdef"),r="["+s+"]",l="​",c=RegExp("^"+r+r+"*"),d=RegExp(r+r+"*$"),m=function(t,e,a){var o={},r=n((function(){return!!s[t]()||l[t]()!=l})),c=o[t]=r?e(u):s[t];a&&(o[a]=c),i(i.P+i.F*r,"String",o)},u=m.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(d,"")),t};t.exports=m},ae2e:function(t,e,a){},b19b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("div",[t._l(t.children,(function(e,i){return[e.btnIsTable?t._e():a("Button",{key:i,class:e.btnClass,attrs:{type:e.btnType?e.btnType:"default"},on:{click:function(a){return t.handleEvent(e.btnHandle,e.btnHandleParams)}}},[t._v(t._s(e.btnTitle))])]})),a("div",{staticClass:"ivu-mt"},[a("Table",{ref:"table",attrs:{loading:t.loading,columns:t.tableTitle,data:t.tableData,type:"seletion",stripe:""},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.row;return[t._l(t.children,(function(e,o){return[e.btnIsTable?a("Button",{key:o,class:e.btnClass,attrs:{type:e.btnType?e.btnType:"default"},on:{click:function(a){return t.handleEventTwo(e.btnHandle,e.btnHandleParams,i)}}},[t._v(t._s(e.btnTitle))]):t._e()]}))]}}])})],1)],2)]),a("editPage",{ref:"Drawer",attrs:{erTitle:t.title},on:{callback:function(e){return t.getList()}}}),a("permissionGroup",{ref:"permissionGroup",attrs:{mode:t.mode},on:{onSubmit:t.onSubmit}})],1)},o=[],n=(a("ac6a"),a("7f7f"),a("ae2e"),a("684d")),s=a("7e81"),r=a("ea45"),l=a("59a3"),c=a("10b4"),d=a("580a"),m={components:{permissionGroup:n["a"],setPermission:s["a"],addUser:r["a"],chooseMember:l["a"],editPage:c["a"]},data:function(){var t=this;return{children:[{btnTitle:"新增",btnClass:"",btnType:"primary",btnHandle:"handleAdd",btnHandleParams:"add",btnIsTable:!1},{btnTitle:"编辑",btnClass:"marginRight-20",btnType:"primary",btnHandle:"showEditDrawer",btnHandleParams:"编辑",btnIsTable:!0},{btnTitle:"删除",btnClass:"",btnType:"error",btnHandle:"remove",btnHandleParams:"row.index",btnIsTable:!0}],showModal:!1,showModal2:!1,showModal3:!1,showChooseClass:!1,treeList:[],groupId:"",loading:!1,title:"",formValidate:{groupName:""},ruleValidate:{groupName:[{required:!0,message:"角色名称不能为空",trigger:"blur"}]},tableTitle:[{title:"角色名称",key:"groupName",minWidth:120,render:function(e,a){return e("div",[e("a",{on:{click:function(){t.handleAdd("edit",a.row)}}},a.row.groupName)])}},{title:"描述",key:"roleName",minWidth:120},{title:"说明",key:"describe",minWidth:120},{title:"操作",slot:"action",align:"center",minWidth:140}],page:1,name:"",pageSize:20,tableData:[],pageination:{pageSize:10,count:0,pageSum:1,page:1},mode:""}},computed:{},watch:{},methods:{handleAdd:function(t,e){this.mode=t,this.$refs.permissionGroup.DrawerToShow(t,e,1)},onSubmit:function(){this.getList()},delete:function(){this.$Modal.confirm({title:"提示",content:"<p>确定删除吗？</p>",onOk:function(){},onCancel:function(){}})},handleChoose:function(){this.showChooseClass=!1},showEditDrawer:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.title=t,this.$refs.Drawer.DrawerToShow(1),this.$refs.Drawer.loadData(e)},getList:function(){var t=this;this.loading=!0,Object(d["l"])({type:1,name:this.name,page:this.page,pageSize:this.pageSize}).then((function(e){t.loading=!1,t.tableData=e.data.list}))},remove:function(t,e){var a=this;this.$Modal.confirm({title:"提示",content:"<p>确认删除</p>",onOk:function(){a.onGroupDel(e)},onCancel:function(){}})},onGroupDel:function(t){var e=this;Object(d["g"])({type:1,groupId:t.groupId}).then((function(t){e.$Message.success("删除成功"),e.getList()}))},handleEvent:function(t,e){this.$emit(t,e)},handleEventTwo:function(t,e,a){this.$emit(t,e,a)}},mounted:function(){this.getList()},beforeDestroy:function(){},created:function(){var t=this;this.children.forEach((function(e){t.$on(e.btnHandle,t[e.btnHandle])}))}},u=m,f=a("2877"),p=Object(f["a"])(u,i,o,!1,null,null,null);e["default"]=p.exports},b42f:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Cascader",{attrs:{data:t.list,value:t.ids,"change-on-select":""},on:{"update:value":function(e){t.ids=e},"on-change":t.change}})],1)},o=[],n=a("9411"),s={components:{},props:{ids:Array},data:function(){return{showModal:!1,list:[]}},computed:{},watch:{},methods:{change:function(t){this.$emit("change",t),console.log(t,"position")},getList:function(){var t=this;Object(n["r"])().then((function(e){var a=e.data.list;t.list=a.map((function(t,e){return{value:t.value,label:t.title,children:t.children.map((function(t){return{value:t.value,label:t.title,children:t.children.map((function(t){return{value:t.value,label:t.title}}))}}))}})),sessionStorage.setItem("positionList",JSON.stringify(t.list))}))}},mounted:function(){},beforeDestroy:function(){},created:function(){JSON.parse(sessionStorage.getItem("positionList"))?this.list=JSON.parse(sessionStorage.getItem("positionList")):this.getList()}},r=s,l=a("2877"),c=Object(l["a"])(r,i,o,!1,null,"468f4dd6",null);e["a"]=c.exports},c5f6:function(t,e,a){"use strict";var i=a("7726"),o=a("69a8"),n=a("2d95"),s=a("5dbc"),r=a("6a99"),l=a("79e5"),c=a("9093").f,d=a("11e9").f,m=a("86cc").f,u=a("aa77").trim,f="Number",p=i[f],h=p,b=p.prototype,g=n(a("2aeb")(b))==f,v="trim"in String.prototype,I=function(t){var e=r(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():u(e,3);var a,i,o,n=e.charCodeAt(0);if(43===n||45===n){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===n){switch(e.charCodeAt(1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+e}for(var s,l=e.slice(2),c=0,d=l.length;c<d;c++)if(s=l.charCodeAt(c),s<48||s>o)return NaN;return parseInt(l,i)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof p&&(g?l((function(){b.valueOf.call(a)})):n(a)!=f)?s(new h(I(e)),a,p):I(e)};for(var y,D=a("9e1e")?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;D.length>S;S++)o(h,y=D[S])&&!o(p,y)&&m(p,y,d(h,y));p.prototype=b,b.constructor=p,a("2aba")(i,f,p)}},c63b:function(t,e,a){},c666:function(t,e,a){},cdac:function(t,e,a){"use strict";var i=a("c666"),o=a.n(i);o.a},d15d:function(t,e,a){},e323:function(t,e,a){"use strict";var i=a("22bf"),o=a.n(i);o.a},ea45:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,width:700,title:t.erTitle+"职工"},on:{"on-cancel":t.handleCancel},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Form",{ref:"formValidate",attrs:{inline:"",model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[a("Tabs",{attrs:{value:"name1"}},[a("TabPane",{attrs:{label:"职工信息",name:"name1"}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"姓名",prop:"userRealName"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"12",size:"small"},on:{"on-change":t.setUserName},model:{value:t.formValidate.userRealName,callback:function(e){t.$set(t.formValidate,"userRealName",e)},expression:"formValidate.userRealName"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"昵称"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"12",size:"small"},model:{value:t.formValidate.userNickName,callback:function(e){t.$set(t.formValidate,"userNickName",e)},expression:"formValidate.userNickName"}})],1)],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"性别"}},[a("Select",{staticStyle:{width:"auto"},attrs:{size:"small"},model:{value:t.formValidate.userSex,callback:function(e){t.$set(t.formValidate,"userSex",e)},expression:"formValidate.userSex"}},[a("Option",{attrs:{value:1}},[t._v("男")]),a("Option",{attrs:{value:2}},[t._v("女")])],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"手机号码"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"12",size:"small"},model:{value:t.formValidate.userMobile,callback:function(e){t.$set(t.formValidate,"userMobile",e)},expression:"formValidate.userMobile"}})],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"部门"}},[t._l(t.formValidate.sectionAndPosition,(function(e,i){return[a("Tag",{key:i,attrs:{closable:""},on:{"on-close":function(e){return t.handleClear(i)}}},[t._v(t._s(e.sectionName+"("+e.positionName+")")+"\n              ")])]})),a("Button",{attrs:{size:"small",icon:"md-more"},on:{click:function(e){return t.choose()}}})],2)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"身份证号"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"20",size:"small"},model:{value:t.formValidate.idCard,callback:function(e){t.$set(t.formValidate,"idCard",e)},expression:"formValidate.idCard"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"银行账号"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"24",size:"small"},model:{value:t.formValidate.bankCard,callback:function(e){t.$set(t.formValidate,"bankCard",e)},expression:"formValidate.bankCard"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"在职类型"}},[a("Select",{staticStyle:{width:"auto"},attrs:{size:"small"},model:{value:t.formValidate.userType,callback:function(e){t.$set(t.formValidate,"userType",e)},expression:"formValidate.userType"}},[a("Option",{attrs:{value:1}},[t._v("全职")]),a("Option",{attrs:{value:2}},[t._v("兼职")]),a("Option",{attrs:{value:3}},[t._v("专职")])],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"级别"}},[a("Select",{staticStyle:{width:"auto"},attrs:{size:"small"},model:{value:t.formValidate.userGroupId,callback:function(e){t.$set(t.formValidate,"userGroupId",e)},expression:"formValidate.userGroupId"}},t._l(t.empGrade,(function(e){return a("Option",{key:e.basicsId,attrs:{value:e.basicsId}},[t._v("\n                "+t._s(e.name))])})),1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"授课年级"}},[a("Select",{staticStyle:{"padding-right":"30px"},attrs:{multiple:"",size:"small"},model:{value:t.formValidate.classIds,callback:function(e){t.$set(t.formValidate,"classIds",e)},expression:"formValidate.classIds"}},t._l(t.shiftGrade,(function(e){return a("Option",{key:e.basicsId,attrs:{value:e.basicsId}},[t._v("\n                "+t._s(e.name))])})),1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"授课科目"}},[a("Select",{staticStyle:{"padding-right":"30px"},attrs:{multiple:"",size:"small"},model:{value:t.formValidate.subjectIds,callback:function(e){t.$set(t.formValidate,"subjectIds",e)},expression:"formValidate.subjectIds"}},t._l(t.subject,(function(e){return a("Option",{key:e.basicsId,attrs:{value:e.basicsId}},[t._v("\n                "+t._s(e.name))])})),1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"上司"}},[""!=t.formValidate.leaderName?a("Tag",{attrs:{closable:""},on:{"on-close":t.handleClearLeader}},[t._v("\n              "+t._s(t.formValidate.leaderName))]):t._e(),a("Button",{attrs:{size:"small",icon:"md-more"},on:{click:t.chooseLeader}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"邮箱"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"24",size:"small"},model:{value:t.formValidate.userEmail,callback:function(e){t.$set(t.formValidate,"userEmail",e)},expression:"formValidate.userEmail"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"QQ号码"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"18",size:"small"},model:{value:t.formValidate.userTel,callback:function(e){t.$set(t.formValidate,"userTel",e)},expression:"formValidate.userTel"}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"入职日期"}},[a("DatePicker",{staticStyle:{width:"auto"},attrs:{transfer:!0,value:t.formValidate.entryTime,type:"date",size:"small"},on:{"on-change":function(e){t.formValidate.entryTime=e}}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"转正日期"}},[a("DatePicker",{staticStyle:{width:"auto"},attrs:{transfer:!0,value:t.formValidate.bindingTime,type:"date",size:"small"},on:{"on-change":function(e){t.formValidate.bindingTime=e}}})],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"正式职工"}},[a("Select",{staticStyle:{width:"auto"},attrs:{transfer:"",size:"small"},model:{value:t.formValidate.workerType,callback:function(e){t.$set(t.formValidate,"workerType",e)},expression:"formValidate.workerType"}},[a("Option",{attrs:{value:1}},[t._v("是")]),a("Option",{attrs:{value:0}},[t._v("否")])],1)],1)],1),a("FormItem",{attrs:{label:"备注"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"300",size:"small"},model:{value:t.formValidate.userQrcode,callback:function(e){t.$set(t.formValidate,"userQrcode",e)},expression:"formValidate.userQrcode"}})],1),"1"===t.userSatus?a("FormItem",{attrs:{label:"离职信息"}},[a("div",{domProps:{innerHTML:t._s(t.leaveTime)}})]):t._e(),a("FormItem",{attrs:{label:"岗位类型"}},[a("Select",{staticStyle:{width:"auto"},attrs:{transfer:"",size:"small"},model:{value:t.formValidate.isAffairs,callback:function(e){t.$set(t.formValidate,"isAffairs",e)},expression:"formValidate.isAffairs"}},[a("Option",{attrs:{value:1}},[t._v("教学老师")]),a("Option",{attrs:{value:2}},[t._v("教务老师")])],1)],1)],1),a("TabPane",{attrs:{label:"登录用户"}},[a("FormItem",{attrs:{label:"用户名"}},[a("Input",{staticStyle:{width:"auto"},attrs:{disabled:"edit"==t.mode,maxlength:"12",size:"small"},model:{value:t.formValidate.adminAccount,callback:function(e){t.$set(t.formValidate,"adminAccount",e)},expression:"formValidate.adminAccount"}})],1),a("FormItem",{attrs:{label:"密码"}},[a("Input",{staticStyle:{width:"auto"},attrs:{maxlength:"24",size:"small"},model:{value:t.formValidate.adminPwd,callback:function(e){t.$set(t.formValidate,"adminPwd",e)},expression:"formValidate.adminPwd"}})],1),a("FormItem",{attrs:{label:"状态"}},[a("Select",{staticStyle:{width:"auto"},attrs:{size:"small"},model:{value:t.formValidate.adminStatus,callback:function(e){t.$set(t.formValidate,"adminStatus",e)},expression:"formValidate.adminStatus"}},[a("Option",{attrs:{value:1}},[t._v("启用")]),a("Option",{attrs:{value:2}},[t._v("停用")])],1)],1),a("FormItem",{attrs:{label:"所属权限组"}},[a("RadioGroup",{model:{value:t.formValidate.groupId,callback:function(e){t.$set(t.formValidate,"groupId",e)},expression:"formValidate.groupId"}},t._l(t.groupList,(function(e,i){return a("Radio",{key:i,attrs:{label:e.groupId}},[t._v(t._s(e.groupName))])})),1)],1)],1)],1)],1),a("div"),a("div",{staticClass:"ivu-mt ivu-text-right"},[a("Button",{on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("取消")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)],1),a("chooseDepartmentAndJob",{ref:"DepartmentAndJob",on:{onSubmit:t.onSubmit}}),a("chooseLeader",{ref:"leader",on:{onSubmit:t.onSubmitLeader}})],1)},o=[],n=(a("8e6e"),a("456d"),a("ac6a"),a("7f7f"),a("c5f6"),a("bd86")),s=(a("3b37"),a("2f62")),r=a("580a"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,title:"选择部门和职位",width:600},on:{"on-cancel":function(e){return t.handleReset()}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.loading?t._e():a("Tree",{attrs:{data:t.sectionList,render:t.renderContent}}),t.loading?a("div",[a("Spin",{attrs:{size:"large"}})],1):t._e(),a("template",{slot:"footer"},[a("Form",{attrs:{inline:""}},[a("Form",{ref:"formCustom",attrs:{"label-width":80}},[a("FormItem",{attrs:{label:"已选择"}},[a("Input",{attrs:{readonly:""},model:{value:t.section.title,callback:function(e){t.$set(t.section,"title",e)},expression:"section.title"}})],1),a("FormItem",{attrs:{label:"职位"}},[a("Select",{model:{value:t.positionId,callback:function(e){t.positionId=e},expression:"positionId"}},t._l(t.empPosition,(function(e){return a("Option",{key:e.basicsId,attrs:{value:e.basicsId}},[t._v("\n                "+t._s(e.name))])})),1)],1)],1),a("Form",{attrs:{inline:""}},[a("FormItem",{attrs:{label:""}},[a("Icon",{attrs:{type:"ios-folder-outline"}}),t._v("校区\n              ")],1),a("FormItem",{attrs:{label:""}},[a("Icon",{attrs:{type:"ios-paper-outline"}}),t._v("部门\n              ")],1)],1)],1),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit()}}},[t._v("确定")])],1)],2)},c=[],d=a("9411");function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(a,!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={components:{},props:{},data:function(){return{loading:!0,showModal:!1,positionId:"",section:{},sectionList:[]}},computed:u({},Object(s["e"])("admin/global",["empPosition"])),watch:{},methods:{DrawerToShow:function(t){var e=this;this.showModal=!0,Object(d["v"])({campusId:t}).then((function(t){e.sectionList=t.data.list,e.loading=!1}))},handleReset:function(){this.showModal=!1},handleSubmit:function(){var t=this,e={};this.empPosition.map((function(a){a.basicsId===t.positionId&&(e=a)})),0!==Object.keys(this.section).length?0!==Object.keys(e).length?(this.showModal=!1,this.$emit("onSubmit",{section:this.section,position:e})):this.$Message.info("请选择职位"):this.$Message.info("请选择部门")},treeClick:function(t){0===t.isCampus?this.section=t:this.section={}},renderContent:function(t,e){var a,i=this,o=(e.root,e.node,e.data);return a=1===o.isCampus?t("span",{on:{click:function(){i.treeClick(o),o.expand?i.$set(o,"expand",!1):i.$set(o,"expand",!0)}}},[t("Icon",{props:{type:"ios-folder-outline"},style:{marginRight:"8px",cursor:"pointer"}}),t("span",{style:{cursor:"pointer"}},o.title)]):0===o.isCampus?t("span",{on:{click:function(){i.treeClick(o),o.expand?i.$set(o,"expand",!1):i.$set(o,"expand",!0)}}},[t("Icon",{props:{type:"ios-paper-outline"},style:{marginRight:"8px",cursor:"pointer"}}),t("span",{style:{cursor:"pointer"}},o.title)]):t("span",{on:{click:function(){i.treeClick(o)}}},[t("span",{style:{cursor:"pointer"}},o.title)]),a}},mounted:function(){},beforeDestroy:function(){},created:function(){}},p=f,h=a("2877"),b=Object(h["a"])(p,l,c,!1,null,null,null),g=b.exports,v=g,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,title:"选择职工",width:600},on:{"on-cancel":function(e){return t.handleReset()}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.loading?t._e():a("Tree",{attrs:{data:t.sectionList,render:t.renderContent}}),t.loading?a("div",[a("Spin",{attrs:{size:"large"}})],1):t._e(),a("template",{slot:"footer"},[a("Form",{attrs:{inline:""}},[a("Form",{ref:"formCustom",attrs:{"label-width":80}},[a("FormItem",{attrs:{label:"已选择"}},[a("Input",{attrs:{readonly:""},model:{value:t.section.title,callback:function(e){t.$set(t.section,"title",e)},expression:"section.title"}})],1)],1)],1),a("Form",{attrs:{inline:""}},[a("FormItem",{attrs:{label:""}},[a("Icon",{attrs:{type:"ios-folder-outline"}}),t._v("校区\n            ")],1),a("FormItem",{attrs:{label:""}},[a("Icon",{attrs:{type:"ios-paper-outline"}}),t._v("部门\n            ")],1)],1),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit()}}},[t._v("确定")])],1)],2)},y=[],D={components:{},props:{},data:function(){return{loading:!0,sectionList:[],showModal:!1,positionId:"",section:{},empPosition:[]}},computed:{},watch:{},methods:{DrawerToShow:function(){var t=this;this.showModal=!0,this.loading=!0,listType({type:"campus",status:0}).then((function(e){t.sectionList=e.data,t.loading=!1}))},handleReset:function(){this.showModal=!1},handleSubmit:function(){this.section.userId?(this.showModal=!1,this.$emit("onSubmit",{section:this.section})):this.$Message.error("请选择学员")},treeClick:function(t){console.log(t),void 0===t.isCampus?this.section=t:this.section={}},renderContent:function(t,e){var a,i=this,o=(e.root,e.node,e.data);return a=1===o.isCampus?t("span",{on:{click:function(){o.expand?i.$set(o,"expand",!1):i.$set(o,"expand",!0)}}},[t("Icon",{props:{type:"ios-folder-outline"},style:{marginRight:"8px",cursor:"pointer"}}),t("span",{style:{cursor:"pointer"}},o.title)]):0===o.isCampus?t("span",{on:{click:function(){o.expand?i.$set(o,"expand",!1):i.$set(o,"expand",!0)}}},[t("Icon",{props:{type:"ios-paper-outline"},style:{marginRight:"8px",cursor:"pointer"}}),t("span",{style:{cursor:"pointer"}},o.title)]):this.section.title===o.title?t("span",{on:{click:function(){i.treeClick(o)}}},[t("span",{style:{cursor:"pointer",color:"#2db7f5"}},o.title)]):t("span",{on:{click:function(){i.treeClick(o)}}},[t("span",{style:{cursor:"pointer"}},o.title)]),a}},mounted:function(){console.log(this.empPosition)},beforeDestroy:function(){},created:function(){}},S=D,C=Object(h["a"])(S,I,y,!1,null,null,null),w=C.exports,x=w;function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function k(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(a,!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var T={components:{chooseDepartmentAndJob:v,chooseLeader:x},props:{},data:function(){return{erTitle:"",groupList:[],mode:"add",modal:!1,userId:"",leaveTime:"",userSatus:"0",formValidate:{userRealName:"",userNickName:"",userSex:"",idCard:"",userMobile:"",sectionAndPosition:[],bankCard:"",userType:"",userGroupId:"",userDepartId:"",classIds:"",subjectIds:"",leaderId:"",leaderName:"",userEmail:"",userTel:"",entryTime:"",workerType:1,bindingTime:"",userQrcode:"",adminId:"",adminAccount:"",adminPwd:"",adminStatus:"",groupId:"",sectionIds:"",isAffairs:1},ruleValidate:{userRealName:[{required:!0,message:"请输入姓名",trigger:"blur"}]}}},computed:k({},Object(s["e"])("admin/global",["empGrade","classTerm","classType","shiftGrade","subject","shiftCat","yearList","chargeinTypeList","courseTypeList"])),methods:{DrawerToShow:function(t,e,a){var i=this;console.log(t,"f"),this.mode=t,this.erTitle="add"===t?"新增":"编辑",e?this.staffInfo(e.userId):this.formValidate={userRealName:"",userNickName:"",userSex:"",idCard:"",userMobile:"",sectionAndPosition:[],bankCard:"",userType:"",userGroupId:"",userDepartId:"",classIds:"",subjectIds:"",leaderId:"",userEmail:"",userTel:"",entryTime:"",workerType:1,bindingTime:"",userQrcode:"",adminId:"",adminAccount:"",adminPwd:"",adminStatus:"",groupId:"",campusId:a,leaderName:"",isAffairs:1},this.modal=!0,Object(r["l"])({}).then((function(t){i.groupList=t.data}))},setUserName:function(){this.formValidate.adminAccount=this.formValidate.userRealName},staffInfo:function(t){var e=this;this.userId=t,Object(r["w"])({userId:t}).then((function(t){e.formValidate={leaderName:t.data.leaderName,userRealName:t.data.userRealName,userNickName:t.data.userNickName,userSex:t.data.userSex,idCard:t.data.idCard,userMobile:t.data.userMobile,sectionAndPosition:t.data.sectionAndPosition,bankCard:t.data.bankCard,userType:t.data.userType,userGroupId:t.data.userGroupId,userDepartId:t.data.userDepartId,classIds:t.data.classIds,subjectIds:t.data.subjectIds,leaderId:t.data.leaderId,userEmail:t.data.userEmail,userTel:t.data.userTel,entryTime:t.data.entryTime,workerType:t.data.workerType,bindingTime:t.data.bindingTime,userQrcode:t.data.userQrcode,adminId:t.data.adminId,adminAccount:t.data.adminAccount,adminPwd:t.data.adminPwd,adminStatus:t.data.adminStatus,groupId:t.data.groupId,sectionIds:t.data.sectionIds,campusId:t.data.campusId,isAffairs:t.data.isAffairs},e.formValidate.classIds=e.formValidate.classIds.map(Number),e.formValidate.subjectIds=e.formValidate.subjectIds.map(Number),e.userSatus=t.data.userSatus,e.leaveTime=t.data.leaveTime+"<br/>"+t.data.leaveName+"<br/>"+t.data.leaveText}))},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){console.log(JSON.stringify(e.formValidate)),t&&("add"===e.mode?Object(r["x"])(e.formValidate).then((function(t){e.handleCancel(),e.$Message.success("新增成功"),e.$emit("onSubmit")})):Object(r["D"])(Object.assign({userId:e.userId},e.formValidate)).then((function(t){e.handleCancel(),e.$Message.success("修改成功"),e.$emit("onSubmit")})))}))},handleReset:function(t){this.handleCancel(),this.$refs[t].resetFields()},handleCancel:function(){this.modal=!1},handleClear:function(t){this.formValidate.sectionAndPosition.splice(t,1)},choose:function(){this.$refs.DepartmentAndJob.DrawerToShow(this.formValidate.campusId)},onSubmit:function(t){console.log(t,"ff");var e=-1;this.formValidate.sectionAndPosition.forEach((function(a,i){t.section.sectionId===a.sectionId&&(e=i)})),-1!==e?this.formValidate.sectionAndPosition.splice(e,1,{sectionId:t.section.sectionId,sectionName:t.section.title,positionId:t.position.basicsId,positionName:t.position.name}):this.formValidate.sectionAndPosition.push({sectionId:t.section.sectionId,sectionName:t.section.title,positionId:t.position.basicsId,positionName:t.position.name}),console.log(this.formValidate.sectionAndPosition)},chooseLeader:function(){this.$refs.leader.DrawerToShow()},handleClearLeader:function(){this.formValidate.leaderId="",this.formValidate.leaderName="",this.formValidate.campusId=""},onSubmitLeader:function(t){this.formValidate.leaderId=t.section.userId,this.formValidate.leaderName=t.section.title}},mounted:function(){},watch:{}},F=T,O=Object(h["a"])(F,i,o,!1,null,null,null),$=O.exports;e["a"]=$},f061:function(t,e,a){},f66a:function(t,e,a){t.exports=a.p+"img/logo-small.777d6504.png"},f847:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{padding:"10px 0",display:"flex","justify-content":"space-between"}},[a("Card",{staticStyle:{width:"49%"}},[a("Tree",{attrs:{data:t.treeList,render:t.renderContent,"empty-text":""}}),t.treeLoading?t._e():a("div",{staticClass:"demo-spin-container"},[a("Spin",{attrs:{size:"large",fix:""}})],1)],1),a("Card",{staticStyle:{width:"49%"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"父栏目"}}),a("FormItem",{attrs:{label:"重要"}},[t._v("\n          非技术人员，请不要操作本功能\n        ")]),a("FormItem",{attrs:{label:"名称",prop:"menuName"}},[a("Input",{attrs:{placeholder:"请输入菜单名称"},model:{value:t.formValidate.menuName,callback:function(e){t.$set(t.formValidate,"menuName",e)},expression:"formValidate.menuName"}})],1),a("FormItem",{attrs:{label:"路径",prop:"menuUrl"}},[a("Input",{attrs:{placeholder:"请输入菜单路径"},model:{value:t.formValidate.menuUrl,callback:function(e){t.$set(t.formValidate,"menuUrl",e)},expression:"formValidate.menuUrl"}})],1),a("FormItem",{attrs:{label:"接口地址",prop:"interface"}},[a("Input",{attrs:{placeholder:"请输入菜单接口地址"},model:{value:t.formValidate.interface,callback:function(e){t.$set(t.formValidate,"interface",e)},expression:"formValidate.interface"}})],1),a("FormItem",{attrs:{label:"图标"}},[a("uploadImgCom",{attrs:{picArr:{pic:t.formValidate.menuIcon,picName:t.formValidate.menuIcon}},on:{uploadSuccess:t.handleSuccess}})],1),a("FormItem",{attrs:{label:"类别"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[[a("Radio",{attrs:{label:"修改节点"}}),a("Radio",{attrs:{label:"添加子节点"}}),a("Radio",{attrs:{label:"添加同级节点"}}),a("Radio",{attrs:{label:"删除节点"}})]],2)],1),a("Divider",[t._v("三级按钮参数")]),a("FormItem",{attrs:{label:"按钮名称"}},[a("Input",{attrs:{placeholder:"请输入按钮名称"},model:{value:t.formValidate.btnTitle,callback:function(e){t.$set(t.formValidate,"btnTitle",e)},expression:"formValidate.btnTitle"}})],1),a("FormItem",{attrs:{label:"按钮样式"}},[a("Input",{attrs:{placeholder:"请输入按钮样式"},model:{value:t.formValidate.btnClass,callback:function(e){t.$set(t.formValidate,"btnClass",e)},expression:"formValidate.btnClass"}})],1),a("FormItem",{attrs:{label:"按钮类型"}},[a("Input",{attrs:{placeholder:"请输入按钮类型"},model:{value:t.formValidate.btnType,callback:function(e){t.$set(t.formValidate,"btnType",e)},expression:"formValidate.btnType"}})],1),a("FormItem",{attrs:{label:"按钮事件"}},[a("Input",{attrs:{placeholder:"请输入按钮事件"},model:{value:t.formValidate.btnHandle,callback:function(e){t.$set(t.formValidate,"btnHandle",e)},expression:"formValidate.btnHandle"}})],1),a("FormItem",{attrs:{label:"事件传参"}},[a("Input",{attrs:{placeholder:"请输入事件传参"},model:{value:t.formValidate.btnHandleParams,callback:function(e){t.$set(t.formValidate,"btnHandleParams",e)},expression:"formValidate.btnHandleParams"}})],1),a("FormItem",{attrs:{label:"排序"}},[a("Input",{attrs:{placeholder:"请输入菜单排序",type:"number"},model:{value:t.formValidate.sort,callback:function(e){t.$set(t.formValidate,"sort",e)},expression:"formValidate.sort"}})],1),a("FormItem",{attrs:{label:"是否表格"}},[a("RadioGroup",{model:{value:t.formValidate.btnIsTable,callback:function(e){t.$set(t.formValidate,"btnIsTable",e)},expression:"formValidate.btnIsTable"}},[a("Radio",{attrs:{label:1}},[t._v("是")]),a("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("FormItem",{attrs:{label:"是否隐藏"}},[a("RadioGroup",{model:{value:t.formValidate.isHidden,callback:function(e){t.$set(t.formValidate,"isHidden",e)},expression:"formValidate.isHidden"}},[a("Radio",{attrs:{label:1}},[t._v("是")]),a("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit()}}},[t._v("提交")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v("重置")])],1)],1)],1)],1)])},o=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),s=(a("55dd"),a("3b2b"),a("580a")),r=a("40cb");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(a,!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={components:{uploadImgCom:r["a"]},data:function(){var t=this,e=function(e,a,i){var o=new RegExp(/^[0-9]+$/),n=o.test(t.formValidate.menuSort);n?i():i(new Error("菜单排序必须为正整数"))};return{treeLoading:!1,type:"添加根节点",parentId:0,menuId:0,formValidate:{menuId:"",parentId:0,menuName:"",level:"",menuUrl:"",menuIcon:"",interface:"",menuSort:"",btnIsTable:"",btnTitle:"",btnClass:"",btnType:"",btnHandle:"",btnHandleParams:"",isHidden:1,sort:1},ruleValidate:{menuName:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],menuUrl:[{required:!0,message:"请输入菜单路径",trigger:"blur"}],menuSort:[{required:!0,validator:e,trigger:"blur"}]},treeList:[]}},methods:{handleSuccess:function(t){this.formValidate.menuIcon=t.pic},handleSelect:function(t){if(this.handleReset(),0===t.length)this.type="添加根节点",this.formValidate={parentId:0,menuName:"",level:"",menuUrl:"",menuIcon:"",interface:"",menuSort:"",btnIsTable:"",btnTitle:"",btnClass:"",btnType:"",btnHandle:"",btnHandleParams:"",isHidden:1,sort:1};else{this.type="修改节点";var e=t.parentId,a=t.menuId,i=t.menuName,o=t.level,n=t.menuUrl,s=t.menuIcon,r=t.menuSort,l=t.btnTitle,c=t.btnClass,d=t.btnType,m=t.btnHandle,u=t.btnHandleParams,f=t.btnIsTable,p=t.isHidden,h=t.sort,b=t.interface;this.formValidate={parentId:e,menuName:i,menuId:a,level:o,menuUrl:n,interface:b,menuIcon:s,menuSort:r,btnTitle:l,btnClass:c,btnType:d,btnHandle:m,btnHandleParams:u,btnIsTable:f,isHidden:p,sort:h},this.parentId=e,this.menuId=a}},handleSubmit:function(){var t=this;this.formValidate.type=1,"删除节点"!==this.type?this.$refs["formValidate"].validate((function(e){e&&("修改节点"===t.type?(t.formValidate.menuId=t.menuId,Object(s["k"])(c({},t.formValidate)).then((function(e){t.$Message.success("修改成功"),t.getList()}))):("添加根节点"!==t.type&&(delete t.formValidate.menuId,"添加子节点"===t.type?t.formValidate.parentId=t.menuId:"添加同级节点"===t.type&&(t.formValidate.parentId=t.parentId)),Object(s["b"])(c({},t.formValidate)).then((function(e){t.$Message.success("添加成功"),t.getList()}))))})):Object(s["h"])({menuId:this.formValidate.menuId}).then((function(e){t.$Message.success("删除成功"),t.getList()}))},handleReset:function(){this.$refs["formValidate"].resetFields()},setIcon:function(t){this.formValidate.menuIcon=t},getList:function(){var t=this;this.formValidate={parentId:0,menuName:"",level:"",menuUrl:"",menuIcon:"",interface:"",menuSort:"",btnIsTable:"",btnTitle:"",btnClass:"",btnType:"",btnHandle:"",btnHandleParams:"",isHidden:1,sort:1},Object(s["m"])({type:1}).then((function(e){var a=e.data.list,i=function e(a){return a.map((function(a){return t.menuId===a.menuId&&(a.selected=!0),a.children&&0!==a.children.length&&e(a.children),a}))};i(a),t.treeList=a,t.treeLoading=!0}))},renderContent:function(t,e){var a=this,i=(e.root,e.node,e.data);return t("span",{style:{display:"inline-block",width:"100%"},on:{click:function(){a.handleSelect(i)}}},[t("span",[t("span",i.title)]),t("span",{style:{display:"inline-block",float:"right",marginRight:"32px"}})])}},created:function(){},mounted:function(){this.getList()}},m=d,u=(a("7e1d"),a("2877")),f=Object(u["a"])(m,i,o,!1,null,"63c2864e",null);e["default"]=f.exports},fc9e:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{padding:"10px 0",display:"flex","justify-content":"space-between"}},[a("Card",{staticStyle:{width:"49%"}},[a("Tree",{attrs:{data:t.treeList,render:t.renderContent,"empty-text":""}}),t.treeLoading?t._e():a("div",{staticClass:"demo-spin-container"},[a("Spin",{attrs:{size:"large",fix:""}})],1)],1),a("Card",{staticStyle:{width:"49%"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"父栏目"}}),a("FormItem",{attrs:{label:"重要"}},[t._v("\n          非技术人员，请不要操作本功能\n        ")]),a("FormItem",{attrs:{label:"名称",prop:"menuName"}},[a("Input",{attrs:{placeholder:"请输入菜单名称"},model:{value:t.formValidate.menuName,callback:function(e){t.$set(t.formValidate,"menuName",e)},expression:"formValidate.menuName"}})],1),a("FormItem",{attrs:{label:"路径",prop:"menuUrl"}},[a("Input",{attrs:{placeholder:"请输入菜单路径"},model:{value:t.formValidate.menuUrl,callback:function(e){t.$set(t.formValidate,"menuUrl",e)},expression:"formValidate.menuUrl"}})],1),a("FormItem",{attrs:{label:"接口地址",prop:"interface"}},[a("Input",{attrs:{placeholder:"请输入菜单接口地址"},model:{value:t.formValidate.interface,callback:function(e){t.$set(t.formValidate,"interface",e)},expression:"formValidate.interface"}})],1),a("FormItem",{attrs:{label:"图标"}},[a("uploadImgCom",{attrs:{picArr:{pic:t.formValidate.menuIcon,picName:t.formValidate.menuIcon}},on:{uploadSuccess:t.handleSuccess}})],1),a("FormItem",{attrs:{label:"类别"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[[a("Radio",{attrs:{label:"修改节点"}}),a("Radio",{attrs:{label:"添加子节点"}}),a("Radio",{attrs:{label:"添加同级节点"}}),a("Radio",{attrs:{label:"删除节点"}})]],2)],1),a("Divider",[t._v("三级按钮参数")]),a("FormItem",{attrs:{label:"按钮名称"}},[a("Input",{attrs:{placeholder:"请输入按钮名称"},model:{value:t.formValidate.btnTitle,callback:function(e){t.$set(t.formValidate,"btnTitle",e)},expression:"formValidate.btnTitle"}})],1),a("FormItem",{attrs:{label:"按钮样式"}},[a("Input",{attrs:{placeholder:"请输入按钮样式"},model:{value:t.formValidate.btnClass,callback:function(e){t.$set(t.formValidate,"btnClass",e)},expression:"formValidate.btnClass"}})],1),a("FormItem",{attrs:{label:"按钮类型"}},[a("Input",{attrs:{placeholder:"请输入按钮类型"},model:{value:t.formValidate.btnType,callback:function(e){t.$set(t.formValidate,"btnType",e)},expression:"formValidate.btnType"}})],1),a("FormItem",{attrs:{label:"按钮事件"}},[a("Input",{attrs:{placeholder:"请输入按钮事件"},model:{value:t.formValidate.btnHandle,callback:function(e){t.$set(t.formValidate,"btnHandle",e)},expression:"formValidate.btnHandle"}})],1),a("FormItem",{attrs:{label:"事件传参"}},[a("Input",{attrs:{placeholder:"请输入事件传参"},model:{value:t.formValidate.btnHandleParams,callback:function(e){t.$set(t.formValidate,"btnHandleParams",e)},expression:"formValidate.btnHandleParams"}})],1),a("FormItem",{attrs:{label:"排序"}},[a("Input",{attrs:{placeholder:"请输入菜单排序",type:"number"},model:{value:t.formValidate.sort,callback:function(e){t.$set(t.formValidate,"sort",e)},expression:"formValidate.sort"}})],1),a("FormItem",{attrs:{label:"是否表格"}},[a("RadioGroup",{model:{value:t.formValidate.btnIsTable,callback:function(e){t.$set(t.formValidate,"btnIsTable",e)},expression:"formValidate.btnIsTable"}},[a("Radio",{attrs:{label:1}},[t._v("是")]),a("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("FormItem",{attrs:{label:"是否隐藏"}},[a("RadioGroup",{model:{value:t.formValidate.isHidden,callback:function(e){t.$set(t.formValidate,"isHidden",e)},expression:"formValidate.isHidden"}},[a("Radio",{attrs:{label:1}},[t._v("是")]),a("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit()}}},[t._v("提交")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset()}}},[t._v("重置")])],1)],1)],1)],1)])},o=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),s=(a("55dd"),a("3b2b"),a("580a")),r=a("40cb");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(a,!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={components:{uploadImgCom:r["a"]},data:function(){var t=this,e=function(e,a,i){var o=new RegExp(/^[0-9]+$/),n=o.test(t.formValidate.menuSort);n?i():i(new Error("菜单排序必须为正整数"))};return{treeLoading:!1,type:"添加根节点",parentId:0,menuId:0,formValidate:{menuId:"",parentId:0,menuName:"",level:"",menuUrl:"",menuIcon:"",interface:"",menuSort:"",btnIsTable:"",btnTitle:"",btnClass:"",btnType:"",btnHandle:"",btnHandleParams:"",isHidden:1,sort:1},ruleValidate:{menuName:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],menuUrl:[{required:!0,message:"请输入菜单路径",trigger:"blur"}],menuSort:[{required:!0,validator:e,trigger:"blur"}]},treeList:[]}},methods:{handleSuccess:function(t){this.formValidate.menuIcon=t.pic},handleSelect:function(t){if(this.handleReset(),0===t.length)this.type="添加根节点",this.formValidate={parentId:0,menuName:"",level:"",menuUrl:"",menuIcon:"",interface:"",menuSort:"",btnIsTable:"",btnTitle:"",btnClass:"",btnType:"",btnHandle:"",btnHandleParams:"",isHidden:1,sort:1};else{this.type="修改节点";var e=t.parentId,a=t.menuId,i=t.menuName,o=t.level,n=t.menuUrl,s=t.menuIcon,r=t.menuSort,l=t.btnTitle,c=t.btnClass,d=t.btnType,m=t.btnHandle,u=t.btnHandleParams,f=t.btnIsTable,p=t.isHidden,h=t.sort,b=t.interface;this.formValidate={parentId:e,menuName:i,menuId:a,level:o,menuUrl:n,interface:b,menuIcon:s,menuSort:r,btnTitle:l,btnClass:c,btnType:d,btnHandle:m,btnHandleParams:u,btnIsTable:f,isHidden:p,sort:h},this.parentId=e,this.menuId=a}},handleSubmit:function(){var t=this;this.formValidate.type=0,"删除节点"!==this.type?this.$refs["formValidate"].validate((function(e){e&&("修改节点"===t.type?(t.formValidate.menuId=t.menuId,Object(s["k"])(c({},t.formValidate)).then((function(e){t.$Message.success("修改成功"),t.getList()}))):("添加根节点"!==t.type&&(delete t.formValidate.menuId,"添加子节点"===t.type?t.formValidate.parentId=t.menuId:"添加同级节点"===t.type&&(t.formValidate.parentId=t.parentId)),Object(s["b"])(c({},t.formValidate)).then((function(e){t.$Message.success("添加成功"),t.getList()}))))})):Object(s["h"])({menuId:this.formValidate.menuId}).then((function(e){t.$Message.success("删除成功"),t.getList()}))},handleReset:function(){this.$refs["formValidate"].resetFields()},setIcon:function(t){this.formValidate.menuIcon=t},getList:function(){var t=this;this.formValidate={parentId:0,menuName:"",level:"",menuUrl:"",menuIcon:"",interface:"",menuSort:"",btnIsTable:"",btnTitle:"",btnClass:"",btnType:"",btnHandle:"",btnHandleParams:"",isHidden:1,sort:1},Object(s["m"])({type:0}).then((function(e){var a=e.data.list,i=function e(a){return a.map((function(a){return t.menuId===a.menuId&&(a.selected=!0),a.children&&0!==a.children.length&&e(a.children),a}))};i(a),t.treeList=a,t.treeLoading=!0}))},renderContent:function(t,e){var a=this,i=(e.root,e.node,e.data);return t("span",{style:{display:"inline-block",width:"100%"},on:{click:function(){a.handleSelect(i)}}},[t("span",[t("span",i.title)]),t("span",{style:{display:"inline-block",float:"right",marginRight:"32px"}})])}},created:function(){},mounted:function(){this.getList()}},m=d,u=(a("cdac"),a("2877")),f=Object(u["a"])(m,i,o,!1,null,"2da8eab9",null);e["default"]=f.exports},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},fea6:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("div",[t._l(t.children,(function(e,i){return[e.btnIsTable?t._e():a("Button",{key:i,class:e.btnClass,attrs:{type:e.btnType?e.btnType:"default"},on:{click:function(a){return t.handleEvent(e.btnHandle,e.btnHandleParams)}}},[t._v(t._s(e.btnTitle))])]})),a("div",{staticClass:"ivu-mt"},[a("Table",{ref:"table",attrs:{loading:t.loading,columns:t.tableTitle,data:t.tableData,type:"seletion",stripe:""},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.row;return[t._l(t.children,(function(e,o){return[e.btnIsTable?a("Button",{key:o,class:e.btnClass,attrs:{type:e.btnType?e.btnType:"default"},on:{click:function(a){return t.handleEventTwo(e.btnHandle,e.btnHandleParams,i)}}},[t._v(t._s(e.btnTitle))]):t._e()]}))]}}])})],1)],2)]),a("editPage",{ref:"Drawer",attrs:{erTitle:t.title},on:{callback:function(e){return t.getList()}}}),a("permissionGroup",{ref:"permissionGroup",attrs:{mode:t.mode},on:{onSubmit:t.onSubmit}})],1)},o=[],n=(a("ac6a"),a("7f7f"),a("a6d3"),a("684d")),s=a("7e81"),r=a("ea45"),l=a("59a3"),c=a("10b4"),d=a("580a"),m={components:{permissionGroup:n["a"],setPermission:s["a"],addUser:r["a"],chooseMember:l["a"],editPage:c["a"]},data:function(){var t=this;return{children:[{btnTitle:"新增",btnClass:"",btnType:"primary",btnHandle:"handleAdd",btnHandleParams:"add",btnIsTable:!1},{btnTitle:"后台权限",btnClass:"marginRight-20",btnType:"primary",btnHandle:"showEditDrawer",btnHandleParams:"后台权限",btnIsTable:!0},{btnTitle:"小程序权限",btnClass:"marginRight-20",btnType:"primary",btnHandle:"showEditDrawer",btnHandleParams:"小程序权限",btnIsTable:!0},{btnTitle:"删除",btnClass:"",btnType:"error",btnHandle:"remove",btnHandleParams:"row.index",btnIsTable:!0}],showModal:!1,showModal2:!1,showModal3:!1,showChooseClass:!1,treeList:[],groupId:"",loading:!1,title:"",formValidate:{groupName:""},ruleValidate:{groupName:[{required:!0,message:"权限组名称不能为空",trigger:"blur"}]},tableTitle:[{title:"权限组名称",key:"groupName",minWidth:120,render:function(e,a){return e("div",[e("a",{on:{click:function(){t.handleAdd("edit",a.row)}}},a.row.groupName)])}},{title:"角色",key:"roleTypeName",minWidth:120},{title:"说明",key:"describe",minWidth:120},{title:"操作",slot:"action",align:"center",minWidth:350}],page:1,name:"",pageSize:20,tableData:[],pageination:{pageSize:10,count:0,pageSum:1,page:1},mode:""}},computed:{},watch:{},methods:{handleAdd:function(t,e){this.mode=t,this.$refs.permissionGroup.DrawerToShow(t,e,0)},onSubmit:function(){this.getList()},delete:function(){this.$Modal.confirm({title:"提示",content:"<p>确定删除吗？</p>",onOk:function(){},onCancel:function(){}})},handleChoose:function(){this.showChooseClass=!1},showEditDrawer:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.title=t,"后台权限"===t?this.$refs.Drawer.DrawerToShow(0):this.$refs.Drawer.DrawerToShow(1),this.$refs.Drawer.loadData(e)},getList:function(){var t=this;this.loading=!0,Object(d["l"])({name:this.name,page:this.page,pageSize:this.pageSize}).then((function(e){t.loading=!1,t.tableData=e.data.list}))},remove:function(t,e){var a=this;this.$Modal.confirm({title:"提示",content:"<p>确认删除</p>",onOk:function(){a.onGroupDel(e)},onCancel:function(){}})},onGroupDel:function(t){var e=this;Object(d["g"])({groupId:t.groupId}).then((function(t){e.$Message.success("删除成功"),e.getList()}))},handleEvent:function(t,e){this.$emit(t,e)},handleEventTwo:function(t,e,a){this.$emit(t,e,a)}},mounted:function(){this.getList()},beforeDestroy:function(){},created:function(){var t=this;this.children.forEach((function(e){t.$on(e.btnHandle,t[e.btnHandle])}))}},u=m,f=a("2877"),p=Object(f["a"])(u,i,o,!1,null,null,null);e["default"]=p.exports}}]);