(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["erpManagement1"],{"386d":function(t,e,a){"use strict";var i=a("cb7c"),n=a("83a1"),s=a("5f1b");a("214f")("search",1,(function(t,e,a,o){return[function(a){var i=t(this),n=void 0==a?void 0:a[e];return void 0!==n?n.call(a,i):new RegExp(a)[e](String(i))},function(t){var e=o(a,t,this);if(e.done)return e.value;var r=i(t),c=String(this),l=r.lastIndex;n(l,0)||(r.lastIndex=0);var d=s(r,c);return n(r.lastIndex,l)||(r.lastIndex=l),null===d?-1:d.index}]}))},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},a14d:function(t,e,a){"use strict";var i=a("dd2b"),n=a.n(i);n.a},c4c8:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return c})),a.d(e,"d",(function(){return l})),a.d(e,"a",(function(){return d}));var i=a("c276"),n=a("b6bd"),s=i["a"].cookies.get("token"),o=a("4328");function r(t){return Object(n["a"])({url:"/goods/manage/list?token="+s,method:"post",data:o.stringify(t)})}function c(t){return Object(n["a"])({url:"/goods/manage/info?token="+s,method:"post",data:t})}function l(t){return Object(n["a"])({url:"/goods/manage/save?token="+s,method:"post",data:t})}function d(t){return Object(n["a"])({url:"/goods/manage/del?token="+s,method:"post",data:t})}},d9e1:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,title:"选择"+(2==t.type?"物料":2==t.isFinished?"半成品":"产品"),width:1e3},on:{"on-cancel":function(e){return t.handleReset("formValidate")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"choose-class",class:t.isMobile?"":"wrapper"},[a("Card",{class:t.isMobile?"":"right-content"},[a("Form",{ref:"formCustom",attrs:{"label-width":100}},[a("Row",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{xs:24,md:12,lg:12}},[a("Input",{staticStyle:{width:"95%"},attrs:{type:"text",placeholder:"请输入"+(2==t.type?"物料":2==t.isFinished?"半成品":"产品")+"名称",clearabl:""},model:{value:t.searchValidate.name,callback:function(e){t.$set(t.searchValidate,"name",e)},expression:"searchValidate.name"}})],1),a("Col",{attrs:{xs:24,md:12,lg:12}},[a("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),a("Button",{staticClass:"ivu-ml-8",on:{click:t.resetSearch}},[t._v("重置")]),t.showMore||1!=t.type||t.isFinished?t._e():a("a",{staticClass:"ivu-ml-8",attrs:{type:"text"},on:{click:function(e){t.showMore=!t.showMore}}},[t._v("\n              展开\n              "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),t.showMore?a("a",{staticClass:"ivu-ml-8",attrs:{type:"text"},on:{click:function(e){t.showMore=!t.showMore}}},[t._v("\n              收起\n              "),a("Icon",{attrs:{type:"ios-arrow-up"}})],1):t._e()],1)],1),t.showMore?a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{xs:24,md:12,lg:12}},[a("FormItem",{attrs:{label:"产品类型：","label-position":"top","label-width":90}},[a("RadioGroup",{model:{value:t.searchValidate.isFinished,callback:function(e){t.$set(t.searchValidate,"isFinished",e)},expression:"searchValidate.isFinished"}},[a("Radio",{attrs:{label:0}},[t._v("全部")]),a("Radio",{attrs:{label:2}},[t._v("半成品")]),a("Radio",{attrs:{label:1}},[t._v("成品")])],1)],1)],1)],1):t._e()],1),a("div",[a("div",[a("Table",{ref:"tableData",attrs:{columns:t.columns,data:t.data,loading:t.loading},on:{"on-selection-change":t.changeSelect}})],1),a("div",{staticClass:"ivu-mt ivu-text-center"},[a("Page",{attrs:{"page-size":t.pageInfo.pageSize,total:Number(t.pageInfo.count),current:t.pageInfo.page},on:{"on-change":t.changePage}})],1)])],1),t.isMobile?t._e():a("Card",{staticClass:"left-content"},[a("div",{staticClass:"ivu-mt",attrs:{slot:"title"},slot:"title"},[a("Alert",[a("Icon",{staticClass:"ivu-mr-8",attrs:{color:"#2d8cf0",type:"ios-alert"}}),t._v("\n          已选择 "+t._s(t.selectedArr.length)+" 项\n          "),a("a",{staticClass:"ivu-ml-8",on:{click:t.clearSelectd}},[t._v("清空")])],1)],1),a("List",{attrs:{border:""}},[a("Scroll",{staticStyle:{flex:"1"},attrs:{height:415}},t._l(t.selectedArr,(function(e,i){return a("ListItem",{key:i},[a("ListItemMeta",{attrs:{avatar:"",title:e.name,description:""}}),a("template",{slot:"action"},[a("li",{on:{click:function(e){return t.delClass(i)}}},[a("Icon",{attrs:{type:"md-close-circle",size:"19"}})],1)])],2)})),1)],1)],1)],1),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.isSubmit},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)])},n=[],s=(a("8e6e"),a("456d"),a("386d"),a("ac6a"),a("bd86")),o=a("c4c8"),r=a("2f08"),c=a("2f62"),l=a("9411");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(a,!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var h={name:"chooseMateriel",components:{iCopyright:r["a"]},props:{modal:{type:Boolean,default:!1},selected:{type:Array,default:function(){return[]}}},data:function(){return{columns:[{type:"selection",minWidth:50},{title:"名称",minWidth:100,key:"name"},{title:"单位",key:"unit",minWidth:100},{title:"库存",key:"stock",minWidth:100}],data:[],searchValidate:{name:"",isFinished:0,type:""},showModal:!1,selectedArr:[],showMore:!1,pageInfo:{pageSize:10,page:1,pageSum:0,count:0},type:"",isFinished:"",loading:!0,groupId:"",isSubmit:!1}},computed:u({},Object(c["e"])("admin/layout",["isMobile"])),watch:{},methods:{changeSelect:function(t){var e=this;this.selectedArr=[],t.forEach((function(t){e.selectedArr.push(t)}))},clearSelectd:function(){this.$refs.tableData.selectAll(!1),this.selectedArr=[]},handleReset:function(t){this.showModal=!1,this.$emit("hideModal")},handleSubmit:function(t){var e=this;if(this.groupId){if(this.isSubmit)return;this.isSubmit=!0;var a=this.selectedArr.map((function(t){return t.id}));Object(l["t"])({groupId:this.groupId,goodsId:a.join(",")}).then((function(t){console.log(222222),e.$Message.success("保存成功"),e.showModal=!1,e.isSubmit=!1})).catch((function(t){e.isSubmit=!1}))}else this.showModal=!1,this.$emit("handleChoose",this.selectedArr)},delClass:function(t){var e=this,a="";this.data.some((function(i,n){i.id===e.selectedArr[t].id&&(a=n)})),this.$refs.tableData.toggleSelect(a)},resetSearch:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.searchValidate={name:"",isFinished:this.isFinished,type:this.type},this.getData()},search:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},changePage:function(t){this.pageInfo.page=t,this.getData()},getData:function(){var t=this;this.data=[],this.loading=!0,Object(o["c"])(u({},this.pageInfo,{},this.searchValidate)).then((function(e){var a=[];t.data=e.data.list.map((function(e){return a=t.selectedArr.filter((function(t){return t.id==e.id})),e._checked=a.length>0,e})),console.log(t.data),t.pageInfo=e.data.pageInfo,t.loading=!1})).catch((function(e){t.loading=!1}))},loadData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";console.log(111111111111),2==e?(this.isFinished="",this.type=2):(this.isFinished=t||0,this.type=1),this.searchValidate.isFinished=this.isFinished,this.searchValidate.type=this.type,this.searchValidate.name="",this.showModal=!0,this.loading=!0,this.selectedArr=[],this.groupId=a,a?this.getGroupGoods():this.search()},getGroupGoods:function(){var t=this;Object(l["s"])({groupId:this.groupId}).then((function(e){console.log(222222),console.log(e.data.list),t.selectedArr=e.data.list,t.search()})).catch((function(e){t.loading=!1}))}},mounted:function(){},beforeDestroy:function(){},created:function(){}},p=h,f=(a("a14d"),a("2877")),g=Object(f["a"])(p,i,n,!1,null,"f9c16154",null);e["a"]=g.exports},dd2b:function(t,e,a){}}]);