(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["erpManagement1"],{1694:function(t,e,a){"use strict";var n=a("62db"),o=a.n(n);o.a},"62db":function(t,e,a){},"75ae":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",{staticClass:"sx",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"sx-box",class:t.isShow?" active":"",on:{click:function(e){t.isShow=!t.isShow}}},[t._v("\n        筛选 "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),a("Form",{staticClass:"form-box",class:t.isShow?"":"none",attrs:{model:t.searchKey,"label-width":80,inline:""}},[a("Row",[a("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{label:"开始日期"}},[a("DatePicker",{attrs:{value:t.searchKey.startTime,type:"date",placeholder:"开始日期"},on:{"on-change":function(e){t.searchKey.startTime=e}}})],1),a("FormItem",{staticStyle:{"margin-bottom":"0"},attrs:{label:"结束日期"}},[a("DatePicker",{attrs:{value:t.searchKey.endTime,type:"date",placeholder:"结束日期"},on:{"on-change":function(e){t.searchKey.endTime=e}}})],1)],1),a("Row",{staticStyle:{"padding-top":"15px"}},[a("FormItem",{attrs:{label:"类型","label-position":"top","label-width":80}},[a("RadioGroup",{on:{"on-change":t.dataList},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("Radio",{attrs:{label:"1"}},[t._v("收入")]),a("Radio",{attrs:{label:"2"}},[t._v("支出")]),a("Radio",{attrs:{label:"3"}},[t._v("转账")])],1)],1)],1),a("Row",[a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.search()}}},[t._v("查询")])],1)],1),a("Row",{staticStyle:{"padding-top":"20px"}},[a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.addBugget()}}},[t._v("新增")])],1),a("Table",{staticStyle:{"margin-top":"10px"},attrs:{loading:t.loading,columns:t.columns12,data:t.tableData}})],1),a("div",{staticClass:"ivu-mt ivu-text-center"},[a("Page",{attrs:{"page-size":t.pageInfo.pageSize,total:Number(t.pageInfo.count),current:t.pageInfo.page},on:{"on-change":t.changePage}})],1),a("addModal",{ref:"AddDrawer",on:{dataList:t.dataList}})],1)},o=[],r=(a("ac6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{title:"新增记账",width:"420px","mask-closable":!1},on:{"on-ok":t.modalSbumit,"on-cancel":t.cancel},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Tabs",{model:{value:t.typeName,callback:function(e){t.typeName=e},expression:"typeName"}},[a("TabPane",{attrs:{label:"收入",name:"1"}}),a("TabPane",{attrs:{label:"支出",name:"2"}}),a("TabPane",{attrs:{label:"转账",name:"3"}})],1),a("Form",{ref:"formData",attrs:{model:t.formData,"label-width":80,rules:t.checkFormData}},[a("Row",[a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"部门",prop:"departmentId"}},[a("Select",{model:{value:t.formData.departmentId,callback:function(e){t.$set(t.formData,"departmentId",e)},expression:"formData.departmentId"}},t._l(t.department,(function(e,n){return a("Option",{key:n,attrs:{value:e.sectionId}},[t._v(t._s(e.name))])})),1)],1)],1),"1"==t.typeName?a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"收入日期",prop:"date"}},[a("DatePicker",{attrs:{type:"date"},model:{value:t.formData.date,callback:function(e){t.$set(t.formData,"date",e)},expression:"formData.date"}})],1)],1):t._e(),"2"==t.typeName?a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"支出日期",prop:"date"}},[a("DatePicker",{attrs:{type:"date"},model:{value:t.formData.date,callback:function(e){t.$set(t.formData,"date",e)},expression:"formData.date"}})],1)],1):t._e(),"3"==t.typeName?a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"转账日期",prop:"date"}},[a("DatePicker",{attrs:{type:"date"},model:{value:t.formData.date,callback:function(e){t.$set(t.formData,"date",e)},expression:"formData.date"}})],1)],1):t._e(),"4"==t.typeName||"5"==t.typeName||"6"==t.typeName||"7"==t.typeName?a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"业务日期",prop:"date"}},[a("DatePicker",{attrs:{type:"date"},model:{value:t.formData.date,callback:function(e){t.$set(t.formData,"date",e)},expression:"formData.date"}})],1)],1):t._e()],1),a("Row",["4"==t.typeName||"5"==t.typeName||"6"==t.typeName||"7"==t.typeName?a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:""}},[a("RadioGroup",{model:{value:t.typeName,callback:function(e){t.typeName=e},expression:"typeName"}},[a("Radio",{attrs:{label:"4"}},[t._v("减应收")]),a("Radio",{attrs:{label:"5"}},[t._v("增应收")]),a("Radio",{attrs:{label:"6"}},[t._v("减应付")]),a("Radio",{attrs:{label:"7"}},[t._v("增应付")])],1)],1)],1):t._e()],1),a("Row",["1"==t.typeName?a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"收入类别",prop:"paymentsTypeId"}},[a("Select",{attrs:{"label-in-value":!0},model:{value:t.formData.paymentsTypeId,callback:function(e){t.$set(t.formData,"paymentsTypeId",e)},expression:"formData.paymentsTypeId"}},t._l(t.paymentsTypeId,(function(e,n){return a("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1):t._e(),"2"==t.typeName?a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"支出类别",prop:"expenditureAccount"}},[a("Select",{attrs:{"label-in-value":!0},model:{value:t.formData.expenditureAccount,callback:function(e){t.$set(t.formData,"expenditureAccount",e)},expression:"formData.expenditureAccount"}},t._l(t.expenditureAccount,(function(e,n){return a("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1):t._e(),"3"==t.typeName?a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"转出账户",prop:"expenditureAccount"}},[a("Select",{attrs:{"label-in-value":!0},model:{value:t.formData.expenditureAccount,callback:function(e){t.$set(t.formData,"expenditureAccount",e)},expression:"formData.expenditureAccount"}},t._l(t.incomeAccount,(function(e,n){return a("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1):t._e(),"4"==t.typeName||"5"==t.typeName||"6"==t.typeName||"7"==t.typeName?a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"往来账户",prop:"incomeAccount"}},[a("Select",{attrs:{"label-in-value":!0},model:{value:t.formData.incomeAccount,callback:function(e){t.$set(t.formData,"incomeAccount",e)},expression:"formData.incomeAccount"}},t._l(t.incomeAccount,(function(e,n){return a("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1):t._e(),"1"==t.typeName?a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"收入账户",prop:"incomeAccount"}},[a("Select",{attrs:{"label-in-value":!0},model:{value:t.formData.incomeAccount,callback:function(e){t.$set(t.formData,"incomeAccount",e)},expression:"formData.incomeAccount"}},t._l(t.incomeAccount,(function(e,n){return a("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1):t._e(),"2"==t.typeName?a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"支出账户",prop:"incomeAccount"}},[a("Select",{attrs:{"label-in-value":!0},model:{value:t.formData.incomeAccount,callback:function(e){t.$set(t.formData,"incomeAccount",e)},expression:"formData.incomeAccount"}},t._l(t.incomeAccount,(function(e,n){return a("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1):t._e(),"3"==t.typeName?a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"转入账户",prop:"incomeAccount"}},[a("Select",{attrs:{"label-in-value":!0},model:{value:t.formData.incomeAccount,callback:function(e){t.$set(t.formData,"incomeAccount",e)},expression:"formData.incomeAccount"}},t._l(t.incomeAccount,(function(e,n){return a("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1):t._e(),"4"==t.typeName||"5"==t.typeName||"6"==t.typeName||"7"==t.typeName?a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"资金账户",prop:"incomeAccount"}},[a("Select",{attrs:{"label-in-value":!0},model:{value:t.formData.incomeAccount,callback:function(e){t.$set(t.formData,"incomeAccount",e)},expression:"formData.incomeAccount"}},t._l(t.incomeAccount,(function(e,n){return a("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1):t._e(),a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"金额",prop:"amount"}},[a("InputNumber",{staticStyle:{width:"200px"},attrs:{maxlength:"10"},model:{value:t.formData.amount,callback:function(e){t.$set(t.formData,"amount",e)},expression:"formData.amount"}})],1)],1)],1),a("Row",[a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"备注",prop:"describe"}},[a("Input",{attrs:{maxlength:"20"},model:{value:t.formData.describe,callback:function(e){t.$set(t.formData,"describe",e)},expression:"formData.describe"}})],1)],1),a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"核算项目"}},[a("Select",{attrs:{"label-in-value":!0},model:{value:t.formData.projectId,callback:function(e){t.$set(t.formData,"projectId",e)},expression:"formData.projectId"}},t._l(t.project,(function(e,n){return a("Option",{key:n,attrs:{dataItem:e,value:e.id},nativeOn:{click:function(a){return t.getClientName(e)}}},[t._v("\n                  "+t._s(e.name)+"\n              ")])})),1)],1)],1),a("Col",{attrs:{span:"6"}})],1),a("Row",[a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"核算客户"}},[t._v("\n            "+t._s(t.clientName)+"\n        ")])],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.budGetAdd()}}},[t._v("确定")]),a("Button",{on:{click:t.cancel}},[t._v("取消")])],1)],1),a("addModal",{ref:"AddDrawer",on:{dataList:t.dataList}})],1)}),c=[],i=(a("8e6e"),a("456d"),a("bd86")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{title:"新增",width:"420px","mask-closable":!1},on:{"on-ok":t.modalSbumit,"on-cancel":t.cancel},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{ref:"formData",attrs:{model:t.formData,"label-width":80,rules:t.checkFormData}},[a("Row",[a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"名称",prop:"name"}},[a("Input",{attrs:{maxlength:"20"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1),a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"备注",prop:"remark"}},[a("Input",{attrs:{maxlength:"20"},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.budGetAdd()}}},[t._v("确定")]),a("Button",{on:{click:t.cancel}},[t._v("取消")])],1)],1)],1)},l=[],m=(a("7f7f"),a("a3a8")),u=a("2f08"),p=a("2f62");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(a,!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var b={name:"addDepartment",components:{iCopyright:u["a"]},props:{},data:function(){return{typeName:"1",formData:{},showModal:!1,checkFormData:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},computed:f({},Object(p["e"])("admin/global",["classTerm","classType","shiftGrade","subject","shiftCat","sectionList","yearList","chargeinTypeList","courseTypeList"])),watch:{},methods:{budGetAdd:function(){var t=this;this.$refs["formData"].validate((function(e){e&&Object(m["a"])({type:t.typeName,name:t.formData.name,remark:t.formData.remark}).then((function(e){t.$Message.success(e.msg),t.cancel(),t.showModal=!1,t.$emit("dataList")}))}))},DrawerToShow:function(t){this.showModal=!0,this.typeName=t},modalSbumit:function(){console.log("确定")},cancel:function(){this.showModal=!1,this.$refs["formData"].resetFields(),this.formData={},this.$emit("dataList")}},mounted:function(){},beforeDestroy:function(){},created:function(){}},y=b,h=a("2877"),D=Object(h["a"])(y,s,l,!1,null,null,null),g=D.exports;function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function k(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(a,!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var w={name:"addDepartment",components:{iCopyright:u["a"],addModal:g},props:{},data:function(){return{paymentsTypeId:[],incomeAccount:[],expenditureAccount:[],project:[],department:[],auxiliaryProjectList:[],auxiliaryCustomerList:[],auxiliaryPersonalList:[],accountList:[],budgetList:[],inComeTypeList:[],typeName:"1",chooseDataInfo:[],chooseData:[],formData:{clientId:""},clientName:"",showModal:!1,checkFormData:{departmentId:[{required:!0,message:"请选择部门",trigger:"change",type:"number"}],date:[{required:!0,message:"请选择日期",trigger:"change",type:"date"}],amount:[{required:!0,message:"请输入金额",trigger:"blur",type:"number"}]}}},computed:k({},Object(p["e"])("admin/global",[])),watch:{},methods:{getClientName:function(t){this.clientName=t.clientName,this.formData.clientId=t.belongCustomer},numberChange:function(t){var e=null;if(t>=0){var a=/.*\..*/;e=a.test(t)?parseFloat(t.toFixed(2)):t}this.formData.amount=e},format:function(t){var e=new Date(t),a=e.getFullYear(),n=e.getMonth()+1,o=e.getDate();return n<10&&(n="0"+n),o<10&&(o="0"+o),a+"-"+n+"-"+o},budGetAdd:function(){var t=this;this.$refs["formData"].validate((function(e){e&&Object(m["c"])({id:"0",type:t.typeName,departmentId:t.formData.departmentId,date:t.format(t.formData.date),paymentsTypeId:t.formData.paymentsTypeId,incomeAccount:t.formData.incomeAccount,expenditureAccount:t.formData.expenditureAccount,amount:t.formData.amount,describe:t.formData.describe,projectId:t.formData.projectId,clientId:t.formData.clientId}).then((function(e){t.$Message.success(e.msg),t.cancel(),t.$emit("dataList")}))}))},dataList:function(){var t=this;Object(m["d"])({}).then((function(e){t.department=e.data.configData.department,t.paymentsTypeId=e.data.configData.paymentsTypeIncome,t.incomeAccount=e.data.configData.account,t.expenditureAccount=e.data.configData.paymentsTypeExpenditure,t.project=e.data.configData.project}))},addType:function(t){this.$refs.AddDrawer.DrawerToShow(t)},DrawerToShow:function(){this.showModal=!0,this.dataList()},modalSbumit:function(){console.log("确定")},cancel:function(){this.showModal=!1,this.$refs["formData"].resetFields(),this.formData={},this.clientName="",this.$emit("showAudition")}},mounted:function(){},beforeDestroy:function(){},created:function(){}},I=w,_=Object(h["a"])(I,r,c,!1,null,null,null),x=_.exports,O={name:"financeManagement",components:{iCopyright:u["a"],addModal:x},data:function(){return{isShow:!1,type:"1",loading:!0,searchKey:{},pageInfo:{count:10,pageSize:10,page:1},columns12:[{title:"公司名称",key:"clientName",minWidth:160},{title:"部门",key:"department",minWidth:160},{title:"账单日期",key:"date",minWidth:160},{title:"项目名称",key:"projectName",minWidth:180},{title:"类型",key:"typeName",minWidth:220},{title:"支出账户",key:"expenditureAccount",minWidth:220},{title:"收入账户",key:"incomeAccountName",minWidth:220},{title:"收支类别",key:"paymentsType",minWidth:220},{title:"金额",key:"amount",minWidth:220},{title:"创建时间",key:"createTime",minWidth:220}],tableData:[]}},computed:{},watch:{},methods:{addBugget:function(){this.$refs.AddDrawer.DrawerToShow()},changePage:function(t){this.pageInfo.page=t,this.dataList()},search:function(){this.pageInfo.page=1,this.pageInfo.pageSize=20,this.dataList()},changeSelect:function(t){var e=this;this.chooseData=[],t.forEach((function(t){e.chooseData.push(t.noticeId)}))},dataList:function(){var t=this;this.loading=!0,Object(m["b"])({startTime:this.searchKey.startTime,endTime:this.searchKey.endTime,type:this.type,page:this.pageInfo.page}).then((function(e){t.tableData=e.data.list,t.pageInfo=e.data.pageInfo,t.loading=!1}))}},mounted:function(){},beforeDestroy:function(){},created:function(){this.dataList()}},A=O,N=(a("1694"),Object(h["a"])(A,n,o,!1,null,"5debe91b",null));e["default"]=N.exports},a3a8:function(t,e,a){"use strict";a.d(e,"e",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"d",(function(){return c})),a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return s}));var n=a("b6bd");function o(t){return Object(n["a"])({url:"/finance/budget/statistics",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/finance/budget/add-auxiliary",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/finance/manage/get-config",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/finance/manage/save",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/finance/manage/list",method:"post",data:t})}}}]);