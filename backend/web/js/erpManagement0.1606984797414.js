(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["erpManagement0","erpManagement1"],{"0658":function(t,e,n){"use strict";n.d(e,"i",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"v",(function(){return s})),n.d(e,"f",(function(){return l})),n.d(e,"d",(function(){return c})),n.d(e,"l",(function(){return d})),n.d(e,"c",(function(){return u})),n.d(e,"h",(function(){return h})),n.d(e,"g",(function(){return f})),n.d(e,"b",(function(){return m})),n.d(e,"e",(function(){return p})),n.d(e,"k",(function(){return g})),n.d(e,"j",(function(){return b})),n.d(e,"q",(function(){return y})),n.d(e,"p",(function(){return v})),n.d(e,"w",(function(){return w})),n.d(e,"o",(function(){return I})),n.d(e,"n",(function(){return O})),n.d(e,"s",(function(){return k})),n.d(e,"u",(function(){return _})),n.d(e,"r",(function(){return S})),n.d(e,"t",(function(){return j})),n.d(e,"m",(function(){return x}));var a=n("b6bd"),i=n("4328");function o(t){return Object(a["a"])({url:"/client/client/client_list",method:"post",data:i.stringify(t)})}function r(t){return Object(a["a"])({url:"/client/client/client_add",method:"post",data:i.stringify(t)})}function s(t){return Object(a["a"])({url:"/client/client/client_save",method:"post",data:i.stringify(t)})}function l(t){return Object(a["a"])({url:"/client/client/client_info",method:"post",data:i.stringify(t)})}function c(t){return Object(a["a"])({url:"/client/client/client_person_add",method:"post",data:i.stringify(t)})}function d(t){return Object(a["a"])({url:"/client/client/client_person_list",method:"post",data:i.stringify(t)})}function u(t){return Object(a["a"])({url:"/client/client/client_interview_add",method:"post",data:i.stringify(t)})}function h(t){return Object(a["a"])({url:"/client/client/client_interview_list",method:"post",data:i.stringify(t)})}function f(t){return Object(a["a"])({url:"/client/client/client_interview_info",method:"post",data:i.stringify(t)})}function m(t){return Object(a["a"])({url:"/client/client/client_contract_add",method:"post",data:i.stringify(t)})}function p(t){return Object(a["a"])({url:"/client/client/client_contract_list",method:"post",data:i.stringify(t)})}function g(t){return Object(a["a"])({url:"/client/client/client_shift",method:"post",data:i.stringify(t)})}function b(t){return Object(a["a"])({url:"/client/client/select",method:"post",data:i.stringify(t)})}function y(t){return Object(a["a"])({url:"/client/client/person_select",method:"post",data:i.stringify(t)})}function v(t){return Object(a["a"])({url:"/client/client/client_person_info",method:"post",data:i.stringify(t)})}function w(t){return Object(a["a"])({url:"/client/client/client_person_save",method:"post",data:i.stringify(t)})}function I(t){return Object(a["a"])({url:"/client/client/client_person_del",method:"post",data:i.stringify(t)})}function O(t){return Object(a["a"])({url:"/client/client/client_del",method:"post",data:i.stringify(t)})}var k=function(t){return Object(a["a"])({url:"/project/manage/list",method:"post",data:t})},_=function(t){return Object(a["a"])({url:"/project/manage/save",method:"post",data:t})},S=function(t){return Object(a["a"])({url:"/project/manage/info",method:"post",data:t})},j=function(t){return Object(a["a"])({url:"/project/manage/get-report-user",method:"post",data:t})},x=function(t){return Object(a["a"])({url:"/client/client/list",method:"post",data:t})}},"25a6":function(t,e,n){"use strict";var a=n("ddb1"),i=n.n(a);i.a},"287e":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{"mask-closable":!1,title:"物料详情",width:1e3},on:{"on-cancel":function(e){return t.handleReset("formData")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.loading?n("Spin",{attrs:{size:"large",fix:""}}):t._e(),n("Row",[n("Col",[n("Table",{staticStyle:{margin:"10px 0"},attrs:{columns:t.columns,data:t.formData,border:"","show-summary":"","min-height":"200"}})],1)],1),n("template",{slot:"footer"},[n("Button",{on:{click:function(e){return t.handleReset("formData")}}},[t._v("关闭")])],1)],2)},i=[],o=n("f8b7"),r={components:{},props:{},data:function(){return{loading:!1,showModal:!1,formData:[],columns:[{title:"编号",key:"number",minWidth:100},{title:"名称",key:"name",minWidth:100},{title:"所需数量",minWidth:100,key:"count"},{title:"单位",key:"unit",minWidth:50},{title:"体积",key:"volume",minWidth:50},{title:"重量",key:"weight",minWidth:50}]}},computed:{},watch:{},methods:{handleReset:function(t){this.showModal=!1,this.formData=[]},getInfo:function(t){var e=this;console.log(t),this.showModal=!0,this.loading=!0,Object(o["b"])({id:t}).then((function(t){0===t.ret&&(e.formData=t.data.list,e.loading=!1)}))}},mounted:function(){},beforeDestroy:function(){},created:function(){}},s=r,l=(n("6839"),n("2877")),c=Object(l["a"])(s,a,i,!1,null,"3699aebb",null);e["a"]=c.exports},2887:function(t,e,n){"use strict";var a=n("4150"),i=n.n(a);i.a},"2b30":function(t,e,n){"use strict";n.r(e);var a,i,o=n("2877"),r={},s=Object(o["a"])(r,a,i,!1,null,null,null);e["default"]=s.exports},"386d":function(t,e,n){"use strict";var a=n("cb7c"),i=n("83a1"),o=n("5f1b");n("214f")("search",1,(function(t,e,n,r){return[function(n){var a=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,a):new RegExp(n)[e](String(a))},function(t){var e=r(n,t,this);if(e.done)return e.value;var s=a(t),l=String(this),c=s.lastIndex;i(c,0)||(s.lastIndex=0);var d=o(s,l);return i(s.lastIndex,c)||(s.lastIndex=c),null===d?-1:d.index}]}))},4150:function(t,e,n){},"5ad4":function(t,e,n){"use strict";var a=n("7c49"),i=n.n(a);i.a},"5dbc":function(t,e,n){var a=n("d3f4"),i=n("8b97").set;t.exports=function(t,e,n){var o,r=e.constructor;return r!==n&&"function"==typeof r&&(o=r.prototype)!==n.prototype&&a(o)&&i&&i(t,o),t}},"5f69":function(t,e,n){"use strict";var a=n("da17"),i=n.n(a);i.a},"66f9":function(t,e,n){},6839:function(t,e,n){"use strict";var a=n("66f9"),i=n.n(a);i.a},"692d":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Card",{staticClass:"sx"},[n("Form",{attrs:{inline:""}},[n("Row",[n("Col",{attrs:{xs:24,sm:12,md:12,lg:8}},[n("FormItem",{staticStyle:{width:"100%"},attrs:{label:"订单编号","label-position":"top","label-width":80}},[n("Input",{attrs:{placeholder:"请输入订单编号"},model:{value:t.searchValidate.number,callback:function(e){t.$set(t.searchValidate,"number",e)},expression:"searchValidate.number"}})],1)],1),n("Col",{attrs:{xs:24,sm:12,md:12,lg:8}},[n("FormItem",{staticStyle:{width:"100%"},attrs:{label:"客户","label-position":"top","label-width":80}},[n("Input",{attrs:{placeholder:"请输入客户名称"},model:{value:t.searchValidate.clientName,callback:function(e){t.$set(t.searchValidate,"clientName",e)},expression:"searchValidate.clientName"}})],1)],1),n("Col",{attrs:{xs:24,sm:12,md:12,lg:8}},[n("FormItem",{staticStyle:{width:"100px","text-align":"right"},attrs:{"label-width":0}},[t.showMore?t._e():n("div",{on:{click:function(e){t.showMore=!t.showMore}}},[t._v("\n              更多筛选"),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),t.showMore?n("div",{on:{click:function(e){t.showMore=!t.showMore}}},[t._v("\n              收起"),n("Icon",{attrs:{type:"ios-arrow-up"}})],1):t._e()]),n("FormItem",{attrs:{label:"","label-position":"top","label-width":0}},[n("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),n("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"default"},on:{click:function(e){return t.clear("searchValidate")}}},[t._v("重置")])],1)],1)],1),t.showMore?n("Row",[n("Col",{attrs:{xs:24,sm:12,md:12,lg:8}},[n("FormItem",{staticStyle:{width:"100%"},attrs:{label:"下单时间","label-position":"top","label-width":80}},[n("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange","split-panels":"",placement:"bottom-end",placeholder:"请选择时间"},on:{"on-change":t.handleChangeTime},model:{value:t.searchValidate.time,callback:function(e){t.$set(t.searchValidate,"time",e)},expression:"searchValidate.time"}})],1)],1),n("Col",{attrs:{xs:24,sm:24,md:24,lg:16}},[n("FormItem",{staticStyle:{width:"100%"},attrs:{label:"订单状态","label-position":"top","label-width":80}},[n("RadioGroup",{model:{value:t.searchValidate.status,callback:function(e){t.$set(t.searchValidate,"status",e)},expression:"searchValidate.status"}},[n("Radio",{attrs:{label:0}},[t._v("全部")]),n("Radio",{attrs:{label:1}},[t._v("生产中")]),n("Radio",{attrs:{label:2}},[t._v("生产完成")]),n("Radio",{attrs:{label:3}},[t._v("已发货")]),n("Radio",{attrs:{label:4}},[t._v("已完成")])],1)],1)],1)],1):t._e()],1)],1),n("Card",[n("Table",{attrs:{loading:t.loading,stripe:"",columns:t.tableColumns,data:t.tableData},on:{"on-selection-change":t.selectItem}}),n("div",{staticStyle:{margin:"10px 0",overflow:"hidden","line-height":"32px"}},[n("div",{staticStyle:{float:"left"}},[n("span",[t._v("共 "+t._s(t.pageination.count)+" 条记录")]),n("span",{staticStyle:{"margin-left":"5px"}},[t._v("第"+t._s(t.pageination.page)+"页")])]),n("div",{staticStyle:{float:"right"}},[n("Page",{attrs:{total:Number(t.pageination.count),"page-size":Number(t.pageination.pageSize),current:Number(t.pageination.page)},on:{"on-change":t.changePage}})],1)])],1),n("send",{ref:"Drawer",on:{getData:t.getData}}),n("materielDetail",{ref:"materielDetail"}),n("printPreview",{ref:"print"})],1)},i=[],o=(n("8e6e"),n("456d"),n("bd86")),r=(n("ac6a"),n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Modal",{attrs:{title:"打印预览",width:"900","mask-closable":!1},on:{"on-cancel":t.cancel},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.loading&&t.showModal?n("Spin",{attrs:{size:"large",fix:""}}):t._e(),n("section",{ref:"printSub"},[n("div",{staticClass:"printer",staticStyle:{"min-heigth":"500px"},domProps:{innerHTML:t._s(t.priteInfo)}})]),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{on:{click:t.cancel}},[t._v("关闭")]),n("Button",{attrs:{type:"primary"},on:{click:t.onPrint}},[t._v("打印")])],1)],1)],1)}),s=[],l=n("f8b7"),c=n("7618"),d=function t(e,n){if(!(this instanceof t))return new t(e,n);this.options=this.extend({noPrint:".no-print"},n),"string"===typeof e?this.dom=document.querySelector(e):(this.isDOM(e),this.dom=this.isDOM(e)?e:e.$el),this.init()};d.prototype={init:function(){var t=this.getStyle()+this.getHtml();this.writeIframe(t)},extend:function(t,e){for(var n in e)t[n]=e[n];return t},getStyle:function(){for(var t="",e=document.querySelectorAll("style,link"),n=0;n<e.length;n++)t+=e[n].outerHTML;return t+="<style>"+(this.options.noPrint?this.options.noPrint:".no-print")+"{display:none;}</style>",t},getHtml:function(){for(var t=document.querySelectorAll("input"),e=document.querySelectorAll("textarea"),n=document.querySelectorAll("select"),a=0;a<t.length;a++)"checkbox"==t[a].type||"radio"==t[a].type?1==t[a].checked?t[a].setAttribute("checked","checked"):t[a].removeAttribute("checked"):(t[a].type,t[a].setAttribute("value",t[a].value));for(var i=0;i<e.length;i++)"textarea"==e[i].type&&(e[i].innerHTML=e[i].value);for(var o=0;o<n.length;o++)if("select-one"==n[o].type){var r=n[o].children;for(var s in r)"OPTION"==r[s].tagName&&(1==r[s].selected?r[s].setAttribute("selected","selected"):r[s].removeAttribute("selected"))}return this.dom.outerHTML},writeIframe:function(t){var e,n,a=document.createElement("iframe"),i=document.body.appendChild(a);a.id="myIframe",a.setAttribute("style","position:absolute;width:0;height:0;top:-10px;left:-10px;"),e=i.contentWindow||i.contentDocument,n=i.contentDocument||i.contentWindow.document,n.open(),n.write(t),n.close();var o=this;a.onload=function(){o.toPrint(e),setTimeout((function(){document.body.removeChild(a)}),100)}},toPrint:function(t){try{setTimeout((function(){t.focus();try{t.document.execCommand("print",!1,null)||t.print()}catch(e){t.print()}t.close()}),10)}catch(e){console.log("err",e)}},isDOM:"object"===("undefined"===typeof HTMLElement?"undefined":Object(c["a"])(HTMLElement))?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"===Object(c["a"])(t)&&1===t.nodeType&&"string"===typeof t.nodeName}};var u=d,h=n("2f08"),f={name:"addDepartment",components:{iCopyright:h["a"]},data:function(){return{orderId:"",priteInfo:"",showModal:!1,loading:!0}},props:{},computed:{},watch:{},methods:{infoPrite:function(t){var e=this;Object(l["h"])({orderId:t}).then((function(t){e.priteInfo=t.data.info,e.loading=!1}))},DrawerToShow:function(t){this.loading=!0,console.log(document.getElementById("text","-----0000")),this.infoPrite(t),this.showModal=!0},cancel:function(){this.showModal=!1},onPrint:function(){u(this.$refs.printSub),this.$print(this.$refs.printSub)},printView:function(){console.log(document.getElementById("priteInfoHtml"),"--内容");var t=window.open("_blank"),e=document.getElementById("priteInfoHtml").innerHTML;return t.document.write("<html><head><title>打印预览</title>"),t.document.write(e),t.document.close(),t.print(),!0}},mounted:function(){},beforeDestroy:function(){},created:function(){}},m=f,p=(n("5f69"),n("2877")),g=Object(p["a"])(m,r,s,!1,null,"d5f0fe68",null),b=g.exports,y=n("287e"),v=n("b627");function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(n,!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O={components:{send:v["a"],materielDetail:y["a"],printPreview:b},data:function(){var t=this;return{loading:!0,tableColumns:[{title:"订单编号",key:"number",minWidth:100,render:function(e,n){return e("div",[e("a",{props:{type:"primary",size:"small"},style:{minWidth:"90px",display:"block",wordBreak:"break-all",paddingRight:"5px"},on:{click:function(){t.show(n.row,"edit")}}},n.row.number)])}},{title:"客户名称",minWidth:100,key:"clientName"},{title:"总金额",minWidth:100,key:"totalPrice"},{title:"已付金额",minWidth:100,key:"receiptPrice"},{title:"状态",key:"statusName",minWidth:60},{title:"下单日期",minWidth:100,key:"orderDate"},{title:"发货日期",minWidth:100,key:"sendDate"},{title:"交货日期",minWidth:100,key:"deliveryDate"},{title:"操作",key:"action",minWidth:148,render:function(e,n){return e("div",[e("Button",{props:{size:"small",type:"primary"},style:{marginRight:"5px",display:1==n.row.status||2==n.row.status?"":"none"},on:{click:function(){t.onSubmit(n.row)}}},1==n.row.status?"生产完成":2==n.row.status?"发货":""),e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px",display:Number(n.row.status)>=2?"":"none"},on:{click:function(){t.$refs.print.DrawerToShow(n.row.id)}}},"发货单")])}}],tableData:[],pageination:{page:1,pageSize:2,count:1},page:1,searchValidate:{number:"",status:0,startOrderDate:"",endOrderDate:"",clientName:"",time:[]},selectIds:[],showSend:!1,showMore:!1}},created:function(){this.getData()},methods:{onSubmit:function(t){switch(t.status){case 1:this.complete(t);break;case 2:console.log(1111),this.$refs.Drawer.getInfo(t.id,!0);break;default:this.$refs.Drawer.getInfo(t.id);break}},complete:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"<p>确定该订单已生产完成吗？</p>",onOk:function(){Object(l["c"])({id:t.id}).then((function(t){0===t.ret?(e.$Message.success("提交成功"),e.getData()):e.$Message.error(t.msg)}))},onCancel:function(){}})},deliver:function(t){},selectItem:function(t){var e=this;this.selectIds=[],t.forEach((function(t){e.selectIds.push(t.id)}))},delBetch:function(){this.selectIds.length<1?this.$Message.error("请选择要操作的数据"):this.del(this.selectIds)},del:function(t){var e=this;console.log(1111),this.$Modal.confirm({title:"删除",content:"<p>确定删除该产品？</p>",onOk:function(){productDel({id:t}).then((function(t){0===t.ret?(e.$Message.success("删除成功"),e.getData()):e.$Message.error(t.msg)}))},onCancel:function(){}})},search:function(){this.page=1,this.getData()},clear:function(t){this.page=1,this.searchValidate.number="",this.searchValidate.clientName="",this.searchValidate.status=0,this.searchValidate.startOrderDate="",this.searchValidate.endOrderDate="",this.searchValidate.time=[],this.getData()},getData:function(){var t=this;this.loading=!0,this.selectIds=[],Object(l["e"])(I({page:this.page},this.searchValidate,{type:1})).then((function(e){t.loading=!1,0===e.ret?(console.log("成功"),t.tableData=e.data.list,t.pageination=e.data.pageInfo):t.$Message.error(e.msg||"接口错误")}))},changePage:function(t){this.page=t,this.getData()},show:function(t,e){"add"===e?this.$refs.Drawer.getInfo(""):"edit"===e&&this.$refs.Drawer.getInfo(t.id)},handleChangeTime:function(t){this.searchValidate.startOrderDate=t[0]||"",this.searchValidate.endOrderDate=t[1]||""}}},k=O,_=(n("ae44"),Object(p["a"])(k,a,i,!1,null,"42c8010a",null));e["default"]=_.exports},"6d61":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Card",[n("div",[t._l(t.children,(function(e,a){return[e.btnIsTable?t._e():n("Button",{key:a,class:e.btnClass,attrs:{icon:"md-add",type:e.btnType?e.btnType:"default"},on:{click:function(n){return t.handleEvent(e.btnHandle,e.btnHandleParmas)}}},[t._v(t._s(e.btnTitle))])]})),n("div",{staticClass:"ivu-mt"},[n("Alert",[n("Icon",{staticClass:"ivu-mr-8",attrs:{color:"#2d8cf0",type:"ios-alert"}}),t._v("\n          已选择 "+t._s(t.selectedArr.length)+" 项\n          "),n("a",{staticClass:"ivu-ml-8",on:{click:t.clearSelectd}},[t._v("清空")])],1)],1),n("div",[n("Table",{ref:"tableData",attrs:{columns:t.columns,data:t.data,loading:t.loading},on:{"on-selection-change":t.changeSelect}})],1),n("div",{staticClass:"ivu-mt ivu-text-center"},[n("Page",{attrs:{"page-size":t.pageInfo.pageSize,total:Number(t.pageInfo.count),current:t.pageInfo.page},on:{"on-change":t.changePage}})],1)],2)]),n("addWarehouse",{ref:"addWarehouse",on:{hideModal:function(e){e&&t.getData()}}})],1)},i=[],o=(n("ac6a"),n("915b")),r=n("2f08"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,title:0==t.formValidate.houseId?"新增仓库":"编辑仓库"},on:{"on-cancel":function(e){return t.handleReset("formValidate")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[n("FormItem",{attrs:{label:"仓库名称",prop:"name"}},[n("Input",{attrs:{placeholder:"请输入仓库名称"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),n("FormItem",{attrs:{label:"仓库编号",prop:"number"}},[n("Input",{attrs:{placeholder:"请输入仓库编号"},model:{value:t.formValidate.number,callback:function(e){t.$set(t.formValidate,"number",e)},expression:"formValidate.number"}})],1),n("FormItem",{attrs:{label:"仓库保管员",prop:"keeper"}},[n("Input",{attrs:{placeholder:"请输入仓库保管员"},model:{value:t.formValidate.keeper,callback:function(e){t.$set(t.formValidate,"keeper",e)},expression:"formValidate.keeper"}})],1),n("FormItem",{attrs:{label:"仓库地址",prop:"address"}},[n("Input",{attrs:{placeholder:"请输入仓库地址"},model:{value:t.formValidate.address,callback:function(e){t.$set(t.formValidate,"address",e)},expression:"formValidate.address"}})],1)],1),n("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[n("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("取消")]),n("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)],1)],1)},l=[],c=(n("7f7f"),n("9411")),d={name:"addWarehouse",props:{modal:{type:Boolean,default:!1}},components:{iCopyright:r["a"]},data:function(){return{formValidate:{id:0,name:"",address:"",keeper:"",number:""},ruleValidate:{name:[{required:!0,message:"请输入仓库名称",trigger:"blur"}]},indeterminate:!1,checkAll:!1,campusList:[],showModal:!1,loading:!1}},computed:{},watch:{},methods:{loadData:function(t,e){this.showModal=!0,"add"===e?(this.formValidate={id:0,name:"",address:"",keeper:"",number:""},this.checkAll=!1):this.formValidate=t},handleCheckAll:function(){var t=this;this.indeterminate?this.checkAll=!1:this.checkAll=!this.checkAll,this.indeterminate=!1,this.checkAll?(this.formValidate.cacampusIdsmpus=[],this.campusList.forEach((function(e){t.formValidate.campusIds.push(e.sectionId+"")}))):this.formValidate.campusIds=[]},checkAllGroupChange:function(t){t.length===this.campusList.length?(this.indeterminate=!1,this.checkAll=!0):t.length>0?(this.indeterminate=!0,this.checkAll=!1):(this.indeterminate=!1,this.checkAll=!1)},handleReset:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$refs[t].resetFields(),this.showModal=!1,this.loading=!1,this.$emit("hideModal",e)},handleSubmit:function(t){var e=this;this.loading=!0,this.$refs[t].validate((function(n){n?Object(o["c"])(e.formValidate).then((function(n){e.$Message.success("保存成功"),e.handleReset(t,!0)})).catch((function(){e.loading=!1})):(e.loading=!1,e.$Message.error("请将信息填写完整"))}))},getCampusList:function(){var t=this;Object(c["E"])({}).then((function(e){t.campusList=e.data.list}))}},mounted:function(){},beforeDestroy:function(){},created:function(){}},u=d,h=(n("2887"),n("2877")),f=Object(h["a"])(u,s,l,!1,null,"6097f811",null),m=f.exports,p=m,g={name:"erpIndexPage",components:{iCopyright:r["a"],addWarehouse:p},data:function(){var t=this;return{children:[{btnTitle:"新建",btnClass:"",btnType:"primary",btnHandle:"addShow",btnHandleParams:"",btnIsTable:!1},{btnTitle:"批量删除",btnClass:"ivu-ml-8",btnType:"",btnHandle:"handleDel",btnHandleParams:"",btnIsTable:!1},{btnTitle:"编辑",btnClass:"",btnType:"primary",btnHandle:"editInfo",btnHandleParams:"",btnIsTable:!0},{btnTitle:"删除",btnClass:"",btnType:"error",btnHandle:"handleDelOne",btnHandleParams:"",btnIsTable:!0}],modal:!1,columns:[{type:"selection",minWidth:50},{title:"名称",key:"name",minWidth:100},{title:"编号",key:"number",minWidth:100},{title:"保管员",key:"keeper",minWidth:100},{title:"地址",key:"address",minWidth:100},{title:"操作",key:"action",minWidth:120,render:function(e,n){var a=[];return t.children.forEach((function(i){i.btnIsTable&&a.push(e("Button",{props:{size:"small",type:i.btnType},style:{marginRight:"10px"},on:{click:function(){t.handleEvent(i.btnHandle,n.row)}}},i.btnTitle))})),e("div",a)}}],data:[],searchValidate:{name:"",type:0},selectedArr:[],loading:!1,pageInfo:{pageSize:10,page:1,pageSum:0,count:0}}},computed:{},watch:{},methods:{editInfo:function(t){console.log(t);var e=JSON.parse(JSON.stringify(t));this.$refs.addWarehouse.loadData(e,"edit")},addShow:function(){this.modal=!0,this.$refs.addWarehouse.loadData({},"add")},resetSearch:function(){this.searchValidate={name:"",type:0},this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},search:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},getData:function(){var t=this;this.loading=!0,this.data=[],this.selectedArr=[],Object(o["b"])({page:this.pageInfo.page,pageSize:this.pageInfo.pageSize}).then((function(e){t.loading=!1,t.data=e.data.list,t.pageInfo=e.data.pageInfo,t.selectedArr=[]}))},changeSelect:function(t){var e=this;this.selectedArr=[],console.log(t),t.forEach((function(t){e.selectedArr.push(t.id)}))},changePage:function(t){this.pageInfo.page=t,this.getData()},clearSelectd:function(){this.$refs.tableData.selectAll(!1),this.selectedArr=[]},handleDel:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedArr;0!==e.length?this.$Modal.confirm({title:"提示",content:"<p>确认删除</p>",onOk:function(){Object(o["a"])({houseIds:e}).then((function(e){t.$Message.success("删除成功");var n=t.pageInfo.page;if(n===t.pageInfo.pageSum){var a=t.pageInfo.pageSize,i=t.pageInfo.count,o=i-a*(n-1);o===t.selectedArr.length&&(n=1===n?1:n-1)}t.changePage(n)}))},onCancel:function(){}}):this.$Message.error("请选择仓库")},handleDelOne:function(t){var e=[];e.push(t.id),this.handleDel(e)},handleEvent:function(t,e){this.$emit(t,e)}},mounted:function(){this.resetSearch()},beforeDestroy:function(){},created:function(){var t=this;this.children.forEach((function(e){t.$on(e.btnHandle,t[e.btnHandle])}))}},b=g,y=(n("5ad4"),Object(h["a"])(b,a,i,!1,null,"2783eaf7",null));e["default"]=y.exports},"7c49":function(t,e,n){},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"8b97":function(t,e,n){var a=n("d3f4"),i=n("cb7c"),o=function(t,e){if(i(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,a){try{a=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),a(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:a(t,n),t}}({},!1):void 0),check:o}},"915b":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"r",(function(){return s})),n.d(e,"s",(function(){return l})),n.d(e,"i",(function(){return c})),n.d(e,"f",(function(){return d})),n.d(e,"h",(function(){return u})),n.d(e,"g",(function(){return h})),n.d(e,"l",(function(){return f})),n.d(e,"j",(function(){return m})),n.d(e,"k",(function(){return p})),n.d(e,"o",(function(){return g})),n.d(e,"m",(function(){return b})),n.d(e,"n",(function(){return y})),n.d(e,"t",(function(){return v})),n.d(e,"u",(function(){return w})),n.d(e,"q",(function(){return I})),n.d(e,"d",(function(){return O})),n.d(e,"p",(function(){return k})),n.d(e,"e",(function(){return _}));var a=n("b6bd");function i(t){return Object(a["a"])({url:"/purchase/ware-house/list",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/purchase/ware-house/save",method:"post",data:t})}function r(t){return Object(a["a"])({url:"/purchase/ware-house/del",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/purchase/stock/goods-list",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/purchase/stock/stock-goods-detail",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/purchase/goods/list-category",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/purchase/goods/add-category",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/purchase/goods/edit-category",method:"post",data:t})}function h(t){return Object(a["a"])({url:"/purchase/goods/del-category",method:"post",data:t})}function f(t){return Object(a["a"])({url:"/purchase/goods/list-goods",method:"post",data:t})}function m(t){return Object(a["a"])({url:"/purchase/goods/add-goods",method:"post",data:t})}function p(t){return Object(a["a"])({url:"/purchase/goods/del-goods",method:"post",data:t})}function g(t){return Object(a["a"])({url:"/purchase/stock-manage/list",method:"post",data:t})}function b(t){return Object(a["a"])({url:"/purchase/stock-manage/add",method:"post",data:t})}function y(t){return Object(a["a"])({url:"/purchase/stock-manage/detail",method:"post",data:t})}function v(t){return Object(a["a"])({url:"/purchase/stock-manage/list-query",method:"post",data:t})}function w(t){return Object(a["a"])({url:"/purchase/stock-manage/stock-statistics",method:"post",data:t})}function I(t){return Object(a["a"])({url:"/purchase/stock-manage/del",method:"post",data:t})}var O="/purchase/goods/export-goods",k="/purchase/goods/import-goods",_="/upload/template/goods.xls"},"9dc0":function(t,e,n){},a14d:function(t,e,n){"use strict";var a=n("dd2b"),i=n.n(a);i.a},aa77:function(t,e,n){var a=n("5ca1"),i=n("be13"),o=n("79e5"),r=n("fdef"),s="["+r+"]",l="​",c=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),u=function(t,e,n){var i={},s=o((function(){return!!r[t]()||l[t]()!=l})),c=i[t]=s?e(h):r[t];n&&(i[n]=c),a(a.P+a.F*s,"String",i)},h=u.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(d,"")),t};t.exports=u},ae44:function(t,e,n){"use strict";var a=n("9dc0"),i=n.n(a);i.a},b627:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,title:t.isSend?"发货":"订单详情",width:800},on:{"on-cancel":function(e){return t.handleReset("formValidate")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.loading?n("Spin",{attrs:{size:"large",fix:""}}):t._e(),n("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":90}},[t.isSend?n("Row",{attrs:{type:"flex",justify:"start"}},[n("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("发货信息")]),n("Col",{attrs:{xs:24,md:24,lg:12}},[n("FormItem",{staticStyle:{width:"100%"},attrs:{label:"发货时间",prop:"sendDate"}},[n("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择发货时间",value:t.formValidate.sendDate,format:"yyyy-MM-dd"},on:{"on-change":t.changeData}})],1)],1),n("Col",{attrs:{xs:24,md:24,lg:12}},[n("FormItem",{staticStyle:{width:"100%"},attrs:{label:"发货方式",prop:"sendWay"}},[n("Input",{attrs:{placeholder:"请输入发货方式"},model:{value:t.formValidate.sendWay,callback:function(e){t.$set(t.formValidate,"sendWay",e)},expression:"formValidate.sendWay"}})],1)],1)],1):t._e(),t.formValidate.id?n("Row",{attrs:{type:"flex",justify:"start"}},[n("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("订单信息")]),n("Col",{attrs:{xs:24,md:24,lg:12}},[n("FormItem",{staticStyle:{width:"100%"},attrs:{label:"订单编号：",prop:"clientId"}},[t._v("\n            "+t._s(t.formValidate.number)+"\n          ")])],1),n("Col",{attrs:{xs:24,md:24,lg:12}},[n("FormItem",{staticStyle:{width:"100%"},attrs:{label:"状态：",prop:"clientId"}},[t._v("\n            "+t._s(t.statusName)+"\n          ")])],1),n("Col",{attrs:{xs:24,md:24,lg:12}},[n("FormItem",{staticStyle:{width:"100%"},attrs:{label:"订单客户：",prop:"clientId"}},[t._v("\n            "+t._s(t.clientName)+"\n          ")])],1),n("Col",{attrs:{xs:24,md:24,lg:12}},[n("FormItem",{staticStyle:{width:"100%"},attrs:{label:"合同编号：",prop:"clientId"}},[t._v("\n            "+t._s(t.formValidate.contractCode)+"\n          ")])],1),n("Col",{attrs:{xs:24,md:24,lg:12}},[n("FormItem",{staticStyle:{width:"100%"},attrs:{label:"订单金额：",prop:"totalPrice"}},[t._v("\n            "+t._s(t.formValidate.totalPrice)+"\n          ")])],1),n("Col",{attrs:{xs:24,md:24,lg:12}},[n("FormItem",{staticStyle:{width:"100%"},attrs:{label:"已付金额：",prop:"receiptPrice"}},[t._v("\n            "+t._s(t.formValidate.receiptPrice)+"\n          ")])],1),n("Col",{attrs:{xs:24,md:24,lg:12}},[n("FormItem",{staticStyle:{width:"100%"},attrs:{label:"交货日期：",prop:"clientId"}},[t._v("\n            "+t._s(t.formValidate.deliveryDate)+"\n          ")])],1),3==t.formValidate.status?n("Col",{attrs:{xs:24,md:24,lg:12}},[n("FormItem",{staticStyle:{width:"100%"},attrs:{label:"发货日期：",prop:"clientId"}},[t._v("\n            "+t._s(t.formValidate.sendDate)+"\n          ")])],1):t._e()],1):t._e(),n("Row",[n("Col",{staticClass:"block-title",attrs:{span:"24"}},[t._v("产品信息\n        ")]),n("Col",{attrs:{xs:24,md:24,lg:24}},[n("Table",{staticStyle:{margin:"10px 0"},attrs:{columns:t.columns,data:t.formValidate.detailList,border:"","show-summary":"","min-height":"200"}})],1)],1)],1),n("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[n("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("取消")]),t.isSend?n("Button",{attrs:{type:"primary",loading:t.isSubmit},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")]):t._e()],1)],1),n("chooseMateriel",{ref:"chooseMateriel",attrs:{houseId:t.formValidate.houseId},on:{handleChoose:t.handleChoose}})],1)},i=[],o=(n("8e6e"),n("456d"),n("ac6a"),n("bd86")),r=(n("7f7f"),n("c276"),n("f8b7")),s=n("2f08"),l=n("d9e1"),c=(n("2f62"),n("0658"));function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h={name:"addIandeBank",props:{modal:{type:Boolean}},components:{iCopyright:s["a"],chooseMateriel:l["a"]},data:function(){return{formValidate:{status:1},ruleValidate:{sendDate:[{required:!0,message:"请选择发货时间",trigger:"blur"}],sendWay:[{required:!0,message:"请填写发货方式",trigger:"blur"}]},showModal:!1,columns:[{title:"名称",key:"goodsName",minWidth:100},{title:"单位",key:"unit",minWidth:50},{title:"数量",minWidth:100,align:"center",key:"num"}],loading:!0,isSubmit:!1,goodsType:"",clientList:[],isSend:!1}},computed:{clientName:function(){return this.clientList[this.formValidate.clientId]||""},statusName:function(){switch(this.formValidate.status+""){case"1":return"生产中";case"2":return"生产完成";case"3":return"已发货";case"4":return"已完成";default:return""}}},methods:{handleReset:function(t){this.$refs[t].resetFields(),this.showModal=!1,this.loading=!1,this.isSubmit=!1,this.$emit("hideModal")},handleSubmit:function(t){var e=this;this.isSubmit||(this.isSubmit=!0,this.$refs[t].validate((function(n){if(n){if(e.formValidate.detailList.length<1)return e.isSubmit=!1,void e.$Message.error("请选择产品");Object(r["g"])(u({},e.formValidate)).then((function(n){e.$Message.success("保存成功"),e.handleReset(t),e.$emit("getData")})).catch((function(){e.isSubmit=!1}))}else e.isSubmit=!1})))},handleChoose:function(t){var e=this,n=this.formValidate.detailList,a=[];n.forEach((function(t){a.push(t.goodsId+"")})),t.forEach((function(t){var i={};-1===a.indexOf(t.id+"")&&(i.num=1,i.id=0,i.goodsId=t.id,i.goodsName=t.name,i.orderId=e.formValidate.id,n.push(i))})),this.formValidate.detailList=n},delGoods:function(t){this.formValidate.detailList.splice(t,1)},getInfo:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isSend=n,console.log(t),this.showModal=!0,this.loading=!0,Object(r["d"])({id:t}).then((function(t){0===t.ret&&(e.formValidate=t.data.info,e.formValidate.clientId=e.formValidate.clientId+"",e.formValidate.sendDate="",e.formValidate.sendWay="",e.loading=!1)}))},changeData:function(t){this.formValidate.sendDate=t},getClientList:function(){var t=this;Object(c["j"])().then((function(e){t.clientList=e.data.select}))}},mounted:function(){console.log(this.user),this.getClientList()},beforeDestroy:function(){},created:function(){}},f=h,m=(n("25a6"),n("2877")),p=Object(m["a"])(f,a,i,!1,null,"40f8eb96",null);e["a"]=p.exports},c4c8:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return c})),n.d(e,"a",(function(){return d}));var a=n("c276"),i=n("b6bd"),o=a["a"].cookies.get("token"),r=n("4328");function s(t){return Object(i["a"])({url:"/goods/manage/list?token="+o,method:"post",data:r.stringify(t)})}function l(t){return Object(i["a"])({url:"/goods/manage/info?token="+o,method:"post",data:t})}function c(t){return Object(i["a"])({url:"/goods/manage/save?token="+o,method:"post",data:t})}function d(t){return Object(i["a"])({url:"/goods/manage/del?token="+o,method:"post",data:t})}},c5f6:function(t,e,n){"use strict";var a=n("7726"),i=n("69a8"),o=n("2d95"),r=n("5dbc"),s=n("6a99"),l=n("79e5"),c=n("9093").f,d=n("11e9").f,u=n("86cc").f,h=n("aa77").trim,f="Number",m=a[f],p=m,g=m.prototype,b=o(n("2aeb")(g))==f,y="trim"in String.prototype,v=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=y?e.trim():h(e,3);var n,a,i,o=e.charCodeAt(0);if(43===o||45===o){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+e}for(var r,l=e.slice(2),c=0,d=l.length;c<d;c++)if(r=l.charCodeAt(c),r<48||r>i)return NaN;return parseInt(l,a)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof m&&(b?l((function(){g.valueOf.call(n)})):o(n)!=f)?r(new p(v(e)),n,m):v(e)};for(var w,I=n("9e1e")?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;I.length>O;O++)i(p,w=I[O])&&!i(m,w)&&u(m,w,d(p,w));m.prototype=g,g.constructor=m,n("2aba")(a,f,m)}},d9e1:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,title:"选择"+(2==t.type?"物料":2==t.isFinished?"半成品":"产品"),width:1e3},on:{"on-cancel":function(e){return t.handleReset("formValidate")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("div",{staticClass:"choose-class",class:t.isMobile?"":"wrapper"},[n("Card",{class:t.isMobile?"":"right-content"},[n("Form",{ref:"formCustom",attrs:{"label-width":100}},[n("Row",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"flex",justify:"space-between"}},[n("Col",{attrs:{xs:24,md:12,lg:12}},[n("Input",{staticStyle:{width:"95%"},attrs:{type:"text",placeholder:"请输入"+(2==t.type?"物料":2==t.isFinished?"半成品":"产品")+"名称",clearabl:""},model:{value:t.searchValidate.name,callback:function(e){t.$set(t.searchValidate,"name",e)},expression:"searchValidate.name"}})],1),n("Col",{attrs:{xs:24,md:12,lg:12}},[n("Button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),n("Button",{staticClass:"ivu-ml-8",on:{click:t.resetSearch}},[t._v("重置")]),t.showMore||1!=t.type||t.isFinished?t._e():n("a",{staticClass:"ivu-ml-8",attrs:{type:"text"},on:{click:function(e){t.showMore=!t.showMore}}},[t._v("\n              展开\n              "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),t.showMore?n("a",{staticClass:"ivu-ml-8",attrs:{type:"text"},on:{click:function(e){t.showMore=!t.showMore}}},[t._v("\n              收起\n              "),n("Icon",{attrs:{type:"ios-arrow-up"}})],1):t._e()],1)],1),t.showMore?n("Row",{attrs:{type:"flex",justify:"space-between"}},[n("Col",{attrs:{xs:24,md:12,lg:12}},[n("FormItem",{attrs:{label:"产品类型：","label-position":"top","label-width":90}},[n("RadioGroup",{model:{value:t.searchValidate.isFinished,callback:function(e){t.$set(t.searchValidate,"isFinished",e)},expression:"searchValidate.isFinished"}},[n("Radio",{attrs:{label:0}},[t._v("全部")]),n("Radio",{attrs:{label:2}},[t._v("半成品")]),n("Radio",{attrs:{label:1}},[t._v("成品")])],1)],1)],1)],1):t._e()],1),n("div",[n("div",[n("Table",{ref:"tableData",attrs:{columns:t.columns,data:t.data,loading:t.loading},on:{"on-selection-change":t.changeSelect}})],1),n("div",{staticClass:"ivu-mt ivu-text-center"},[n("Page",{attrs:{"page-size":t.pageInfo.pageSize,total:Number(t.pageInfo.count),current:t.pageInfo.page},on:{"on-change":t.changePage}})],1)])],1),t.isMobile?t._e():n("Card",{staticClass:"left-content"},[n("div",{staticClass:"ivu-mt",attrs:{slot:"title"},slot:"title"},[n("Alert",[n("Icon",{staticClass:"ivu-mr-8",attrs:{color:"#2d8cf0",type:"ios-alert"}}),t._v("\n          已选择 "+t._s(t.selectedArr.length)+" 项\n          "),n("a",{staticClass:"ivu-ml-8",on:{click:t.clearSelectd}},[t._v("清空")])],1)],1),n("List",{attrs:{border:""}},[n("Scroll",{staticStyle:{flex:"1"},attrs:{height:415}},t._l(t.selectedArr,(function(e,a){return n("ListItem",{key:a},[n("ListItemMeta",{attrs:{avatar:"",title:e.name,description:""}}),n("template",{slot:"action"},[n("li",{on:{click:function(e){return t.delClass(a)}}},[n("Icon",{attrs:{type:"md-close-circle",size:"19"}})],1)])],2)})),1)],1)],1)],1),n("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[n("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("取消")]),n("Button",{attrs:{type:"primary",loading:t.isSubmit},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确定")])],1)])},i=[],o=(n("8e6e"),n("456d"),n("386d"),n("ac6a"),n("bd86")),r=n("c4c8"),s=n("2f08"),l=n("2f62"),c=n("9411");function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h={name:"chooseMateriel",components:{iCopyright:s["a"]},props:{modal:{type:Boolean,default:!1},selected:{type:Array,default:function(){return[]}}},data:function(){return{columns:[{type:"selection",minWidth:50},{title:"名称",minWidth:100,key:"name"},{title:"单位",key:"unit",minWidth:100},{title:"库存",key:"stock",minWidth:100}],data:[],searchValidate:{name:"",isFinished:0,type:""},showModal:!1,selectedArr:[],showMore:!1,pageInfo:{pageSize:10,page:1,pageSum:0,count:0},type:"",isFinished:"",loading:!0,groupId:"",isSubmit:!1}},computed:u({},Object(l["e"])("admin/layout",["isMobile"])),watch:{},methods:{changeSelect:function(t){var e=this;this.selectedArr=[],t.forEach((function(t){e.selectedArr.push(t)}))},clearSelectd:function(){this.$refs.tableData.selectAll(!1),this.selectedArr=[]},handleReset:function(t){this.showModal=!1,this.$emit("hideModal")},handleSubmit:function(t){var e=this;if(this.groupId){if(this.isSubmit)return;this.isSubmit=!0;var n=this.selectedArr.map((function(t){return t.id}));Object(c["t"])({groupId:this.groupId,goodsId:n.join(",")}).then((function(t){console.log(222222),e.$Message.success("保存成功"),e.showModal=!1,e.isSubmit=!1})).catch((function(t){e.isSubmit=!1}))}else this.showModal=!1,this.$emit("handleChoose",this.selectedArr)},delClass:function(t){var e=this,n="";this.data.some((function(a,i){a.id===e.selectedArr[t].id&&(n=i)})),this.$refs.tableData.toggleSelect(n)},resetSearch:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.searchValidate={name:"",isFinished:this.isFinished,type:this.type},this.getData()},search:function(){this.pageInfo={pageSize:10,page:1,pageSum:0,count:0},this.getData()},changePage:function(t){this.pageInfo.page=t,this.getData()},getData:function(){var t=this;this.data=[],this.loading=!0,Object(r["c"])(u({},this.pageInfo,{},this.searchValidate)).then((function(e){var n=[];t.data=e.data.list.map((function(e){return n=t.selectedArr.filter((function(t){return t.id==e.id})),e._checked=n.length>0,e})),console.log(t.data),t.pageInfo=e.data.pageInfo,t.loading=!1})).catch((function(e){t.loading=!1}))},loadData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";console.log(111111111111),2==e?(this.isFinished="",this.type=2):(this.isFinished=t||0,this.type=1),this.searchValidate.isFinished=this.isFinished,this.searchValidate.type=this.type,this.searchValidate.name="",this.showModal=!0,this.loading=!0,this.selectedArr=[],this.groupId=n,n?this.getGroupGoods():this.search()},getGroupGoods:function(){var t=this;Object(c["s"])({groupId:this.groupId}).then((function(e){console.log(222222),console.log(e.data.list),t.selectedArr=e.data.list,t.search()})).catch((function(e){t.loading=!1}))}},mounted:function(){},beforeDestroy:function(){},created:function(){}},f=h,m=(n("a14d"),n("2877")),p=Object(m["a"])(f,a,i,!1,null,"f9c16154",null);e["a"]=p.exports},da17:function(t,e,n){},dd2b:function(t,e,n){},ddb1:function(t,e,n){},f8b7:function(t,e,n){"use strict";n.d(e,"e",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"f",(function(){return c})),n.d(e,"c",(function(){return d})),n.d(e,"g",(function(){return u})),n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return f})),n.d(e,"h",(function(){return m}));var a=n("c276"),i=n("b6bd"),o=a["a"].cookies.get("token"),r=n("4328");function s(t){return Object(i["a"])({url:"/sales/manage/list?token="+o,method:"post",data:r.stringify(t)})}function l(t){return Object(i["a"])({url:"/sales/manage/info?token="+o,method:"post",data:t})}function c(t){return Object(i["a"])({url:"/sales/manage/save?token="+o,method:"post",data:t})}function d(t){return Object(i["a"])({url:"/sales/manage/pro-complete?token="+o,method:"post",data:t})}function u(t){return Object(i["a"])({url:"/sales/manage/send?token="+o,method:"post",data:t})}function h(t){return Object(i["a"])({url:"/sales/manage/goods-list",method:"post",data:t})}function f(t){return Object(i["a"])({url:"/sales/manage/client-order",method:"post",data:t})}function m(t){return Object(i["a"])({url:"/sales/manage/print-data",method:"post",data:t})}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);